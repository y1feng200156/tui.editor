/*!
 * tui-editor
 * @version 1.3.0
 * @author NHN Ent. FE Development Lab <dl_javascript@nhnent.com> (https://nhnent.github.io/tui.editor/)
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("tui-code-snippet"),require("codemirror"),require("markdown-it"),require("to-mark"),require("highlight.js")):"function"==typeof define&&define.amd?define(["jquery","tui-code-snippet","codemirror","markdown-it","to-mark","highlight.js"],t):"object"==typeof exports?exports.Editor=t(require("jquery"),require("tui-code-snippet"),require("codemirror"),require("markdown-it"),require("to-mark"),require("highlight.js")):(e.tui=e.tui||{},e.tui.Editor=t(e.$,e.tui&&e.tui.util,e.CodeMirror,e.markdownit,e.toMark,e.hljs))}("undefined"!=typeof self?self:this,function(e,t,n,i,o,r){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="dist/",t(t.s=45)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(21),d=i(c),f=n(14),h=f.isMac?1:0,g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this._command=new u.default.Map,this._mdCommand=new u.default.Map,this._wwCommand=new u.default.Map,this._options=l.default.extend({useCommandShortcut:!0},n),this.base=t,this.keyMapCommand={},this._initEvent()}return r(e,[{key:"_addCommandBefore",value:function(e){var t={command:e};return this.base.eventManager.emit("addCommandBefore",t),t.command||e}},{key:"addCommand",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];i.length&&(t=e.command.apply(e,[t].concat(i))),t=this._addCommandBefore(t);var r=t.getName(),a=void 0;return t.isMDType()?a=this._mdCommand:t.isWWType()?a=this._wwCommand:t.isGlobalType()&&(a=this._command),a.set(r,t),t.keyMap&&(this.keyMapCommand[t.keyMap[h]]=r),t}},{key:"_initEvent",value:function(){var e=this;this.base.eventManager.listen("command",function(){e.exec.apply(e,arguments)}),this.base.eventManager.listen("keyMap",function(t){if(e._options.useCommandShortcut){var n=e.keyMapCommand[t.keyMap];n&&(t.data.preventDefault(),e.exec(n))}})}},{key:"exec",value:function(e){var t=void 0,n=void 0,i=this.base;if(t=this._command.get(e),t||(this.base.isMarkdownMode()?(t=this._mdCommand.get(e),i=this.base.mdEditor):(t=this._wwCommand.get(e),i=this.base.wwEditor)),t){for(var o,r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];a.unshift(i),n=(o=t).exec.apply(o,a)}return n}}]),e}();g.command=function(e,t){var n=d.default.factory(e,t.name,t.keyMap);return u.default.extend(n,t),n},t.default=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.I18n=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=void 0,s="en_US",u=function(){function e(){i(this,e),this._code=s,this._langs=new a.default.Map}return o(e,[{key:"setCode",value:function(e){this._code=e}},{key:"setLanguage",value:function(e,t){var n=this;e=[].concat(e),e.forEach(function(e){if(n._langs.has(e)){var i=n._langs.get(e);n._langs.set(e,a.default.extend(i,t))}else n._langs.set(e,t)})}},{key:"get",value:function(e,t){t||(t=this._code);var n=this._langs.get(t);n||(n=this._langs.get(s));var i=n[e];if(!i)throw new Error('There is no text key "'+e+'" in '+t);return i}}],[{key:"getSharedInstance",value:function(){return l||(l=new e),l}}]),e}();t.I18n=u,t.default=new u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=/\u200B/g,u=function(e){return e&&e.nodeType===Node.TEXT_NODE},c=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},d=function(e){return/^(ADDRESS|ARTICLE|ASIDE|BLOCKQUOTE|DETAILS|DIALOG|DD|DIV|DL|DT|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H[\d]|HEADER|HGROUP|HR|LI|MAIN|NAV|OL|P|PRE|SECTION|UL)$/gi.test(this.getNodeName(e))},f=function(e){return c(e)?e.tagName:"TEXT"},h=function(e){var t=void 0;return c(e)?t=e.textContent.replace(s,"").length:u(e)&&(t=e.nodeValue.replace(s,"").length),t},g=function(e){var t=void 0;return c(e)?t=e.childNodes.length:u(e)&&(t=e.nodeValue.replace(s,"").length),t},p=function(e){var t=e.parentNode.childNodes,n=void 0,i=void 0,o=void 0;for(n=0,i=t.length;n<i;n+=1)if(t[n]===e){o=n;break}return o},v=function(e,t){var n=void 0;return u(e)?n=e:e.childNodes.length&&t>=0&&(n=e.childNodes[t]),n},m=function(e,t,n){for(var i=e+"Sibling",o=void 0,r=void 0;t&&!t[i]&&(o=f(t.parentNode))!==n&&"BODY"!==o;)t=t.parentNode;return t[i]&&(r=t[i]),r},y=function(e,t,n){return t>0?v(e,t-1):m("previous",e,n)},_=function(e,t,n){for(var i=void 0;e.parentNode&&!t(e.parentNode)&&(e=e.parentNode,!n||!n(e.parentNode)););return t(e.parentNode)&&(i=e),i},b=function(e,t){return l.default.isString(t)?_(e,function(e){return t===f(e)}):_(e,function(e){return t===e})},k=function(e,t,n){var i=e+"Sibling",o=void 0;return t=b(t,n),t&&t[i]&&(o=t[i]),o},w=function(e,t){return k("previous",e,t)},C=function(e,t){return k("next",e,t)},E=function(e){return b(e,"BODY")},S=function(e){for(e=e.previousSibling||e.parentNode;!u(e)&&"BODY"!==f(e);)if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode;return"BODY"===f(e)&&(e=null),e},T=function(e,t){for(var n=document.createTreeWalker(e,4,null,!1),i=e===t;!i&&n.nextNode();)i=n.currentNode===t;return i},M=function(e,t,n){var i=[],o="",r=0,a=void 0;if(!t.length)return i;for(var s=t.shift(),u=document.createTreeWalker(e,4,null,!1);u.nextNode();){for(o=u.currentNode.nodeValue||"",n&&(o=n(o)),a=r+o.length;a>=s;){if(i.push({container:u.currentNode,offsetInContainer:s-r,offset:s}),!t.length)return i;s=t.shift()}r=a}do{i.push({container:u.currentNode,offsetInContainer:o.length,offset:s}),s=t.shift()}while(!l.default.isUndefined(s));return i},O=function(e){var t={};t.tagName=e.nodeName,e.id&&(t.id=e.id);var n=e.className.trim();return n&&(t.className=n),t},N=function(e,t){for(var n=[];e&&e!==t;)c(e)&&n.unshift(O(e)),e=e.parentNode;return n},L=function(e,t){var n=!0;return l.default.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(n=!1),n?e.nextElementSibling:e.previousElementSibling)},A=function(e,t,n){var i=!0,o=null,a=void 0,s=void 0,u=void 0,c=void 0,d=void 0,h=void 0;return l.default.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(i=!1),e?(a=(0,r.default)(e),i?(u=a.parent().next(),c=a.parents("thead"),d=c[0]&&c.next(),h=d&&"TBODY"===f(d[0]),s=0):(u=a.parent().prev(),c=a.parents("tbody"),d=c[0]&&c.prev(),h=d&&"THEAD"===f(d[0]),s=e.parentNode.childNodes.length-1),!l.default.isUndefined(n)&&n||(s=p(e)),u[0]?o=u.children("td,th")[s]:c[0]&&h&&(o=d.find("td,th")[s]),o):null)};t.default={getNodeName:f,isTextNode:u,isElemNode:c,isBlockNode:d,getTextLength:h,getOffsetLength:g,getPrevOffsetNodeUntil:y,getNodeOffsetOfParent:p,getChildNodeByOffset:v,containsNode:T,getTopPrevNodeUnder:w,getTopNextNodeUnder:C,getParentUntilBy:_,getParentUntil:b,getTopBlockNode:E,getPrevTextNode:S,findOffsetNode:M,getPath:N,getNodeInfo:O,getTableCellByDirection:L,getSiblingRowCellByDirection:A}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),c=n(1),d=i(c),f=n(8),h=i(f),g="tui-popup-",p='<div class="'+g+'header">\n        <span class="'+g+'title"></span>\n        <div class="'+g+'header-buttons">\n            <button type="button" class="'+g+'close-button"></button>\n        </div>\n    </div>\n    <div class="'+g+'body"></div>',v='<div class="'+g+'wrapper">\n        <div class="'+g+'header">\n            <span class="'+g+'title"></span>\n            <div class="'+g+'header-buttons">\n                <button type="button" class="'+g+'close-button"></button>\n            </div>\n        </div>\n        <div class="'+g+'body"></div>\n    </div>',m=function(e){function t(e){o(this,t),e=d.default.extend({header:!0,$target:(0,u.default)("body"),textContent:""},e);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:e.modal?g+"modal-background":g+"wrapper",rootElement:e.$el}));return n._initInstance(e),n._initDOM(e),n._initDOMEvent(e),n._initEditorEvent(e),n}return a(t,e),l(t,[{key:"_initInstance",value:function(e){this._$target=e.$target,e.$el&&(this.$el=e.$el,this._isExternalHtmlUse=!0),e.content?this.$content=(0,u.default)(e.content):this.$content=e.textContent,this.options=e}},{key:"_initDOM",value:function(){this._initLayout(),this._isExternalHtmlUse||(d.default.isExisty(this.options.title)&&this.setTitle(this.options.title),this.setContent(this.$content));var e=this.options.headerButtons;if(e){this.$el.find("."+g+"close-button").remove();var t=this.$el.find("."+g+"header-buttons");t.empty(),t.append((0,u.default)(e))}this.options.css&&this.$el.css(this.options.css)}},{key:"_initDOMEvent",value:function(){var e=this,t=this.options,n=t.openerCssQuery,i=t.closerCssQuery;n&&(0,u.default)(n).on("click."+this._id,function(){return e.show()}),i&&(0,u.default)(i).on("click."+this._id,function(){return e.hide()}),this.on("click ."+g+"close-button",function(){return e.hide()})}},{key:"_initEditorEvent",value:function(){}},{key:"_initLayout",value:function(){var e=this.options;if(this._isExternalHtmlUse)this.hide(),this._$target.append(this.$el);else{var t=e.modal?v:p;this.$el.html(t),this.$el.addClass(e.className),this.hide(),this._$target.append(this.$el),this.$body=this.$el.find("."+g+"body"),e.header||this.$el.find("."+g+"header").remove()}}},{key:"setContent",value:function(e){this.$body.empty(),this.$body.append(e)}},{key:"setTitle",value:function(e){var t=this.$el.find("."+g+"title");t.empty(),t.append(e)}},{key:"getTitleElement",value:function(){return this.$el.find("."+g+"title").get(0)}},{key:"hide",value:function(){this.$el.css("display","none"),this._isShow=!1,this.trigger("hidden",this)}},{key:"show",value:function(){this.$el.css("display","block"),this._isShow=!0,this.trigger("shown",this)}},{key:"isShow",value:function(){return this._isShow}},{key:"remove",value:function(){var e=this.options,t=e.openerCssQuery,n=e.closerCssQuery;this.trigger("remove",this),this.off(),t&&(0,u.default)(t).off("."+this._id),n&&(0,u.default)(n).off("."+this._id),this.$el.remove()}},{key:"setFitToWindow",value:function(e){this.$el.toggleClass("fit-window",e)}},{key:"isFitToWindow",value:function(){return this.$el.hasClass("fit-window")}},{key:"toggleFitToWindow",value:function(){var e=!this.isFitToWindow();return this.setFitToWindow(e),e}}]),t}(h.default);t.default=m},function(e,t){e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeBlockManager=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(32),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){i(this,e),this._replacers={}}return r(e,[{key:"setReplacer",value:function(e,t){this._replacers[e]=t}},{key:"getReplacer",value:function(e){return this._replacers[e]}},{key:"createCodeBlockHtml",value:function(e,t){var n=this.getReplacer(e);return n?n(t,e):l.default.getLanguage(e)?l.default.highlight(e,t).value:o(t,!1)}}],[{key:"getHighlightJSLanguages",value:function(){return l.default.listLanguages()}}]),e}();t.CodeBlockManager=s,t.default=new s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return d+=1}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),s=i(l),u=n(1),c=i(u),d=-1,f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),t=c.default.extend({tagName:"div"},t),this.tagName=t.tagName,this.className=t.className,this._id=r(),this._setRootElement(t.rootElement)}return a(e,[{key:"on",value:function(e,t){var n=this;c.default.isObject(e)?c.default.forEach(e,function(e,t){n._addEvent(t,e)}):this._addEvent(e,t)}},{key:"_addEvent",value:function(e,t){var n=this._parseEventType(e),i=n.event,o=n.selector;o?this.$el.on(i,o,t):this.$el.on(i,t)}},{key:"off",value:function(e,t){if(e){var n=this._parseEventType(e),i=n.event,o=n.selector;o?this.$el.off(i,o,t):this.$el.off(i,t)}else this.$el.off()}},{key:"_parseEventType",value:function(e){var t=e.split(" ");return{event:t.shift(),selector:t.join(" ")}}},{key:"_setRootElement",value:function(e){var t=this.tagName,n=this.className;e||(n=n||"uic"+this._id,e=(0,s.default)("<"+t+' class="'+n+'"/>')),this.$el=e}},{key:"trigger",value:function(){var e;(e=this.$el).trigger.apply(e,arguments)}},{key:"_getEventNameWithNamespace",value:function(e){var t=e.split(" ");return t[0]+=".uicEvent"+this._id,t.join(" ")}},{key:"remove",value:function(){this.$el&&this.$el.remove()}},{key:"destroy",value:function(){var e=this;this.remove(),c.default.forEachOwnProperties(this,function(t,n){e[n]=null})}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i),r=0;r<t.length;r+=1)o[r]=t.charCodeAt(r);return new Blob([i],{type:n})}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})(\/([^\s]*))?$/g,u=function(){function e(t){i(this,e),this.eventManager=t,this._initEvent(),this._initDefaultImageImporter()}return r(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("drop",function(t){var n=t.data.dataTransfer&&t.data.dataTransfer.files;e._processBlobItems(n,t.data)}),this.eventManager.listen("willPaste",function(t){var n=t.data.fragment,i=n.querySelectorAll("*");if(1===i.length&&"IMG"===i[0].tagName&&/^data:image/.test(i[0].src)){t.data.preventDefault();var r=o(i[0].src);e._emitAddImageBlobHook(r,"paste")}}),this.eventManager.listen("paste",function(t){e._processClipboard(t.data)}),this.eventManager.listen("pasteBefore",function(t){e._decodeURL(t)})}},{key:"_initDefaultImageImporter",value:function(){this.eventManager.listen("addImageBlobHook",function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)})}},{key:"_emitAddImageBlobHook",value:function(e,t){var n=this;this.eventManager.emit("addImageBlobHook",e,function(t,i){n.eventManager.emit("command","AddImage",{imageUrl:t,altText:i||e.name||"image"})},t)}},{key:"_decodeURL",value:function(t){var n=e.decodeURIGraceful,i=e.encodeMarkdownCharacters;if("markdown"===t.source&&t.data.text){var o=t.data.text,r=o[0];1===o.length&&r.match(s)&&(r=n(r),r=i(r),t.data.update(null,null,[r]))}else if("wysiwyg"===t.source){var a=t.$clipboardContainer.get(0),l=a.childNodes[0],u=l.innerText;1===a.childNodes.length&&"A"===l.tagName&&u.match(s)&&(l.innerText=n(u),l.href=i(l.href))}}},{key:"_processClipboard",value:function(e){var t=e.clipboardData||window.clipboardData,n=t&&t.items,i=t.types;n&&i&&1===i.length&&-1!==l.default.inArray("Files",[].slice.call(i))&&this._processBlobItems(n,e)}},{key:"_processBlobItems",value:function(e,t){var n=this;e&&l.default.forEachArray(e,function(e){if(-1!==e.type.indexOf("image")){t.preventDefault(),t.stopPropagation(),t.codemirrorIgnore=!0;var i=e.name?e:e.getAsFile();return n._emitAddImageBlobHook(i,t.type),!1}return!0})}}],[{key:"decodeURIGraceful",value:function(e){var t=e.split(" "),n=[],i=void 0;return l.default.forEachArray(t,function(e){try{i=decodeURIComponent(e),i=i.replace(/ /g,"%20")}catch(t){i=e}return n.push(i)}),n.join(" ")}},{key:"encodeMarkdownCharacters",value:function(e){return e.replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\[/g,"%5B").replace(/\]/g,"%5D").replace(/</g,"%3C").replace(/>/g,"%3E")}},{key:"escapeMarkdownCharacters",value:function(e){return e.replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/</g,"\\<").replace(/>/g,"\\>")}}]),e}();t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=i(s),c=n(8),d=i(c),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:t.name};o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u.default.extend({className:t.className},e)));return n._name=e.name,n}return a(t,e),l(t,[{key:"getName",value:function(){return this._name}}]),t}(d.default);Object.defineProperty(f,"name",{enumerable:!0,writable:!0,value:"item"}),Object.defineProperty(f,"className",{enumerable:!0,writable:!0,value:"tui-toolbar-item"}),t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(12),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n,r,a){i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a));return l._initEvent(),l}return r(t,e),a(t,[{key:"_initEvent",value:function(){var e=this,t="";this.eventManager.listen("contentChangedFromMarkdown",function(n){t=n.getValue(),e.isVisible()&&e.lazyRunner.run("refresh",t.replace(/<br>\n/g,"<br>"))}),this.eventManager.listen("previewNeedsRefresh",function(n){e.refresh(n||t)}),this.$el.on("scroll",function(t){e.eventManager.emit("scroll",{source:"preview",data:t})})}},{key:"render",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e),this.eventManager.emit("previewRenderAfter",this)}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(20),u=i(s),c=function(){function e(t,n,i,r){o(this,e),this.eventManager=n,this.convertor=i,this.$el=t,this.isViewer=!!r,this._initContentSection(),this.lazyRunner=new u.default,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,800,this)}return r(e,[{key:"_initContentSection",value:function(){this._$previewContent=(0,l.default)('<div class="tui-editor-contents" />'),this.$el.append(this._$previewContent)}},{key:"refresh",value:function(e){this.render(this.convertor.toHTMLWithCodeHightlight(e))}},{key:"getHTML",value:function(){return this._$previewContent.html()}},{key:"setHTML",value:function(e){this._$previewContent.html(e)}},{key:"render",value:function(e){var t=this._$previewContent;e=this.eventManager.emit("previewBeforeHook",e)||e,t.empty(),t.html(e)}},{key:"setHeight",value:function(e){this.$el.get(0).style.height=e+"px"}},{key:"setMinHeight",value:function(e){this.$el.get(0).style.minHeight=e+"px"}},{key:"isVisible",value:function(){return"none"!==this.$el.css("display")}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,u.default)("<div />");return e=e.replace(/<!--[\s\S]*?-->/g,""),n.append(e),r(n),a(n),l(n,t)}function r(e){e.find("script, iframe, textarea, form, button, select, meta, style, link, title").remove()}function a(e){e.find("*").each(function(e,t){var n=t.attributes,i=d.default.toArray(n).filter(function(e){var t=e.name.match(f),n=e.name.match(h);return!t&&!n});d.default.forEachArray(i,function(e){n.getNamedItem(e.name)&&n.removeNamedItem(e.name)})})}function l(e,t){var n=void 0;if(t)n=e[0].innerHTML;else{for(var i=document.createDocumentFragment(),o=d.default.toArray(e[0].childNodes),r=o.length,a=0;a<r;a+=1)i.appendChild(o[a]);n=i}return n}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),u=i(s),c=n(1),d=i(c),f=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),h=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g");t.default=o},function(e,t,n){"use strict";var i=/Mac/.test(navigator.platform);e.exports={isMac:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=["previewBeforeHook","previewRenderAfter","previewNeedsRefresh","addImageBlobHook","setMarkdownAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeModeBefore","changeMode","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","openPopupCodeBlockLanguages","openPopupCodeBlockEditor","openDropdownToolbar","closePopupCodeBlockLanguages","closePopupCodeBlockEditor","closeAllPopup","command","addCommandBefore","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorBeforeHtmlToMarkdownConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","scroll","click","mousedown","mouseover","mouseout","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","pasteBefore","willPaste","copy","copyBefore","copyAfter","cut","cutAfter","drop","show","hide"],s=function(){function e(){i(this,e),this.events=new a.default.Map,this.TYPE=new a.default.Enum(l)}return o(e,[{key:"listen",value:function(e,t){var n=this._getTypeInfo(e),i=this.events.get(n.type)||[];if(!this._hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),i.push(t),this.events.set(n.type,i)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),o=this._getTypeInfo(i),r=this.events.get(o.type),l=void 0;return r&&a.default.forEach(r,function(e){var n=e.apply(void 0,t);a.default.isUndefined(n)||(l=l||[],l.push(n))}),l}},{key:"emitReduce",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),o=this.events.get(i);return o&&a.default.forEach(o,function(e){var n=e.apply(void 0,t);a.default.isFalsy(n)||(t[0]=n)}),t[0]}},{key:"_getTypeInfo",value:function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}}},{key:"_hasEventType",value:function(e){return!a.default.isUndefined(this.TYPE[this._getTypeInfo(e).type])}},{key:"addEventType",value:function(e){if(this._hasEventType(e))throw new Error("There is already have event type "+e);this.TYPE.set(e)}},{key:"removeEventHandler",value:function(e,t){var n=this,i=this._getTypeInfo(e),o=i.type,r=i.namespace;o&&t?this._removeEventHandlerWithHandler(o,t):o&&!r?this.events.delete(o):!o&&r?this.events.forEach(function(e,t){n._removeEventHandlerWithTypeInfo(t,r)}):o&&r&&this._removeEventHandlerWithTypeInfo(o,r)}},{key:"_removeEventHandlerWithHandler",value:function(e,t){var n=this.events.get(e)||[],i=n.indexOf(t);i>=0&&n.splice(i,1)}},{key:"_removeEventHandlerWithTypeInfo",value:function(e,t){var n=[],i=this.events.get(e);i&&(i.map(function(e){return e.namespace!==t&&n.push(e),null}),this.events.set(e,n))}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){i(this,e),this.exts=new a.default.Map}return o(e,[{key:"defineExtension",value:function(e,t){this.exts.set(e,t)}},{key:"applyExtension",value:function(e,t){var n=this;t&&t.forEach(function(t){var i=a.default.isObject(t),o=i?t.name:t;if(n.exts.has(o)){var r=n.exts.get(o);i?r(e,t):r(e)}})}}]),e}();t.default=new l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(22),d=i(c),f=n(23),h=i(f),g=n(24),p=i(g),v=n(13),m=i(v),y=n(25),_=i(y),b=n(26),k=i(b),w=n(27),C=i(w),E=n(28),S=i(E),T=n(29),M=i(T),O=n(30),N=i(O),L=n(31),A=i(L),x=n(7),B=i(x),P=new d.default({html:!0,breaks:!1,quotes:"“”‘’",langPrefix:"lang-",highlight:function(e,t){return B.default.createCodeBlockHtml(t,e)}}),I=new d.default({html:!0,breaks:!1,quotes:"“”‘’",langPrefix:"lang-"});P.block.ruler.at("code",C.default),P.block.ruler.at("table",M.default,{alt:["paragraph","reference"]}),P.block.ruler.at("blockquote",S.default,{alt:["paragraph","reference","blockquote","list"]}),P.block.ruler.at("html_block",N.default,{alt:["paragraph","reference","blockquote"]}),P.inline.ruler.at("backticks",A.default),P.use(p.default),P.use(_.default),P.use(k.default),I.block.ruler.at("code",C.default),I.block.ruler.at("table",M.default,{alt:["paragraph","reference"]}),I.block.ruler.at("blockquote",S.default,{alt:["paragraph","reference","blockquote","list"]}),I.block.ruler.at("html_block",N.default,{alt:["paragraph","reference","blockquote"]}),I.inline.ruler.at("backticks",A.default),I.use(p.default),I.use(_.default),I.use(k.default);var R=function(){function e(t){o(this,e),this.eventManager=t}return r(e,[{key:"_markdownToHtmlWithCodeHighlight",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=P.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_markdownToHtml",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=I.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_removeBrToMarkPassAttributeInCode",value:function(e){var t=(0,l.default)("<div />");return t.html(e),t.find("code, pre").each(function(e,t){var n=(0,l.default)(t);n.html(n.html().replace(/&lt;br data-tomark-pass&gt;/,"&lt;br&gt;"))}),e=t.html()}},{key:"toHTMLWithCodeHightlight",value:function(e){var t=this._markdownToHtmlWithCodeHighlight(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"toHTML",value:function(e){var t=this._markdownToHtml(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"initHtmlSanitizer",value:function(){this.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return(0,m.default)(e,!0)})}},{key:"toMarkdown",value:function(e,t){var n=[];e=this.eventManager.emitReduce("convertorBeforeHtmlToMarkdownConverted",e);var i=(0,h.default)(this._appendAttributeForBrIfNeed(e),t);i=i.replace(/\+/g,"\\+"),i=i.replace(/<u>|<\/u>/g,"++");var o=i.match(/\+\+(.*?)\+\+/gm);return o&&o.forEach(function(e){i=i.replace(e,e.replace(/ |\u00a0/g,"&nbsp;"))}),i=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",i),u.default.forEach(i.split("\n"),function(e,t){var i=/^\|[^|]*\|/gi;/`[^`]*<br>[^`]*`/gi.test(e)||i.test(e)||(e=e.replace(/<br>/gi,"<br>\n")),n[t]=e}),n.join("\n")}},{key:"_appendAttributeForBrIfNeed",value:function(e){var t=/<br>/gi,n=/<br \/><br \/>/gi,i=/<br data-tomark-pass \/><br \/>(.)/gi,o=/([^>]|<\/a>|<\/code>|<\/span>|<\/b>|<\/i>|<\/s>|<img [^>]*>)/,r=/<br data-tomark-pass \/><br data-tomark-pass \/>/,a=new RegExp(o.source+r.source,"g");e=e.replace(t,"<br />"),e=e.replace(n,"<br data-tomark-pass /><br data-tomark-pass />");var s=document.createElement("div"),u=(0,l.default)(s);return u.html(e),u.find("pre br,code br").each(function(e,t){t.hasAttribute("data-tomark-pass")&&t.removeAttribute("data-tomark-pass")}),e=u.html().replace(/<br data-tomark-pass="">/gi,"<br data-tomark-pass />"),e=e.replace(t,"<br />"),e=e.replace(i,"<br data-tomark-pass /><br data-tomark-pass />$1"),e=e.replace(a,"$1<br /><br />")}}],[{key:"getMarkdownitHighlightRenderer",value:function(){return P}},{key:"getMarkdownitRenderer",value:function(){return I}}]),e}();t.default=R},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),u=i(s),c=n(35),d=i(c),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tagName:"button",name:t.name};o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:e.name,tagName:"button",className:e.className+" "+t.className,rootElement:e.$el}));return n._setOptions(e),n._render(),n.on("click",n._onClick.bind(n)),e.tooltip&&(n.on("mouseover",n._onOver.bind(n)),n.on("mouseout",n._onOut.bind(n))),n}return a(t,e),l(t,[{key:"setTooltip",value:function(e){this._tooltip=e}},{key:"_setOptions",value:function(e){this._command=e.command,this._event=e.event,this._text=e.text,this._tooltip=e.tooltip,this._style=e.style,this._state=e.state}},{key:"_render",value:function(){this.$el.text(this._text),this.$el.attr("type","button"),this._style&&this.$el.attr("style",this._style)}},{key:"_onClick",value:function(){this.isEnabled()&&(this._command?this.trigger("command",this._command):this._event&&this.trigger("event",this._event),this.trigger("clicked"))}},{key:"_onOver",value:function(){this.isEnabled()&&d.default.show(this.$el,this._tooltip)}},{key:"_onOut",value:function(){d.default.hide()}},{key:"enable",value:function(){this.$el.attr("disabled",!1)}},{key:"disable",value:function(){this.$el.attr("disabled",!0)}},{key:"isEnabled",value:function(){return!this.$el.attr("disabled")}}]),t}(u.default);Object.defineProperty(f,"name",{enumerable:!0,writable:!0,value:"button"}),Object.defineProperty(f,"className",{enumerable:!0,writable:!0,value:"tui-toolbar-icons"}),t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","","","","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","@","!",'"',"#","$","%","&","_","(",")","*","+","|","-","{","}","~","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","-",".","/","`","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","'","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""],a=void 0,l=function(){function e(t){i(this,e),this._setSplitter(t)}return o(e,[{key:"_setSplitter",value:function(e){var t=e?e.splitter:"+";this._splitter=t}},{key:"convert",value:function(e){var t=[];e.shiftKey&&t.push("SHIFT"),e.ctrlKey&&t.push("CTRL"),e.metaKey&&t.push("META"),e.altKey&&t.push("ALT");var n=this._getKeyCodeChar(e.keyCode);return n&&t.push(n),t.join(this._splitter)}},{key:"_getKeyCodeChar",value:function(e){return r[e]}}],[{key:"getSharedInstance",value:function(){return a||(a=new e),a}},{key:"keyCode",value:function(e){return r.indexOf(e)}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){i(this,e),this.globalTOID=null,this.lazyRunFunctions={}}return o(e,[{key:"run",value:function(e,t,n,i){var o=void 0;return a.default.isString(e)?o=this._runRegisteredRun(e,t,n,i):(o=this._runSingleRun(e,t,n,i,this.globalTOID),this.globalTOID=o),o}},{key:"registerLazyRunFunction",value:function(e,t,n,i){i=i||this,this.lazyRunFunctions[e]={fn:t,delay:n,context:i,TOID:null}}},{key:"_runSingleRun",value:function(e,t,n,i,o){return this._clearTOIDIfNeed(o),o=setTimeout(function(){e.call(n,t)},i)}},{key:"_runRegisteredRun",value:function(e,t,n,i){var o=this.lazyRunFunctions[e],r=o.fn,a=o.TOID;return i=i||o.delay,n=n||o.context,a=this._runSingleRun(r,t,n,i,a),o.TOID=a,a}},{key:"_clearTOIDIfNeed",value:function(e){e&&clearTimeout(e)}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(t,n,o){i(this,e),this.name=t,this.type=n,o&&this.setKeyMap(o)}return o(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"isMDType",value:function(){return this.type===e.TYPE.MD}},{key:"isWWType",value:function(){return this.type===e.TYPE.WW}},{key:"isGlobalType",value:function(){return this.type===e.TYPE.GB}},{key:"setKeyMap",value:function(e,t){this.keyMap=[e,t]}}]),e}();l.factory=function(e,t){var n=void 0;"markdown"===e?n=l.TYPE.MD:"wysiwyg"===e?n=l.TYPE.WW:"global"===e&&(n=l.TYPE.GB);var i=new l(t.name,n);return a.default.extend(i,t),i},l.TYPE={MD:0,WW:1,GB:2},t.default=l},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t,n){"use strict";e.exports=function(e){function t(e,t){var n,i,o,r,a,l=e.pos,s=e.src.charCodeAt(l);if(t)return!1;if(43!==s)return!1;if(i=e.scanDelims(e.pos,!0),r=i.length,a=String.fromCharCode(s),r<2)return!1;for(r%2&&(o=e.push("text","",0),o.content=a,r--),n=0;n<r;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:s,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function n(e){var t,n,i,o,r,a=[],l=e.delimiters,s=e.delimiters.length;for(t=0;t<s;t++)i=l[t],43===i.marker&&-1!==i.end&&(o=l[i.end],r=e.tokens[i.token],r.type="ins_open",r.tag="ins",r.nesting=1,r.markup="++",r.content="",r=e.tokens[o.token],r.type="ins_close",r.tag="ins",r.nesting=-1,r.markup="++",r.content="","text"===e.tokens[o.token-1].type&&"+"===e.tokens[o.token-1].content&&a.push(o.token-1));for(;a.length;){for(t=a.pop(),n=t+1;n<e.tokens.length&&"ins_close"===e.tokens[n].type;)n++;n--,t!==n&&(r=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=r)}}e.inline.ruler.before("emphasis","ins",t),e.inline.ruler2.before("emphasis","ins",n)}},function(e,t,n){"use strict";function i(e){e.content=e.content.slice(4),e.children[0].content=e.children[0].content.slice(4)}function o(e){var t=!1;return 0!==e.content.indexOf("[x]")&&0!==e.content.indexOf("[X]")||(t=!0),t}function r(e,t,n){var i=e.attrIndex(t),o=[t,n];i<0?e.attrPush(o):e.attrs[i]=o}function a(e,t){return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===e[t].content.indexOf("[ ]")||0===e[t].content.indexOf("[x]")||0===e[t].content.indexOf("[X]"))}var l=function(e){e.core.ruler.after("inline","tui-task-list",function(e){var t,n,l=e.tokens;for(n=2;n<l.length;n+=1)a(l,n)&&(t=o(l[n])?"task-list-item checked":"task-list-item",i(l[n]),r(l[n-2],"class",t),r(l[n-2],"data-te-task",""))})};e.exports=l},function(e,t,n){"use strict";function i(e,t,n){var i=e.attrIndex(t),o=[t,n];i<0?e.attrPush(o):e.attrs[i]=o}function o(e){return!0===e.block&&"code"===e.tag&&"fence"===e.type}function r(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var a=function(e){e.core.ruler.after("block","tui-code-block",function(e){var t,n,a,l=e.tokens;for(n=0;n<l.length;n+=1)t=l[n],o(t)&&(a=t.markup.length,a>3&&i(t,"data-backticks",a),t.info&&i(t,"data-language",r(t.info.replace(" ",""),!0)))})};e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t,n){var i,o,r,a=/ {0,3}(?:-|\*|\d\.) /,l=e.src.split("\n"),s=l[t],u=0;if(s.match(a)||e.sCount[t]-e.blkIndent<4)return!1;for(o=i=t+1;i<n;)if(e.isEmpty(i)){if(++u>=2&&"list"===e.parentType)break;i++}else{if(u=0,!(e.sCount[i]-e.blkIndent>=4))break;i++,o=i}return e.line=o,r=e.push("code_block","code",0),r.content=e.getLines(t,o,4+e.blkIndent,!0),r.map=[t,e.line],!0}},function(e,t,n){"use strict";function i(e){switch(e){case 9:case 32:return!0}return!1}e.exports=function(e,t,n,o){var r,a,l,s,u,c,d,f,h,g,p,v,m,y,_,b,k,w,C,E,S=e.lineMax,T=e.bMarks[t]+e.tShift[t],M=e.eMarks[t],O=/(?:-|\*|\d+\.) {1,4}(?:> {0,3})[^>]*$/,N=e.src.split("\n"),L=N[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(T++))return!1;if(L.match(O))return!1;if(o)return!0;for(s=h=e.sCount[t]+T-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(T)?(T++,s++,h++,r=!1,b=!0):9===e.src.charCodeAt(T)?(b=!0,(e.bsCount[t]+h)%4==3?(T++,s++,h++,r=!1):r=!0):b=!1,g=[e.bMarks[t]],e.bMarks[t]=T;T<M&&(a=e.src.charCodeAt(T),i(a));)9===a?h+=4-(h+e.bsCount[t]+(r?1:0))%4:h++,T++;for(p=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(b?1:0),c=T>=M,y=[e.sCount[t]],e.sCount[t]=h-s,_=[e.tShift[t]],e.tShift[t]=T-e.bMarks[t],w=e.md.block.ruler.getRules("blockquote"),m=e.parentType,e.parentType="blockquote",E=!1,f=t+1;f<n&&(e.sCount[f]<e.blkIndent&&(E=!0),T=e.bMarks[f]+e.tShift[f],M=e.eMarks[f],!(T>=M));f++)if(62!==e.src.charCodeAt(T++)||E){if(c)break;for(k=!1,l=0,u=w.length;l<u;l++)if(w[l](e,f,n,!0)){k=!0;break}if(k){e.lineMax=f,0!==e.blkIndent&&(g.push(e.bMarks[f]),p.push(e.bsCount[f]),_.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}g.push(e.bMarks[f]),p.push(e.bsCount[f]),_.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}else{for(s=h=e.sCount[f]+T-(e.bMarks[f]+e.tShift[f]),32===e.src.charCodeAt(T)?(T++,s++,h++,r=!1,b=!0):9===e.src.charCodeAt(T)?(b=!0,(e.bsCount[f]+h)%4==3?(T++,s++,h++,r=!1):r=!0):b=!1,g.push(e.bMarks[f]),e.bMarks[f]=T;T<M&&(a=e.src.charCodeAt(T),i(a));)9===a?h+=4-(h+e.bsCount[f]+(r?1:0))%4:h++,T++;c=T>=M,p.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(b?1:0),y.push(e.sCount[f]),e.sCount[f]=h-s,_.push(e.tShift[f]),e.tShift[f]=T-e.bMarks[f]}for(v=e.blkIndent,e.blkIndent=0,C=e.push("blockquote_open","blockquote",1),C.markup=">",C.map=d=[t,0],e.md.block.tokenize(e,t,f),C=e.push("blockquote_close","blockquote",-1),C.markup=">",e.lineMax=S,e.parentType=m,d[1]=e.line,l=0;l<_.length;l++)e.bMarks[l+t]=g[l],e.tShift[l+t]=_[l],e.sCount[l+t]=y[l],e.bsCount[l+t]=p[l];return e.blkIndent=v,!0}},function(e,t,n){"use strict";function i(e,t){var n=e.bMarks[t]+e.blkIndent,i=e.eMarks[t];return e.src.substr(n,i-n)}function o(e){var t,n=[],i=0,o=e.length,r=0,a=0,l=!1,s=0;for(t=e.charCodeAt(i);i<o;)96===t&&r%2==0?(l=!l,s=i):124!==t||r%2!=0||l?92===t?r+=1:r=0:(n.push(e.substring(a,i)),a=i+1),i+=1,i===o&&l&&(l=!1,i=s+1),t=e.charCodeAt(i);return n.push(e.substring(a)),n}e.exports=function(e,t,n,r){var a,l,s,u,c,d,f,h,g,p,v,m,y;if(t+2>n)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if((s=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(a=e.src.charCodeAt(s))&&45!==a&&58!==a)return!1;if(l=i(e,t+1),!/^[-:| ]+$/.test(l))return!1;for(d=l.split("|"),g=[],u=0;u<d.length;u+=1){if(!(v=d[u].trim())){if(0===u||u===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?g.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?g.push("left"):g.push("")}if(p=g.length,l=i(e,t).trim(),-1===l.indexOf("|"))return!1;if(d=o(l.replace(/^\||\|$/g,"")),(f=d.length)>p)return!1;if(f<p){for(u=0;u<p-f;u+=1)d.push("");f=d.length}if(r)return!0;for(h=e.push("table_open","table",1),h.map=m=[t,0],h=e.push("thead_open","thead",1),h.map=[t,t+1],h=e.push("tr_open","tr",1),h.map=[t,t+1],u=0;u<f;u+=1)h=e.push("th_open","th",1),h.map=[t,t+1],g[u]&&(h.attrs=[["align",g[u]]]),h=e.push("inline","",0),h.content=d[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),h=e.push("tbody_open","tbody",1),h.map=y=[t+2,0],c=t+2;c<n&&!(e.sCount[c]<e.blkIndent)&&(l=i(e,c),-1!==l.indexOf("|"));c+=1){for(d=o(l.replace(/^\||\|\s*$/g,"")),h=e.push("tr_open","tr",1),u=0;u<f;u+=1)h=e.push("td_open","td",1),g[u]&&(h.attrs=[["align",g[u]]]),h=e.push("inline","",0),h.content=d[u]?d[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),m[1]=y[1]=c,e.line=c,!0}},function(e,t,n){"use strict";var i=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],o=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^<("+i.join("|")+")","i"),/^\/?>$/,!0],[new RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|pre|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)\s*$/,/^$/,!1]];e.exports=function(e,t,n,i){var r,a,l,s,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(u))return!1;for(s=e.src.slice(u,c),r=0;r<o.length;r++)if(o[r][0].test(s)){if(5===r)return!1;break}if(r===o.length)return!1;if(i)return o[r][2];if(a=t+1,!o[r][1].test(s))for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(u=e.bMarks[a]+e.tShift[a],c=e.eMarks[a],s=e.src.slice(u,c),o[r][1].test(s)){0!==s.length&&a++;break}return e.line=a,l=e.push("html_block","",0),l.map=[t,a],l.content=e.getLines(t,a,e.blkIndent,!0),!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,i,o,r,a,l,s=e.pos;if(96!==e.src.charCodeAt(s))return!1;for(n=s,s++,i=e.posMax;s<i&&96===e.src.charCodeAt(s);)s++;for(o=e.src.slice(n,s),r=a=s;-1!==(r=e.src.indexOf("`",a));){for(a=r+1;a<i&&96===e.src.charCodeAt(a);)a++;if(a-r===o.length)return t||(l=e.push("code_inline","code",0),l.markup=o,l.content=e.src.slice(s,r).replace(/[ \n]+/g," ").trim(),l.attrSet("data-backticks",l.markup.length)),e.pos=a,!0}return t||(e.pending+=o),e.pos+=o.length,!0}},function(e,t){e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(11),d=i(c),f=n(15),h=i(f),g=n(2),p=i(g),v=n(16),m=i(v),y=n(17),_=i(y),b=n(4),k=i(b),w=n(7),C=i(w),E=function(){function e(t){var n=this;o(this,e),this.options=l.default.extend({useDefaultHTMLSanitizer:!0,codeBlockLanguages:w.CodeBlockManager.getHighlightJSLanguages(),customConvertor:null},t),this.eventManager=new h.default,this.commandManager=new p.default(this),this.options.customConvertor?this.convertor=new this.options.customConvertor(this.eventManager):this.convertor=new _.default(this.eventManager),this.toMarkOptions=null,this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&u.default.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&u.default.forEach(this.options.events,function(e,t){n.on(t,e)}),this.preview=new d.default((0,l.default)(this.options.el),this.eventManager,this.convertor,!0),this.preview.$el.on("mousedown",l.default.proxy(this._toggleTask,this)),m.default.applyExtension(this,this.options.exts),this.setValue(this.options.initialValue),this.eventManager.emit("load",this)}return r(e,[{key:"_toggleTask",value:function(e){var t=e.offsetX<18&&e.offsetY>18;e.target.hasAttribute("data-te-task")&&!t&&((0,l.default)(e.target).toggleClass("checked"),this.eventManager.emit("change",{source:"viewer",data:e}))}},{key:"setMarkdown",value:function(e){this.markdownValue=e=e||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setMarkdownAfter",this.markdownValue)}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"remove",value:function(){this.eventManager.emit("removeEditor"),this.preview.$el.off("mousedown",l.default.proxy(this._toggleTask,this)),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"isViewer",value:function(){return!0}},{key:"isMarkdownMode",value:function(){return!1}},{key:"isWysiwygMode",value:function(){return!1}}],[{key:"defineExtension",value:function(e,t){m.default.defineExtension(e,t)}}]),e}();E.isViewer=!0,E.domUtils=k.default,E.codeBlockManager=C.default,E.markdownitHighlight=_.default.getMarkdownitHighlightRenderer(),E.markdownit=_.default.getMarkdownitRenderer(),E.i18n=null,E.Button=null,E.WwCodeBlockManager=null,E.WwTableManager=null,E.WwTableSelectionManager=null,e.exports=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FIND_MD_OL_RX=/^[ \t]*[\d]+\. .*/,t.FIND_MD_UL_RX=/^[ \t]*[-*] .*/,t.FIND_MD_TASK_RX=/^[ \t]*([*-] |[\d]+\. )(\[[ xX]] ).*/,t.FIND_MD_UL_TASK_RX=/^[ \t]*[*-] (\[[ xX]] ).*/},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l='<div class="tui-tooltip"><div class="arrow"></div><span class="text"></span></span></div>',s=function(){function e(){i(this,e),this.$el=(0,a.default)(l),this.$el.appendTo("body"),this.hide()}return o(e,[{key:"show",value:function(e,t){this.$el.css({top:e.offset().top+e.height()+13,left:e.offset().left+3}).find(".text").html(t).end().show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"remove",value:function(){this.$el.remove()}}]),e}();t.default=new s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(6),u=i(s);n(48),n(49),n(50),n(51),n(52),n(53);var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.editorContainerEl=t,this.cm=null,this._init(n)}return r(e,[{key:"_init",value:function(e){var t=document.createElement("textarea");this.editorContainerEl.appendChild(t),e=l.default.extend(!0,{lineWrapping:!0,theme:"default",extraKeys:{"Shift-Tab":"indentLess","Alt-Up":"replaceLineTextToUpper","Alt-Down":"replaceLineTextToLower"},indentUnit:4,cursorScrollMargin:12,specialCharPlaceholder:function(){return document.createElement("span")}},e),this.cm=u.default.fromTextArea(t,e)}},{key:"getCurrentRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{from:e,to:t,collapsed:e.line===t.line&&e.ch===t.ch}}},{key:"focus",value:function(){this.cm.focus()}},{key:"blur",value:function(){this.cm.getInputField().blur()}},{key:"remove",value:function(){this.cm.toTextArea()}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.cm.setValue(e),t&&this.moveCursorToEnd(),this.cm.refresh()}},{key:"getValue",value:function(){return this.cm.getValue("\n")}},{key:"getEditor",value:function(){return this.cm}},{key:"reset",value:function(){this.setValue("")}},{key:"getCaretPosition",value:function(){return this.cm.cursorCoords()}},{key:"addWidget",value:function(e,t,n,i){i&&(e.ch+=i),this.cm.addWidget(e.end,t,!0,n)}},{key:"replaceSelection",value:function(e,t){t&&this.cm.setSelection(t.from,t.to),this.cm.replaceSelection(e),this.focus()}},{key:"replaceRelativeOffset",value:function(e,t,n){var i=this.cm.getCursor(),o={from:{line:i.line,ch:i.ch+t},to:{line:i.line,ch:i.ch+t+n}};this.replaceSelection(e,o)}},{key:"setHeight",value:function(e){this.getWrapperElement().style.height=e+"px"}},{key:"setMinHeight",value:function(e){this.getWrapperElement().style.minHeight=e+"px"}},{key:"getWrapperElement",value:function(){return this.cm.getWrapperElement()}},{key:"getCursor",value:function(e){return this.cm.getCursor(e)}},{key:"moveCursorToEnd",value:function(){var e=this.getEditor().getDoc(),t=e.lastLine();e.setCursor(t,e.getLine(t).length)}},{key:"moveCursorToStart",value:function(){var e=this.getEditor().getDoc(),t=e.firstLine();e.setCursor(t,0)}},{key:"scrollTop",value:function(e){return e&&this.cm.scrollTo(0,e),this.cm.getScrollInfo().top}},{key:"getRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{start:{line:e.line,ch:e.ch},end:{line:t.line,ch:t.ch}}}},{key:"on",value:function(e,t){this.cm.on(e,t)}},{key:"off",value:function(e,t){this.cm.off(e,t)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this._managers={},this._editor=t}return o(e,[{key:"addManager",value:function(e,t){t||(t=e,e=null);var n=new t(this._editor);this._managers[e||n.name]=n}},{key:"getManager",value:function(e){return this._managers[e]}},{key:"removeManager",value:function(e){var t=this.getManager(e);t&&(t.destroy&&t.destroy(),delete this._managers[e])}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n="<"+t+"><br /></"+t+">",i="",o=0;o<e;o+=1)i+=n;return i}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),s=i(l),u=n(1),c=i(u),d=n(4),f=i(d),h=c.default.browser.msie&&10===c.default.browser.version,g=c.default.browser.msie&&(10===c.default.browser.version||11===c.default.browser.version),p=c.default.browser.msie?"":"<br>",v=function(){function e(t){o(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="table",this._lastCellNode=null,this._init()}return a(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.tableID=0}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter.table",function(){var t=e.wwe.getEditor().getSelection(),n=e.isInTable(t);if(e._unwrapBlockInTable(),e._completeTableIfNeed(),!n){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()}e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygSetValueAfter.table",function(){e._unwrapBlockInTable(),e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygProcessHTMLText.table",function(e){return e.replace(/<br \/>(<\/td>|<\/th>)/g,"$1")}),this.eventManager.listen("cut.table",function(){var t=e.wwe.componentManager.getManager("tableSelection"),n=t.getSelectedCells();n.length&&n.get().forEach(function(e){return(0,s.default)(e).html(p)}),t.removeClassAttrbuteFromAllCellsIfNeed()}),this.eventManager.listen("copyBefore.table",function(t){var n=t.$clipboardContainer;return e.updateTableHtmlOfClipboardIfNeed(n)}),this.onBindedPaste=this._onPaste.bind(this),this.wwe.getEditor().addEventListener("paste",this.onBindedPaste)}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this,n=this.wwe.componentManager.getManager("tableSelection");if(n.getSelectedCells().length){n.createRangeBySelectedCells();var i=this.wwe.getEditor().getSelection().cloneContents();(0,s.default)(i).children().each(function(e,n){var i=(0,s.default)(n);t.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===i.find("thead").length&&0===i.find("tbody").length?i.remove():n.previousSibling&&"TABLE"===n.previousSibling.nodeName?n.previousSibling.appendChild(n):(t._completeIncompleteTable(n),"TABLE"!==n.nodeName&&"THEAD"!==n.nodeName&&(0,s.default)(n).closest("table").find("thead").remove()))}),e.append(i),e.find(".te-cell-selected").removeClass("te-cell-selected")}}},{key:"pasteClipboardData",value:function(e){this.wwe.componentManager.getManager("tableSelection").getSelectedCells().length||(this._expandTableIfNeed(e),this._pasteDataIntoTable(e))}},{key:"_onPaste",value:function(e){var t=this.wwe.getEditor().getSelection(),n=!f.default.isTextNode(t.commonAncestorContainer);this.isInTable(t)&&!t.collapsed&&n&&e.preventDefault()}},{key:"_initKeyHandler",value:function(){var e=this;this.keyEventHandlers={DEFAULT:function(t,n,i){var o=e.isInTable(n);o&&!e._isSingleModifierKey(i)?(e._recordUndoStateIfNeed(n),e._removeBRIfNeed(n),e._removeContentsAndChangeSelectionIfNeed(n,i,t)):!o&&e._lastCellNode&&e._recordUndoStateAndResetCellNode(n),o&&!e._isModifierKeyPushed(t)&&e.wwe.getEditor().modifyDocument(function(){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()})},ENTER:function(t,n){var i=void 0;return e._isAfterTable(n)?(t.preventDefault(),n.setStart(n.startContainer,n.startOffset-1),e.wwe.breakToNewDefaultBlock(n),i=!1):e._isBeforeTable(n)?(t.preventDefault(),e.wwe.breakToNewDefaultBlock(n,"before"),i=!1):e.isInTable(n)&&(e._appendBrIfTdOrThNotHaveAsLastChild(n),i=!1),i},BACK_SPACE:function(t,n,i){return e._handleBackspaceAndDeleteKeyEvent(t,n,i)},DELETE:function(t,n,i){return e._handleBackspaceAndDeleteKeyEvent(t,n,i)},TAB:function(){return e._moveCursorTo("next","cell")},"SHIFT+TAB":function(t){return e._moveCursorTo("previous","cell",t)},UP:function(t){return e._moveCursorTo("previous","row",t)},DOWN:function(t){return e._moveCursorTo("next","row",t)}},c.default.forEach(this.keyEventHandlers,function(t,n){return e.wwe.addKeyEventHandler(n,t)})}},{key:"isInTable",value:function(e){var t=void 0,n=void 0;return e.collapsed?(t=e.startContainer,n=!!(0,s.default)(t).closest("[contenteditable=true] table").length):(t=e.commonAncestorContainer,n=!!(0,s.default)(t).closest("[contenteditable=true] table").length||!!(0,s.default)(e.cloneContents()).find("table").length),n}},{key:"_isBeforeTable",value:function(e){return"TABLE"===f.default.getNodeName(f.default.getChildNodeByOffset(e.startContainer,e.startOffset))}},{key:"_isAfterTable",value:function(e){var t=f.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset);return"TABLE"===f.default.getNodeName(t)&&e.commonAncestorContainer===this.wwe.get$Body()[0]}},{key:"_handleBackspaceAndDeleteKeyEvent",value:function(e,t,n){var i="BACK_SPACE"===n,o=this.wwe.componentManager.getManager("tableSelection"),r=o.getSelectedCells(),a=!0;if(t.collapsed){if(this.isInTable(t))i?this._tableHandlerOnBackspace(t,e):this._tableHandlerOnDelete(t,e),this._insertBRIfNeed(t),this._removeContentsAndChangeSelectionIfNeed(t,n,e),a=!1;else if(!i&&this._isBeforeTable(t)||i&&this._isAfterTable(t)){e.preventDefault();var l=i?t.startOffset-1:t.startOffset;this._removeTable(t,f.default.getChildNodeByOffset(t.startContainer,l)),a=!1}}else if(this.isInTable(t)&&r.length>0){var s=this._removeContentsAndChangeSelectionIfNeed(t,n,e);s&&(e.preventDefault(),a=!1)}return a}},{key:"_tableHandlerOnBackspace",value:function(e,t){var n=f.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset,"TR"),i=f.default.getNodeName(n);n&&"TD"!==i&&"TH"!==i?"BR"===i&&1!==n.parentNode.childNodes.length&&(t.preventDefault(),(0,s.default)(n).remove()):t.preventDefault()}},{key:"isNonTextDeleting",value:function(e){var t=e.startContainer,n=t.nextSibling,i=f.default.getNodeName(n),o=f.default.getNodeName(t),r=o===i&&"TEXT"!==o,a=(!n||"BR"===i&&n.parentNode.lastChild===n)&&f.default.isTextNode(t)&&e.startOffset===t.nodeValue.length,l=!a&&(0,s.default)(t).parents("tr").children().last()[0]===t&&("TD"===o||"TH"===o);return r||a||l}},{key:"_tableHandlerOnDelete",value:function(e,t){this.isNonTextDeleting(e)&&(t.preventDefault(),e.startContainer.normalize())}},{key:"_appendBrIfTdOrThNotHaveAsLastChild",value:function(e){var t=f.default.getNodeName(e.startContainer),n=void 0;if("TD"===t||"TH"===t)n=e.startContainer;else{var i=(0,s.default)(e.startContainer).parentsUntil("tr");n=i[i.length-1]}"BR"===f.default.getNodeName(n.lastChild)||"DIV"===f.default.getNodeName(n.lastChild)||g||(0,s.default)(n).append((0,s.default)("<br />")[0])}},{key:"_unwrapBlockInTable",value:function(){this.wwe.get$Body().find("td div,th div,tr>br,td>br,th>br").each(function(e,t){if("BR"===f.default.getNodeName(t)){var n=f.default.getNodeName(t.parentNode),i=/TD|TH/.test(n),o=0===t.parentNode.textContent.length,r=t.parentNode.lastChild===t;("TR"===n||i&&!o&&r)&&(0,s.default)(t).remove()}else(0,s.default)(t).children().unwrap()})}},{key:"_insertDefaultBlockBetweenTable",value:function(){this.wwe.get$Body().find("table").each(function(e,t){t.nextElementSibling&&"TABLE"===t.nextElementSibling.nodeName&&(0,s.default)("<div><br /></div>").insertAfter(t)})}},{key:"_removeTable",value:function(e,t){"TABLE"===t.tagName&&(this.wwe.getEditor().saveUndoState(e),this.wwe.saveSelection(e),(0,s.default)(t).remove(),this.wwe.restoreSavedSelection())}},{key:"_recordUndoStateIfNeed",value:function(e){var t=f.default.getParentUntil(e.startContainer,"TR");e.collapsed&&t&&this._lastCellNode!==t&&(this.wwe.getEditor().saveUndoState(e),this._lastCellNode=t)}},{key:"_recordUndoStateAndResetCellNode",value:function(e){this.wwe.getEditor().saveUndoState(e),this.resetLastCellNode()}},{key:"_pasteDataIntoTable",value:function(e){var t=this.wwe.getEditor().getSelection(),n=t.startContainer,i=this._getTableDataFromTable(e),o="TD"===n.tagName||"TH"===n.tagName,r=h?"":"<br />",a=void 0,l=void 0,u=void 0,c=void 0;for(o?a=n:(a=f.default.getParentUntilBy(n,function(e){return"TD"===e.tagName||"TH"===e.tagName},function(e){return 0===(0,s.default)(e).closest("table").length}),a=a?a.parentNode:null),a=a||(0,s.default)(n).find("th,td").get(0),l=a;i.length;){for(u=i.shift();l&&u.length;)c=u.shift(),c.length?l.textContent=c:l.innerHTML=r,l=f.default.getTableCellByDirection(l,"next");l=f.default.getSiblingRowCellByDirection(a,"next",!1),a=l}}},{key:"_getTableDataFromTable",value:function(e){var t=(0,s.default)(e),n=[];return t.find("tr").each(function(e,t){var i=[];(0,s.default)(t).children().each(function(e,t){i.push(t.textContent)}),i.length&&n.push(i)}),n}},{key:"_removeTableContents",value:function(e){this.wwe.getEditor().saveUndoState(),e.each(function(e,t){var n=h?"":"<br />";(0,s.default)(t).html(n)})}},{key:"wrapDanglingTableCellsIntoTrIfNeed",value:function(e){var t=e.children("td,th"),n=void 0;if(t.length){var i=(0,s.default)("<tr></tr>");t.each(function(e,t){i.append(t)}),n=i.get(0)}return n}},{key:"wrapTrsIntoTbodyIfNeed",value:function(e){var t=e.children("tr"),n=t.find("th"),i=void 0;if(n.length&&n.each(function(e,t){var n=(0,s.default)(t),i=(0,s.default)("<td></td>");i.html(n.html()),i.insertBefore(t),n.detach()}),t.length){var o=(0,s.default)("<tbody></tbody>");t.each(function(e,t){o.append(t)}),i=o.get(0)}return i}},{key:"wrapTheadAndTbodyIntoTableIfNeed",value:function(e){var t=e.children("thead"),n=e.children("tbody"),i=(0,s.default)("<table></table>"),o=void 0;return!n.length&&t.length?(i.append(t[0]),i.append("<tbody><tr></tr></tbody>"),o=i.get(0)):n.length&&!t.length?(i.append("<thead><tr></tr></thead>"),i.append(n[0]),o=i.get(0)):n.length&&t.length&&(i.append(t[0]),i.append(n[0]),o=i.get(0)),o}},{key:"isTableOrSubTableElement",value:function(e){return"TABLE"===e||"TBODY"===e||"THEAD"===e||"TR"===e||"TD"===e}},{key:"_stuffTableCellsIntoIncompleteRow",value:function(e,t){e.each(function(e,n){for(var i=(0,s.default)(n),o=i.find("th,td"),a=f.default.getNodeName(i.parent()[0]),l="THEAD"===a?"th":"td",u=o.length;u<t;u+=1)i.append((0,s.default)(r(1,l))[0])})}},{key:"prepareToTableCellStuffing",value:function(e){var t=e.eq(0).find("th,td").length,n=!1;return e.each(function(e,i){var o=(0,s.default)(i).find("th,td").length;t!==o&&(n=!0,t<o&&(t=o))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"_addTbodyOrTheadIfNeed",value:function(e){var t=!e.find("thead").length,n=!e.find("tbody").length,i=void 0;t?(i=(0,s.default)("<thead><tr></tr></thead>").get(0),e.prepend(i)):n&&(i=(0,s.default)("<tbody><tr></tr></tbody>").get(0),e.append(i))}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=(0,s.default)(e);this._addTbodyOrTheadIfNeed(t),this._addTrIntoContainerIfNeed(t);var n=t.find("tr"),i=this.prepareToTableCellStuffing(n),o=i.maximumCellLength;i.needTableCellStuffingAid&&this._stuffTableCellsIntoIncompleteRow(n,o)}},{key:"_generateTheadAndTbodyFromTbody",value:function(e){var t=(0,s.default)("<tr></tr>"),n=(0,s.default)("<thead></thead>");return t.append(r((0,s.default)(e).find("tr").eq(0).find("td").length,"th")),n.append(t),{thead:n[0],tbody:e}}},{key:"_generateTheadAndTbodyFromThead",value:function(e){var t=(0,s.default)("<tr></tr>"),n=(0,s.default)("<tbody></tbody>");return t.append(r((0,s.default)(e).find("th").length,"td")),n.append(t),{thead:e,tbody:n[0]}}},{key:"_generateTheadAndTbodyFromTr",value:function(e){var t=(0,s.default)(e),n=(0,s.default)("<thead></thead>"),i=(0,s.default)("<tbody></tbody>"),o=void 0,a=void 0;return"TH"===t.children()[0].tagName?(o=e,a=(0,s.default)("<tr>"+r(t.find("th").length,"td")+"</tr>").get(0)):(o=(0,s.default)("<tr>"+r(t.find("td").length,"th")+"</tr>").get(0),a=e),n.append(o),i.append(a),{thead:n[0],tbody:i[0]}}},{key:"_completeIncompleteTable",value:function(e,t){var n=e.tagName,i=void 0,o=void 0;t=!!c.default.isUndefined(t)||t,"TABLE"===n?i=e:(i=(0,s.default)("<table></table>"),i.insertAfter(e),"TBODY"===n?o=this._generateTheadAndTbodyFromTbody(e):"THEAD"===n?o=this._generateTheadAndTbodyFromThead(e):"TR"===n&&(o=this._generateTheadAndTbodyFromTr(e)),t&&i.append(o.thead),i.append(o.tbody)),this.tableCellAppendAidForTableElement(i)}},{key:"_completeTableIfNeed",value:function(){var e=this;this.wwe.getEditor().get$Body().children().each(function(t,n){var i=(0,s.default)(n);e.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===i.find("thead").length&&0===i.find("tbody").length&&i.remove(),e._completeIncompleteTable(n))})}},{key:"resetLastCellNode",value:function(){this._lastCellNode=null}},{key:"setLastCellNode",value:function(e){this._lastCellNode=e}},{key:"_isSingleModifierKey",value:function(e){return"META"===e||"SHIFT"===e||"ALT"===e||"CONTROL"===e}},{key:"_isModifierKeyPushed",value:function(e){return e.metaKey||e.ctrlKey||e.altKey||e.shiftKey}},{key:"_addTrIntoContainerIfNeed",value:function(e){e.children().each(function(e,t){0===(0,s.default)(t).find("tr").length&&(0,s.default)(t).append((0,s.default)("<tr></tr>")[0])})}},{key:"_expandTableIfNeed",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=(0,s.default)(t.startContainer).parents("table"),i=this._getColumnAndRowDifference(e,t);i.column<0&&this._appendCellForAllRow(n,i.column),i.row<0&&this._appendRow(n,i.row)}},{key:"_getColumnAndRowDifference",value:function(e,t){var n=this._getTableDataFromTable(e),i=n.length,o=n[0].length,r=(0,s.default)(t.startContainer).closest("th,td"),a=r.parent(),l=f.default.getNodeOffsetOfParent(r[0]),u=f.default.getNodeOffsetOfParent(r[0].parentNode),c=a.parents("table"),d=c.find("tr").eq(0).children().length,h=c.find("tr").length;return a.parents("tbody").length&&(u+=1),{row:h-(u+i),column:d-(l+o)}}},{key:"_appendCellForAllRow",value:function(e,t){var n=h?"":"<br />";e.find("tr").each(function(e,i){for(var o=void 0,r=t;r<0;r+=1)o=0===e?"th":"td",(0,s.default)(i).append((0,s.default)("<"+o+">"+n+"</"+o+">")[0])})}},{key:"_appendRow",value:function(e,t){var n=e.find("tr").last().clone(),i=h?"":"<br />";for(n.find("td").html(i);t<0;t+=1)e.find("tbody").append(n.clone()[0])}},{key:"_getSiblingTextNodeByDirection",value:function(e,t){var n=e.previousSibling&&"BR"===e.previousSibling.nodeName&&e.previousSibling.previousSibling&&3===e.previousSibling.previousSibling.nodeType,i=e.nextSibling&&"BR"===e.nextSibling.nodeName&&e.nextSibling.nextSibling&&3===e.nextSibling.nextSibling.nodeType,o=void 0;return t&&i?o=e.nextSibling.nextSibling:!t&&n&&(o=e.previousSibling.previousSibling),o}},{key:"_changeSelectionToTargetCell",value:function(e,t,n,i){var o=t.startContainer,r="next"===n,a="row"===i,l=void 0,u=void 0;if(a){if(f.default.isTextNode(o)&&(l=this._getSiblingTextNodeByDirection(o,r)))return u=l.length<t.startOffset?l.length:t.startOffset,t.setStart(l,u),void t.collapse(!0);l=f.default.getSiblingRowCellByDirection(e,n,!1)}else(l=f.default.getTableCellByDirection(e,n))||(l=f.default.getSiblingRowCellByDirection(e,n,!0));l?(t.setStart(l,0),t.collapse(!0)):(l=(0,s.default)(e).parents("table").get(0),r?t.setStart(l.nextElementSibling,0):l.previousElementSibling&&"TABLE"!==l.previousElementSibling.nodeName?t.setStart(l.previousElementSibling,1):t.setStartBefore(l),t.collapse(!0))}},{key:"_moveCursorTo",value:function(e,t,n){var i=this.wwe.getEditor(),o=i.getSelection().cloneRange(),r=(0,s.default)(o.startContainer).closest("td,th").get(0),a=void 0;return o.collapsed&&this.isInTable(o)&&r&&("previous"!==e&&"row"!==t||c.default.isUndefined(n)||n.preventDefault(),this._changeSelectionToTargetCell(r,o,e,t),i.setSelection(o),a=!1),a}},{key:"_removeContentsAndChangeSelectionIfNeed",value:function(e,t,n){var i=t.length<=1,o="BACK_SPACE"===t||"DELETE"===t,r=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),a=r.first().get(0),l=!1;return(i||o)&&!this._isModifierKeyPushed(n)&&r.length&&(o&&this._recordUndoStateIfNeed(e),this._removeTableContents(r),this._lastCellNode=a,e.setStart(a,0),e.collapse(!0),this.wwe.getEditor().setSelection(e),l=!0),l}},{key:"getTableIDClassName",value:function(){var e="te-content-table-"+this.tableID;return this.tableID+=1,e}},{key:"_removeBRIfNeed",value:function(e){var t=f.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer;/td|th/i.test(f.default.getNodeName(n))&&e.collapsed&&1===n.textContent.length&&(0,s.default)(n).find("br").remove()}},{key:"_insertBRIfNeed",value:function(e){var t=f.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer,i=f.default.getNodeName(n),o=(0,s.default)(n);!/td|th/i.test(i)||!e.collapsed||n.textContent.length||o.children().length||g||(n.normalize(),o.append("<br>"))}},{key:"destroy",value:function(){var e=this;this.eventManager.removeEventHandler("wysiwygRangeChangeAfter.table"),this.eventManager.removeEventHandler("wysiwygSetValueAfter.table"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.table"),this.eventManager.removeEventHandler("cut.table"),this.eventManager.removeEventHandler("copyBefore.table"),this.wwe.getEditor().removeEventListener("paste",this.onBindedPaste),c.default.forEach(this.keyEventHandlers,function(t,n){return e.wwe.removeKeyEventHandler(n,t)})}}]),e}();t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),d=i(c),f=function(){function e(t){o(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="tableSelection",this._init()}return r(e,[{key:"_init",value:function(){this._initEvent(),u.default.browser.firefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))}},{key:"_initEvent",value:function(){var e=this,t=void 0,n=void 0,i=void 0;this._tableSelectionTimer=null,this._removeSelectionTimer=null,this._isSelectionStarted=!1;var o=function(o){n=(0,l.default)(o.data.target).closest("[contenteditable=true] td,th").get(0);var r=e.wwe.getEditor().getSelection(),a=(0,l.default)(n).parents("[contenteditable=true] table").get(0),s=t===n,c=e._isTextSelect(r,s)&&!(0,l.default)(t).hasClass("te-cell-selected");e._isSelectionStarted&&a&&!c&&(window.getSelection().removeAllRanges(),u.default.browser.firefox&&!e._removeSelectionTimer&&(e._removeSelectionTimer=setInterval(function(){window.getSelection().removeAllRanges()},10)),e.highlightTableCellsBy(t,n),i=n)},r=function(){e._isSelectionStarted&&(e._isSelectionStarted=!1,e.eventManager.removeEventHandler("mouseover.tableSelection"),e.eventManager.removeEventHandler("mouseup.tableSelection"))},a=function(o){n=(0,l.default)(o.data.target).closest("[contenteditable=true] td,th").get(0);var a=e.wwe.getEditor().getSelection(),s=t===n,c=e._isTextSelect(a,s)&&!(0,l.default)(t).hasClass("te-cell-selected");e._clearTableSelectionTimerIfNeed(),e._isSelectionStarted&&(c?e.removeClassAttrbuteFromAllCellsIfNeed():(e.wwe.componentManager.getManager("table").resetLastCellNode(),n=n||i,a=e.wwe.getEditor().getSelection(),a.setStart(n,0),u.default.browser.msie?a.setEnd(n,1):(a.setEnd(n,0),a.collapse(!1)),e.wwe.getEditor().setSelection(a)),e.onDragEnd&&e.onDragEnd()),r()},s=function(i){t=(0,l.default)(i.data.target).closest("[contenteditable=true] td,th").get(0);var s=(0,l.default)(t).hasClass("te-cell-selected");n=null,!s||s&&2!==i.data.button?(e.removeClassAttrbuteFromAllCellsIfNeed(),e.setTableSelectionTimerIfNeed(t),e.eventManager.listen("mouseover.tableSelection",o),e.eventManager.listen("mouseup.tableSelection",a),e.onDragStart&&t&&e.onDragStart(t)):2===i.data.button&&r()};this.eventManager.listen("mousedown.tableSelection",s),this.eventManager.listen("copyBefore.tableSelection",r),this.eventManager.listen("pasteBefore.tableSelection",r)}},{key:"_isTextSelect",value:function(e,t){return/TD|TH|TEXT/i.test(e.commonAncestorContainer.nodeName)&&t}},{key:"setTableSelectionTimerIfNeed",value:function(e){(0,l.default)(e).parents("[contenteditable=true] table").length&&(this._isSelectionStarted=!0)}},{key:"_clearTableSelectionTimerIfNeed",value:function(){clearTimeout(this._tableSelectionTimer),u.default.browser.firefox&&this._removeSelectionTimer&&(clearTimeout(this._removeSelectionTimer),this._removeSelectionTimer=null)}},{key:"_reArrangeSelectionIfneed",value:function(e,t){var n=(0,l.default)(e).parents("[contenteditable=true] table").length,i=(0,l.default)(t).parents("[contenteditable=true] table").length,o=i&&!n,r=!i&&n;return o?e=(0,l.default)(t).parents("[contenteditable=true] table").find("th").first().get(0):r&&(t=(0,l.default)(e).parents("[contenteditable=true] table").find("td").last().get(0)),{startContainer:e,endContainer:t}}},{key:"_applySelectionDirection",value:function(e,t){var n=d.default.getNodeOffsetOfParent,i=e.startContainer,o=e.endContainer,r=n((0,l.default)(i).closest("[contenteditable=true] tr")[0])-n((0,l.default)(o).closest("[contenteditable=true] tr")[0]),a=n(i)-n(o),s=0===r,u=r<0,c=a>0;return s?c?(t.setStart(o,0),t.setEnd(i,1)):(t.setStart(i,0),t.setEnd(o,1)):u?(t.setStart(i,0),t.setEnd(o,1)):(t.setStart(o,0),t.setEnd(i,1)),t}},{key:"getSelectionRangeFromTable",value:function(e,t){var n=d.default.getNodeOffsetOfParent,i=n(e.parentNode),o=n(t.parentNode),r=n(e),a=n(t),s=d.default.getParentUntil(e,"TABLE"),u=d.default.getParentUntil(t,"TABLE"),c="TBODY"===d.default.getNodeName(s)&&"THEAD"===d.default.getNodeName(u),f=s!==u,h=!!(0,l.default)(e).parents("tbody").length&&!!(0,l.default)(t).parents("tbody").length,g={row:i,cell:r},p={row:o,cell:a},v=void 0,m=void 0;return c?g.row+=1:f?p.row+=1:h&&(g.row+=1,p.row+=1),i>o||i===o&&r>a?(v=p,m=g):(v=g,m=p),{from:v,to:m}}},{key:"highlightTableCellsBy",value:function(e,t){var n=(0,l.default)(e).parents("[contenteditable=true] table").find("tr"),i=this.getSelectionRangeFromTable(e,t),o=i.from.row,r=i.from.cell,a=i.to.row,s=i.to.cell;n.each(function(e,t){(0,l.default)(t).find("td,th").each(function(t,n){var i=(0,l.default)(n),u=e===o,c=e===a;u&&t<r||c&&t>s||e<o||e>a?i.removeClass("te-cell-selected"):i.addClass("te-cell-selected")})})}},{key:"removeClassAttrbuteFromAllCellsIfNeed",value:function(){this.wwe.get$Body().find("td.te-cell-selected,th.te-cell-selected").each(function(e,t){var n=(0,l.default)(t);n.removeClass("te-cell-selected"),n.attr("class").length||n.removeAttr("class")})}},{key:"getSelectedCells",value:function(){return this.wwe.get$Body().find(".te-cell-selected")}},{key:"createRangeBySelectedCells",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=this.getSelectedCells(),i=this.wwe.componentManager.getManager("table"),o=n.first().get(0),r=n.last().get(0);n.length&&i.isInTable(t)&&(t.setStart(o,0),t.setEnd(r,r.childNodes.length),e.setSelection(t))}},{key:"styleToSelectedCells",value:function(e,t){this.createRangeBySelectedCells(),e(this.wwe.getEditor(),t)}},{key:"destroy",value:function(){this.eventManager.removeEventHandler("mousedown.tableSelection"),this.eventManager.removeEventHandler("mouseover.tableSelection"),this.eventManager.removeEventHandler("mouseup.tableSelection"),this.eventManager.removeEventHandler("copyBefore.tableSelection"),this.eventManager.removeEventHandler("pasteBefore.tableSelection")}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e?e.replace(/[<>&]/g,function(e){return h[e]||e}):""}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),s=i(l),u=n(1),c=i(u),d=n(4),f=i(d),h={"&":"&amp;","<":"&lt;",">":"&gt;"},g=/\u200B/g,p=function(){function e(t){o(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="codeblock",this._init()}return a(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initKeyHandler",value:function(){this._onKeyEventHandler=this._onBackspaceKeyEventHandler.bind(this),this.wwe.addKeyEventHandler("BACK_SPACE",this._onKeyEventHandler)}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter.codeblock",function(){e.modifyCodeBlockForWysiwyg()}),this.eventManager.listen("wysiwygProcessHTMLText.codeblock",function(t){return e._changePreToPreCode(t)})}},{key:"prepareToPasteOnCodeblock",value:function(e){var t=this.wwe.getEditor().getDocument().createDocumentFragment(),n=this.convertNodesToText(e);return n=n.replace(/\n$/,""),t.appendChild(document.createTextNode(n)),t}},{key:"convertNodesToText",value:function(e){for(var t="",n=e.shift();c.default.isTruthy(n);){if(n.childNodes&&f.default.isBlockNode(n))t+=this.convertNodesToText(c.default.toArray(n.childNodes));else if("BR"===n.nodeName)t+="\n";else{var i=n,o=i.textContent;t+=r(o)}n=e.shift()}return t}},{key:"_copyCodeblockTypeFromRangeCodeblock",value:function(e,t){var n=f.default.getParentUntil(t.commonAncestorContainer,this.wwe.get$Body()[0]);if("PRE"===f.default.getNodeName(n)){var i=(0,s.default)(n).prop("attributes");c.default.forEach(i,function(t){(0,s.default)(e).attr(t.name,t.value)})}return e}},{key:"_changePreToPreCode",value:function(e){return e.replace(/<pre( .*?)?>((.|\n)*?)<\/pre>/g,function(e,t,n){return"<pre><code"+(t||"")+">"+n+"</code></pre>"})}},{key:"modifyCodeBlockForWysiwyg",value:function(e){e||(e=this.wwe.get$Body()),(0,s.default)(e).find("pre").each(function(e,t){var n=(0,s.default)(t),i=n.find("code").attr("data-language"),o=n.find("code").attr("data-backticks");n.children().length>1&&n.children().each(function(e,t){"DIV"!==t.nodeName&&"P"!==t.nodeName||(0,s.default)(t).find("br").length||(0,s.default)(t).append("\n")}),n.find("br").replaceWith("\n");var r=n.text().replace(/\s+$/,"");n.empty(),n.html(r||"<br>"),i&&(n.attr("data-language",i),n.addClass("lang-"+i)),o&&n.attr("data-backticks",o),n.attr("data-te-codeblock","")})}},{key:"_onBackspaceKeyEventHandler",value:function(e,t){var n=!0,i=this.wwe.getEditor(),o=t.commonAncestorContainer;if(this._isCodeBlockFirstLine(t)&&!this._isFrontCodeblock(t))this._removeCodeblockFirstLine(o),t.collapse(!0),n=!1;else if(t.collapsed&&this._isEmptyLine(o)&&this._isBetweenSameCodeblocks(o)){var r=o.previousSibling,a=o.nextSibling,l=r.textContent.length;i.saveUndoState(t),o.parentNode.removeChild(o),this._mergeCodeblocks(r,a),t.setStart(r.childNodes[0],l),t.collapse(!0),n=!1}return n||(i.setSelection(t),e.preventDefault()),n}},{key:"_isEmptyLine",value:function(e){var t=e.nodeName,n=e.childNodes;return"DIV"===t&&1===n.length&&"BR"===n[0].nodeName}},{key:"_isBetweenSameCodeblocks",value:function(e){var t=e.previousSibling,n=e.nextSibling;return"PRE"===f.default.getNodeName(t)&&"PRE"===f.default.getNodeName(n)&&t.getAttribute("data-language")===n.getAttribute("data-language")}},{key:"_mergeCodeblocks",value:function(e,t){var n=t.textContent;e.childNodes[0].textContent+="\n"+n,t.parentNode.removeChild(t)}},{key:"_isCodeBlockFirstLine",value:function(e){return this.isInCodeBlock(e)&&e.collapsed&&0===e.startOffset}},{key:"_isFrontCodeblock",value:function(e){var t=f.default.getParentUntil(e.startContainer,this.wwe.getEditor().getRoot()),n=t.previousSibling;return n&&"PRE"===n.nodeName}},{key:"_removeCodeblockFirstLine",value:function(e){var t=this.wwe.getEditor(),n="PRE"===e.nodeName?e:e.parentNode,i=n.textContent.replace(g,"");t.modifyBlocks(function(){var e=t.getDocument().createDocumentFragment(),o=i.split("\n"),r=document.createElement("div"),a=o.shift();if(r.innerHTML=a+"<br>",e.appendChild(r),o.length){var l=n.cloneNode();l.textContent=o.join("\n"),e.appendChild(l)}return e})}},{key:"isInCodeBlock",value:function(e){var t=void 0;return t=e.collapsed?e.startContainer:e.commonAncestorContainer,!!(0,s.default)(t).closest("pre").length}},{key:"destroy",value:function(){this.eventManager.removeEventHandler("wysiwygSetValueAfter.codeblock"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.codeblock"),this.wwe.removeKeyEventHandler("BACK_SPACE",this._onKeyEventHandler)}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(1),f=i(d),h=n(8),g=i(h),p=n(18),v=i(p),m=n(10),y=i(m),_=n(42),b=i(_),k=n(43),w=i(k),C=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"tui-editor-defaultUI-toolbar"}));return Object.defineProperty(i,"_items",{enumerable:!0,writable:!0,value:[]}),i._eventManager=e,i.setItems(n),i._initEvent(e),i}return a(t,e),l(t,[{key:"_initEvent",value:function(e){var t=this;e.listen("stateChange",function(e){t._items.forEach(function(t){t._state&&(e[t._state]?t.$el.addClass("active"):t.$el.removeClass("active"))})}),e.listen("changePreviewTabPreview",function(){return t.disableAllButton()}),e.listen("changePreviewTabWrite",function(){return t.enableAllButton()}),e.listen("changeMode",function(){return t.enableAllButton()})}},{key:"disableAllButton",value:function(){this._items.forEach(function(e){e instanceof v.default&&e.disable()})}},{key:"enableAllButton",value:function(){this._items.forEach(function(e){e instanceof v.default&&e.enable()})}},{key:"getItems",value:function(){return this._items.slice(0)}},{key:"getItem",value:function(e){return this._items[e]}},{key:"setItems",value:function(e){this.removeAllItems(),e.forEach(this.addItem.bind(this))}},{key:"addItem",value:function(e){this.insertItem(this._items.length,e)}},{key:"insertItem",value:function(e,t){var n=this;f.default.isString(t)?t=w.default.create(t):f.default.isString(t.type)&&(t=w.default.create(t.type,t.options));var i=this.$el.children();e>=0&&e<i.length?(t.$el.insertBefore(i.eq(e)),this._items.splice(e,0,t)):(t.$el.appendTo(this.$el),this._items.push(t)),t.onCommandHandler=function(e,t){return n._eventManager.emit("command",t)},t.onEventHandler=function(e,t){return n._eventManager.emit(t)},t.on("command",t.onCommandHandler),t.on("event",t.onEventHandler)}},{key:"indexOfItem",value:function(e){var t=void 0;if(e instanceof y.default)t=this._items.indexOf(e);else if(f.default.isString(e)){var n=e;t=this._items.map(function(e){return e.getName()}).indexOf(n)}return t}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,i=void 0;return n=e instanceof y.default?this.indexOfItem(e):e,n>=0&&(i=this._items.splice(n,1)[0]),i&&(t?i.destroy():(i.off("command",i.onCommandHandler),i.off("event",i.onEventHandler),i.$el.detach())),i}},{key:"removeAllItems",value:function(){for(;this._items&&this._items.length>0;)this.removeItem(0)}},{key:"destroy",value:function(){this.removeAllItems(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addButton",value:function(e,t){if(f.default.isArray(e))for(var n=e.length-1;n>=0;n-=1)f.default.isNumber(t)?this._addButton(e[n],t):this._addButton(e);else this._addButton(e,t)}},{key:"_addButton",value:function(e,t){var n=this._setButton(e,t).$el;f.default.isNumber(t)?this.$el.find("."+v.default.className).eq(t-1).before(n):this.$el.append(n)}},{key:"addDivider",value:function(){var e=(0,c.default)('<div class="'+b.default.className+'"></div>');return this.$el.append(e),e}},{key:"_setButton",value:function(e,t){var n=this._eventManager;return e instanceof v.default||(e=new v.default(e)),e.on("command",function(e,t){return n.emit("command",t)}),e.on("event",function(e,t){return n.emit(t)}),f.default.isNumber(t)?this._items.splice(t,0,e):this._items.push(e),e}}]),t}(g.default);t.default=C},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:t.name,tagName:"div",className:t.className}))}return r(t,e),t}(l.default);Object.defineProperty(s,"name",{enumerable:!0,writable:!0,value:"divider"}),Object.defineProperty(s,"className",{enumerable:!0,writable:!0,value:"tui-toolbar-divider"}),t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(10),l=i(a),s=n(74),u=i(s),c=n(42),d=i(c),f=n(3),h=i(f),g=function(){function e(){o(this,e)}return r(e,null,[{key:"create",value:function(e,t){var n=void 0;switch(e){case"heading":n=new u.default({name:"heading",className:"tui-heading",event:"openHeadingSelect",tooltip:h.default.get("Headings")});break;case"bold":n=new u.default({name:"bold",className:"tui-bold",command:"Bold",tooltip:h.default.get("Bold"),state:"bold"});break;case"italic":n=new u.default({name:"italic",className:"tui-italic",command:"Italic",tooltip:h.default.get("Italic"),state:"italic"});break;case"strike":n=new u.default({name:"strike",className:"tui-strike",command:"Strike",tooltip:h.default.get("Strike"),state:"strike"});break;case"hr":n=new u.default({name:"hr",className:"tui-hrline",command:"HR",tooltip:h.default.get("Line")});break;case"quote":n=new u.default({name:"quote",className:"tui-quote",command:"Blockquote",tooltip:h.default.get("Blockquote"),state:"quote"});break;case"ul":n=new u.default({name:"ul",className:"tui-ul",command:"UL",tooltip:h.default.get("Unordered list")});break;case"ol":n=new u.default({name:"ol",className:"tui-ol",command:"OL",tooltip:h.default.get("Ordered list")});break;case"task":n=new u.default({name:"task",className:"tui-task",command:"Task",tooltip:h.default.get("Task")});break;case"table":n=new u.default({name:"table",className:"tui-table",event:"openPopupAddTable",tooltip:h.default.get("Insert table")});break;case"image":n=new u.default({name:"image",className:"tui-image",event:"openPopupAddImage",tooltip:h.default.get("Insert image"),state:""});break;case"link":n=new u.default({name:"link",className:"tui-link",event:"openPopupAddLink",tooltip:h.default.get("Insert link")});break;case"code":n=new u.default({name:"code",className:"tui-code",command:"Code",tooltip:h.default.get("Code"),state:"code"});break;case"codeblock":n=new u.default({name:"codeblock",className:"tui-codeblock",command:"CodeBlock",tooltip:h.default.get("Insert CodeBlock"),state:"codeBlock"});break;case"indent":n=new u.default({name:"indent",className:"tui-indent",command:"Indent",tooltip:h.default.get("Indent")});break;case"outdent":n=new u.default({name:"outdent",className:"tui-outdent",command:"Outdent",tooltip:h.default.get("Outdent")});break;case"divider":n=new d.default;break;case"button":n=new u.default(t);break;case"item":default:n=new l.default(t)}return n}}]),e}();t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),c=n(8),d=i(c),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"te-tab"}));return n.sections=e.sections,n._$activeButton=null,n._render(e),n._initEvent(e),n}return a(t,e),l(t,[{key:"_initEvent",value:function(e){var t=e.onItemClick;t&&this.on("itemClick",t),this.on("click button",this._onTabButton.bind(this))}},{key:"_render",value:function(e){for(var t=e.items,n=e.initName,i=[],o=0,r=t.length;o<r;o+=1)i.push('<button type="button" data-index="'+o+'">'+t[o]+"</button>");this.$el.html(i.join("")),this.activate(n)}},{key:"activate",value:function(e){var t=this.$el.find('button:contains("'+e+'")');this._activateTabByButton(t)}},{key:"_onTabButton",value:function(e){var t=(0,u.default)(e.target);this._activateTabByButton(t),this.trigger("itemClick",t.text())}},{key:"_activateTabByButton",value:function(e){this._isActivatedButton(e)||this._updateClassByButton(e)}},{key:"_updateClassByButton",value:function(e){if(this._$activeButton){var t=this._$activeButton.attr("data-index");this._$activeButton.removeClass("te-tab-active"),this.sections&&this.sections[t].removeClass("te-tab-active")}e.addClass("te-tab-active"),this._$activeButton=e;var n=e.attr("data-index");this.sections&&this.sections[n].addClass("te-tab-active")}},{key:"_isActivatedButton",value:function(e){return this._$activeButton&&this._$activeButton.text()===e.text()}}]),t}(d.default);t.default=f},function(e,t,n){"use strict";var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=n(46);o.default.fn.tuiEditor=function(){var e=void 0,t=void 0,n=this.get(0);if(n){for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];if(e=a[0]||{},t=o.default.data(n,"tuiEditor")){if("string"==typeof e){var s;return(s=t)[e].apply(s,a.slice(1))}}else e.el=n,t=r.factory(e),o.default.data(n,"tuiEditor",t)}return this},e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(18),d=i(c),f=n(47),h=i(f),g=n(11),p=i(g),v=n(56),m=i(v),y=n(69),_=i(y),b=n(15),k=i(b),w=n(2),C=i(w),E=n(16),S=i(E),T=n(9),M=i(T),O=n(40),N=i(O),L=n(17),A=i(L),x=n(33),B=i(x),P=n(3),I=i(P),R=n(70),D=i(R),j=n(4),H=i(j),F=n(38),$=i(F),U=n(39),W=i(U),q=n(7),K=i(q),V=n(88),z=i(V),Y=n(89),G=i(Y),X=n(90),Z=i(X),Q=n(91),J=i(Q),ee=n(92),te=i(ee),ne=n(93),ie=i(ne),oe=n(94),re=i(oe),ae=n(95),le=i(ae),se=n(96),ue=i(se),ce=n(97),de=i(ce),fe=n(98),he=i(fe),ge=n(99),pe=i(ge),ve=n(100),me=i(ve),ye=n(101),_e=i(ye),be=n(102),ke=i(be),we=n(103),Ce=i(we),Ee=n(104),Se=i(Ee),Te=n(105),Me=i(Te),Oe=n(106),Ne=i(Oe),Le=n(107),Ae=i(Le),xe=n(108),Be=i(xe),Pe=n(109),Ie=i(Pe),Re=n(110),De=i(Re),je=n(111),He=i(je),Fe=n(112),$e=i(Fe),Ue=n(113),We=i(Ue),qe=n(114),Ke=i(qe),Ve=n(115),ze=i(Ve),Ye=n(116),Ge=i(Ye),Xe=n(117),Ze=i(Xe),Qe=n(118),Je=i(Qe),et=n(119),tt=i(et),nt=n(120),it=i(nt),ot=n(121),rt=i(ot),at=n(122),lt=i(at),st=n(123),ut=i(st),ct=n(124),dt=i(ct),ft=n(125),ht=i(ft),gt=n(126),pt=i(gt),vt=n(127),mt=i(vt);n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142);var yt=[],_t="UA-129966929-1",bt=function(){function e(t){var n=this;o(this,e),this.initialHtml=t.el.innerHTML,t.el.innerHTML="",this.options=l.default.extend({previewStyle:"tab",initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en_US",useDefaultHTMLSanitizer:!0,useCommandShortcut:!0,codeBlockLanguages:q.CodeBlockManager.getHighlightJSLanguages(),usageStatistics:!0,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"],hideModeSwitch:!1,customConvertor:null},t),this.eventManager=new k.default,this.importManager=new M.default(this.eventManager),this.commandManager=new C.default(this,{useCommandShortcut:this.options.useCommandShortcut}),this.options.customConvertor?this.convertor=new this.options.customConvertor(this.eventManager):this.convertor=new A.default(this.eventManager),this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&u.default.forEach(this.options.hooks,function(e,t){return n.addHook(t,e)}),this.options.events&&u.default.forEach(this.options.events,function(e,t){return n.on(t,e)}),this.layout=new _.default(t,this.eventManager),this.i18n=I.default,this.i18n.setCode(this.options.language),this.setUI(this.options.UI||new D.default(this)),this.mdEditor=h.default.factory(this.layout.getMdEditorContainerEl(),this.eventManager),this.preview=new p.default(this.layout.getPreviewEl(),this.eventManager,this.convertor),this.wwEditor=m.default.factory(this.layout.getWwEditorContainerEl(),this.eventManager),this.toMarkOptions=null,this.changePreviewStyle(this.options.previewStyle),this.changeMode(this.options.initialEditType,!0),this.minHeight(this.options.minHeight),this.height(this.options.height),this.setValue(this.options.initialValue,!1),this.options.initialValue||this.setHtml(this.initialHtml,!1),S.default.applyExtension(this,this.options.exts),this.eventManager.emit("load",this),yt.push(this),this._addDefaultCommands(),this.options.usageStatistics&&u.default.sendHostname("editor",_t)}return r(e,[{key:"changePreviewStyle",value:function(e){this.layout.changePreviewStyle(e),this.mdPreviewStyle=e,this.eventManager.emit("changePreviewStyle",e),this.eventManager.emit("previewNeedsRefresh")}},{key:"exec",value:function(){var e;(e=this.commandManager).exec.apply(e,arguments)}},{key:"_addDefaultCommands",value:function(){this.addCommand(z.default),this.addCommand(G.default),this.addCommand(J.default),this.addCommand(te.default),this.addCommand(ie.default),this.addCommand(re.default),this.addCommand(le.default),this.addCommand(ue.default),this.addCommand(de.default),this.addCommand(he.default),this.addCommand(pe.default),this.addCommand(me.default),this.addCommand(_e.default),this.addCommand(ke.default),this.addCommand(Ce.default),this.addCommand(Se.default),this.addCommand(Z.default),this.addCommand(Me.default),this.addCommand(Ne.default),this.addCommand(Be.default),this.addCommand(Ke.default),this.addCommand(ze.default),this.addCommand(Ie.default),this.addCommand(De.default),this.addCommand(He.default),this.addCommand($e.default),this.addCommand(We.default),this.addCommand(ut.default),this.addCommand(dt.default),this.addCommand(ht.default),this.addCommand(Ge.default),this.addCommand(Ze.default),this.addCommand(Je.default),this.addCommand(tt.default),this.addCommand(it.default),this.addCommand(rt.default),this.addCommand(lt.default),this.addCommand(pt.default),this.addCommand(mt.default),this.addCommand(Ae.default)}},{key:"addCommand",value:function(e,t){t?this.commandManager.addCommand(C.default.command(e,t)):this.commandManager.addCommand(e)}},{key:"afterAddedCommand",value:function(){this.eventManager.emit("afterAddedCommand",this)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"removeHook",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"getCodeMirror",value:function(){return this.mdEditor.getEditor()}},{key:"getSquire",value:function(){return this.wwEditor.getEditor()}},{key:"focus",value:function(){this.getCurrentModeEditor().focus()}},{key:"blur",value:function(){this.getCurrentModeEditor().blur()}},{key:"moveCursorToEnd",value:function(){this.getCurrentModeEditor().moveCursorToEnd()}},{key:"moveCursorToStart",value:function(){this.getCurrentModeEditor().moveCursorToStart()}},{key:"setMarkdown",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e||"",this.isMarkdownMode()?this.mdEditor.setValue(e,t):this.wwEditor.setValue(this.convertor.toHTML(e),t),this.eventManager.emit("setMarkdownAfter",e)}},{key:"setHtml",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=e||"",this.wwEditor.setValue(e,t),this.isMarkdownMode()){var n=this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions);this.mdEditor.setValue(n,t),this.eventManager.emit("setMarkdownAfter",n)}}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setMarkdown(e,t)}},{key:"getMarkdown",value:function(){return this.isMarkdownMode()?this.mdEditor.getValue():this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)}},{key:"getHtml",value:function(){return this.isWysiwygMode()&&this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)),this.convertor.toHTML(this.mdEditor.getValue())}},{key:"getValue",value:function(){return this.getMarkdown()}},{key:"insertText",value:function(e){this.isMarkdownMode()?this.mdEditor.replaceSelection(e):this.wwEditor.insertText(e)}},{key:"addWidget",value:function(e,t,n,i){this.getCurrentModeEditor().addWidget(e,t,n,i)}},{key:"height",value:function(e){return u.default.isExisty(e)&&("auto"===e?((0,l.default)(this.options.el).addClass("auto-height"),this.minHeight(this.minHeight())):((0,l.default)(this.options.el).removeClass("auto-height"),this.minHeight(e)),u.default.isNumber(e)&&(e+="px"),this.options.el.style.height=e,this._height=e),this._height}},{key:"minHeight",value:function(e){if(u.default.isExisty(e)){var t=this._ui.getEditorHeight(),n=this._ui.getEditorSectionHeight(),i=t-n;this._minHeight=e,e=parseInt(e,10),e=Math.max(e-i,0),this.wwEditor.setMinHeight(e),this.mdEditor.setMinHeight(e),this.preview.setMinHeight(e)}return this._minHeight}},{key:"getCurrentModeEditor",value:function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor}},{key:"isMarkdownMode",value:function(){return"markdown"===this.currentMode}},{key:"isWysiwygMode",value:function(){return"wysiwyg"===this.currentMode}},{key:"isViewer",value:function(){return!1}},{key:"getCurrentPreviewStyle",value:function(){return this.mdPreviewStyle}},{key:"changeMode",value:function(e,t){this.currentMode!==e&&(this.eventManager.emit("changeModeBefore",this.currentMode),this.currentMode=e,this.isWysiwygMode()?(this.layout.switchToWYSIWYG(),this.wwEditor.setValue(this.convertor.toHTML(this.mdEditor.getValue()),!t),this.eventManager.emit("changeModeToWysiwyg")):(this.layout.switchToMarkdown(),this.mdEditor.resetState(),this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions),!t),this.getCodeMirror().refresh(),this.eventManager.emit("changeModeToMarkdown")),this.eventManager.emit("changeMode",e),t||this.focus())}},{key:"remove",value:function(){var e=this,t=yt.length-1;for(this.wwEditor.remove(),this.mdEditor.remove(),this.layout.remove(),this.getUI()&&this.getUI().remove(),this.eventManager.emit("removeEditor"),this.eventManager.events.forEach(function(t,n){e.off(n)}),this.eventManager=null;t>=0;t-=1)yt[t]===this&&yt.splice(t,1)}},{key:"hide",value:function(){this.eventManager.emit("hide",this)}},{key:"show",value:function(){this.eventManager.emit("show",this),this.getCodeMirror().refresh()}},{key:"scrollTop",value:function(e){return this.getCurrentModeEditor().scrollTop(e)}},{key:"setUI",value:function(e){this._ui=e}},{key:"getUI",value:function(){return this._ui}},{key:"reset",value:function(){this.wwEditor.reset(),this.mdEditor.reset()}},{key:"getRange",value:function(){return this.getCurrentModeEditor().getRange()}},{key:"getTextObject",value:function(e){return this.getCurrentModeEditor().getTextObject(e)}},{key:"getSelectedText",value:function(){var e=this.getRange();return this.getTextObject(e).getTextContent()||""}}],[{key:"getInstances",value:function(){return yt}},{key:"defineExtension",value:function(e,t){S.default.defineExtension(e,t)}},{key:"factory",value:function(t){return t.viewer?new B.default(t):new e(t)}}]),e}();bt.isViewer=!1,bt.i18n=I.default,bt.domUtils=H.default,bt.codeBlockManager=K.default,bt.Button=d.default,bt.WwCodeBlockManager=N.default,bt.WwTableManager=$.default,bt.WwTableSelectionManager=W.default,bt.CommandManager=C.default,bt.markdownitHighlight=A.default.getMarkdownitHighlightRenderer(),bt.markdownit=A.default.getMarkdownitRenderer(),e.exports=bt},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(1),c=i(u),d=n(36),f=i(d),h=n(19),g=i(h),p=n(54),v=i(p),m=n(37),y=i(m),_=n(55),b=i(_),k=g.default.getSharedInstance(),w=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.get(0),{mode:"gfm",dragDrop:!0,allowDropFileTypes:["image"],extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:"indentOrderedList","Shift-Tab":"indentLessOrderedList"}}));return i.eventManager=n,i.componentManager=new y.default(i),i.componentManager.addManager(v.default),i._latestState=null,i._initEvent(),i}return a(t,e),l(t,[{key:"_initEvent",value:function(){var e=this;this.cm.getWrapperElement().addEventListener("click",function(){e.eventManager.emit("click",{source:"markdown"})}),this.cm.on("beforeChange",function(t,n){"paste"===n.origin&&e.eventManager.emit("pasteBefore",{source:"markdown",data:n})}),this.cm.on("change",function(t,n){e._emitMarkdownEditorContentChangedEvent(),e._emitMarkdownEditorChangeEvent(n)}),this.cm.on("focus",function(){e.eventManager.emit("focus",{source:"markdown"}),e.getEditor().refresh()}),this.cm.on("blur",function(){e.eventManager.emit("blur",{source:"markdown"})}),this.cm.on("scroll",function(t,n){e.eventManager.emit("scroll",{source:"markdown",data:n})}),this.cm.on("keydown",function(t,n){e.eventManager.emit("keydown",{source:"markdown",data:n}),e.eventManager.emit("keyMap",{source:"markdown",keyMap:k.convert(n),data:n})}),this.cm.on("keyup",function(t,n){e.eventManager.emit("keyup",{source:"markdown",data:n})}),this.cm.on("copy",function(t,n){e.eventManager.emit("copy",{source:"markdown",data:n})}),this.cm.on("cut",function(t,n){e.eventManager.emit("cut",{source:"markdown",data:n})}),this.cm.on("paste",function(t,n){e.eventManager.emit("paste",{source:"markdown",data:n})}),this.cm.on("drop",function(t,n){n.preventDefault(),e.eventManager.emit("drop",{source:"markdown",data:n})}),this.cm.on("cursorActivity",function(){var t=e.cm.getTokenAt(e.cm.getCursor()),n=t.state.base,i={bold:!!n.strong,italic:!!n.em,strike:!!n.strikethrough,code:n.code>0,codeBlock:-1===n.code,quote:!!n.quote,list:!!n.list,task:!!n.taskList,source:"markdown"};e._latestState&&!e._isStateChanged(e._latestState,i)||(e.eventManager.emit("stateChange",i),e._latestState=i)})}},{key:"setValue",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e,n),this._emitMarkdownEditorContentChangedEvent()}},{key:"getTextObject",value:function(e){return new b.default(this,e)}},{key:"_emitMarkdownEditorContentChangedEvent",value:function(){this.eventManager.emit("contentChangedFromMarkdown",this)}},{key:"_emitMarkdownEditorChangeEvent",value:function(e){if("setValue"!==e.origin){var t={source:"markdown"};this.eventManager.emit("changeFromMarkdown",t),this.eventManager.emit("change",t)}}},{key:"_isStateChanged",value:function(e,t){var n=!1;return c.default.forEach(t,function(t,i){return!(n=e[i]!==t)}),n}},{key:"resetState",value:function(){this._latestState=null}}],[{key:"factory",value:function(e,n){return new t(e,n)}}]),t}(f.default);t.default=w},function(e,t,n){"use strict";function i(e,t,n,o){var r=void 0,a=void 0,s=void 0,u=void 0,c=n,d=o.getLine(e);do{var f=l.exec(d);if(r=f[1],a=f[4],s=f[5],(u=r.length)===t)o.replaceRange(""+r+c+a+s,{line:e,ch:0},{line:e,ch:d.length}),c+=1,e+=1;else{if(!(u>t))return e;e=i(e,u,1,o)}d=o.getLine(e)}while(l.test(d));return e}function o(e,t){for(var n=e,i=t.getLine(e);l.test(i);)n-=1,i=t.getLine(n);return e===n?n=-1:n+=1,n}var r=n(6),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/;a.default.commands.indentLessOrderedList=function(e){return e.getOption("disableInput")?a.default.Pass:(e.execCommand("indentLess"),e.execCommand("fixOrderedListNumber"),null)},a.default.commands.fixOrderedListNumber=function(e){if(e.getOption("disableInput"))return a.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n+=1){var r=t[n].head,s=o(r.line,e);if(s>=0){var u=e.getLine(s),c=l.exec(u),d=c[1],f=c[3];i(s,d.length,parseInt(f,10),e)}}return null}},function(e,t,n){"use strict";var i=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(i);o.default.overlayMode=function(e,t,n){return{startState:function(){return{base:o.default.startState(e),overlay:o.default.startState(t),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:o.default.copyState(e,n.base),overlay:o.default.copyState(t,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(i,o){return(i!=o.streamSeen||Math.min(o.basePos,o.overlayPos)<i.start)&&(o.streamSeen=i,o.basePos=o.overlayPos=i.start),i.start==o.basePos&&(o.baseCur=e.token(i,o.base),o.basePos=i.pos),i.start==o.overlayPos&&(i.pos=i.start,o.overlayCur=t.token(i,o.overlay),o.overlayPos=i.pos),i.pos=Math.min(o.basePos,o.overlayPos),null==o.overlayCur?o.baseCur:null!=o.baseCur&&o.overlay.combineTokens||n&&null==o.overlay.combineTokens?o.baseCur+" "+o.overlayCur:o.overlayCur},indent:e.indent&&function(t,n){return e.indent(t.base,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(n){e.blankLine&&e.blankLine(n.base),t.blankLine&&t.blankLine(n.overlay)}}}},function(e,t,n){"use strict";var i=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(i);o.default.defineMode("markdown",function(e,t){function n(t){if(o.default.findModeByName){var n=o.default.findModeByName(t);n&&(t=n.mime||n.mimes[0])}var i=o.default.getMode(e,t);return"null"==i.name?null:i}function i(e,t,n){return t.f=t.inline=n,n(e,t)}function r(e,t,n){return t.f=t.block=n,n(e,t)}function a(e){return!e||!/\S/.test(e.string)}function l(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==u){var t=k;if(!t){var n=o.default.innerMode(b,e.htmlState);t="xml"==n.mode.name&&null===n.state.tagStart&&!n.state.context&&n.state.tokenize.isInText}t&&(e.f=h,e.block=s,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function s(e,r){var l=e.column()===r.indentation,s=a(r.prevLine.stream),u=r.indentedCode,f=r.prevLine.hr,h=!1!==r.list,g=(r.listStack[r.listStack.length-1]||0)+3;r.indentedCode=!1;var p=r.indentation;if(null===r.indentationDiff&&(r.indentationDiff=r.indentation,h)){for(r.em=!1,r.strong=!1,r.code=!1,r.strikethrough=!1,r.list=null;p<r.listStack[r.listStack.length-1];)r.listStack.pop(),r.listStack.length?r.indentation=r.listStack[r.listStack.length-1]:r.list=!1;!1!==r.list&&(r.indentationDiff=p-r.listStack[r.listStack.length-1])}var v=!(s||f||r.prevLine.header||h&&u||r.prevLine.fencedCodeEnd),y=(!1===r.list||f||s)&&r.indentation<=g&&e.match(E),_=null;if(r.indentationDiff>=4&&(u||r.prevLine.fencedCodeEnd||r.prevLine.header||s))return e.skipToEnd(),r.indentedCode=!0,w.code;if(e.eatSpace())return null;if(l&&r.indentation<=g&&(_=e.match(M))&&_[1].length<=6)return r.quote=0,r.header=_[1].length,r.thisLine.header=!0,t.highlightFormatting&&(r.formatting="header"),r.f=r.inline,d(r);if(r.indentation<=g&&e.eat(">"))return r.quote=l?1:r.quote+1,t.highlightFormatting&&(r.formatting="quote"),e.eatSpace(),d(r);if(!y&&!r.setext&&l&&r.indentation<=g&&(_=e.match(S))){var b=_[1]?"ol":"ul";return r.indentation=p+e.current().length,r.list=!0,r.quote=0,r.listStack.push(r.indentation),t.taskLists&&e.match(T,!1)&&(r.taskList=!0),r.f=r.inline,t.highlightFormatting&&(r.formatting=["list","list-"+b]),d(r)}return l&&r.indentation<=g&&(_=e.match(L,!0))?(r.quote=0,r.fencedEndRE=new RegExp(_[1]+"+ *$"),r.localMode=t.fencedCodeBlockHighlighting&&n(_[2]),r.localMode&&(r.localState=o.default.startState(r.localMode)),r.f=r.block=c,t.highlightFormatting&&(r.formatting="code-block"),r.code=-1,d(r)):r.setext||!(v&&h||r.quote||!1!==r.list||r.code||y||A.test(e.string))&&(_=e.lookAhead(1))&&(_=_.match(O))?(r.setext?(r.header=r.setext,r.setext=0,e.skipToEnd(),t.highlightFormatting&&(r.formatting="header")):(r.header="="==_[0].charAt(0)?1:2,r.setext=r.header),r.thisLine.header=!0,r.f=r.inline,d(r)):y?(e.skipToEnd(),r.hr=!0,r.thisLine.hr=!0,w.hr):"["===e.peek()?i(e,r,m):i(e,r,r.inline)}function u(e,t){var n=b.token(e,t.htmlState);if(!k){var i=o.default.innerMode(b,t.htmlState);("xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=h,t.block=s,t.htmlState=null)}return n}function c(e,n){var i=n.listStack[n.listStack.length-1]||0,o=n.indentation<i,a=i+3;if(n.fencedEndRE&&n.indentation<=a&&(o||e.match(n.fencedEndRE))){t.highlightFormatting&&(n.formatting="code-block");var l;return o||(l=d(n)),n.localMode=n.localState=null,n.block=s,n.f=h,n.fencedEndRE=null,n.code=0,n.thisLine.fencedCodeEnd=!0,o?r(e,n,n.block):l}return n.localMode?n.localMode.token(e,n.localState):(e.skipToEnd(),w.code)}function d(e){var n=[];if(e.formatting){n.push(w.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)n.push(w.formatting+"-"+e.formatting[i]),"header"===e.formatting[i]&&n.push(w.formatting+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&(!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(w.formatting+"-"+e.formatting[i]+"-"+e.quote):n.push("error"))}if(e.taskOpen)return n.push("meta"),n.length?n.join(" "):null;if(e.taskClosed)return n.push("property"),n.length?n.join(" "):null;if(e.linkHref?n.push(w.linkHref,"url"):(e.strong&&n.push(w.strong),e.em&&n.push(w.em),e.strikethrough&&n.push(w.strikethrough),e.emoji&&n.push(w.emoji),e.linkText&&n.push(w.linkText),e.code&&n.push(w.code),e.image&&n.push(w.image),e.imageAltText&&n.push(w.imageAltText,"link"),e.imageMarker&&n.push(w.imageMarker)),e.header&&n.push(w.header,w.header+"-"+e.header),e.quote&&(n.push(w.quote),!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(w.quote+"-"+e.quote):n.push(w.quote+"-"+t.maxBlockquoteDepth)),!1!==e.list){var o=(e.listStack.length-1)%3;o?1===o?n.push(w.list2):n.push(w.list3):n.push(w.list1)}return e.trailingSpaceNewLine?n.push("trailing-space-new-line"):e.trailingSpace&&n.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),n.length?n.join(" "):null}function f(e,t){if(e.match(N,!0))return d(t)}function h(e,n){var i=n.text(e,n);if(void 0!==i)return i;if(n.list)return n.list=null,d(n);if(n.taskList){return" "===e.match(T,!0)[1]?n.taskOpen=!0:n.taskClosed=!0,t.highlightFormatting&&(n.formatting="task"),n.taskList=!1,d(n)}if(n.taskOpen=!1,n.taskClosed=!1,n.header&&e.match(/^#+$/,!0))return t.highlightFormatting&&(n.formatting="header"),d(n);var a=e.next();if(n.linkTitle){n.linkTitle=!1;var l=a;"("===a&&(l=")"),l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var s="^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(e.match(new RegExp(s),!0))return w.linkHref}if("`"===a){var c=n.formatting;t.highlightFormatting&&(n.formatting="code"),e.eatWhile("`");var f=e.current().length;if(0!=n.code||n.quote&&1!=f){if(f==n.code){var v=d(n);return n.code=0,v}return n.formatting=c,d(n)}return n.code=f,d(n)}if(n.code)return d(n);if("\\"===a&&(e.next(),t.highlightFormatting)){var m=d(n),y=w.formatting+"-escape";return m?m+" "+y:y}if("!"===a&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return n.imageMarker=!0,n.image=!0,t.highlightFormatting&&(n.formatting="image"),d(n);if("["===a&&n.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return n.imageMarker=!1,n.imageAltText=!0,t.highlightFormatting&&(n.formatting="image"),d(n);if("]"===a&&n.imageAltText){t.highlightFormatting&&(n.formatting="image");var m=d(n);return n.imageAltText=!1,n.image=!1,n.inline=n.f=p,m}if("["===a&&!n.image)return n.linkText&&e.match(/^.*?\]/)?d(n):(n.linkText=!0,t.highlightFormatting&&(n.formatting="link"),d(n));if("]"===a&&n.linkText){t.highlightFormatting&&(n.formatting="link");var m=d(n);return n.linkText=!1,n.inline=n.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?p:h,m}if("<"===a&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=g,t.highlightFormatting&&(n.formatting="link");var m=d(n);return m?m+=" ":m="",m+w.linkInline}if("<"===a&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=g,t.highlightFormatting&&(n.formatting="link");var m=d(n);return m?m+=" ":m="",m+w.linkEmail}if(t.xml&&"<"===a&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var _=e.string.indexOf(">",e.pos);if(-1!=_){/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(e.string.substring(e.start,_))&&(n.md_inside=!0)}return e.backUp(1),n.htmlState=o.default.startState(b),r(e,n,u)}if(t.xml&&"<"===a&&e.match(/^\/\w*?>/))return n.md_inside=!1,"tag";if("*"===a||"_"===a){for(var k=1,C=1==e.pos?" ":e.string.charAt(e.pos-2);k<3&&e.eat(a);)k++;var E=e.peek()||" ",S=!/\s/.test(E)&&(!x.test(E)||/\s/.test(C)||x.test(C)),M=!/\s/.test(C)&&(!x.test(C)||/\s/.test(E)||x.test(E)),O=null,N=null;if(k%2&&(n.em||!S||"*"!==a&&M&&!x.test(C)?n.em!=a||!M||"*"!==a&&S&&!x.test(E)||(O=!1):O=!0),k>1&&(n.strong||!S||"*"!==a&&M&&!x.test(C)?n.strong!=a||!M||"*"!==a&&S&&!x.test(E)||(N=!1):N=!0),null!=N||null!=O){t.highlightFormatting&&(n.formatting=null==O?"strong":null==N?"em":"strong em"),!0===O&&(n.em=a),!0===N&&(n.strong=a);var v=d(n);return!1===O&&(n.em=!1),!1===N&&(n.strong=!1),v}}else if(" "===a&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return d(n);e.backUp(1)}if(t.strikethrough)if("~"===a&&e.eatWhile(a)){if(n.strikethrough){t.highlightFormatting&&(n.formatting="strikethrough");var v=d(n);return n.strikethrough=!1,v}if(e.match(/^[^\s]/,!1))return n.strikethrough=!0,t.highlightFormatting&&(n.formatting="strikethrough"),d(n)}else if(" "===a&&e.match(/^~~/,!0)){if(" "===e.peek())return d(n);e.backUp(2)}if(t.emoji&&":"===a&&e.match(/^[a-z_\d+-]+:/)){n.emoji=!0,t.highlightFormatting&&(n.formatting="emoji");var L=d(n);return n.emoji=!1,L}return" "===a&&(e.match(/^ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),d(n)}function g(e,n){if(">"===e.next()){n.f=n.inline=h,t.highlightFormatting&&(n.formatting="link");var i=d(n);return i?i+=" ":i="",i+w.linkInline}return e.match(/^[^>]+/,!0),w.linkInline}function p(e,n){if(e.eatSpace())return null;var i=e.next();return"("===i||"["===i?(n.f=n.inline=v("("===i?")":"]"),t.highlightFormatting&&(n.formatting="link-string"),n.linkHref=!0,d(n)):"error"}function v(e){return function(n,i){if(n.next()===e){i.f=i.inline=h,t.highlightFormatting&&(i.formatting="link-string");var o=d(i);return i.linkHref=!1,o}return n.match(B[e]),i.linkHref=!0,d(i)}}function m(e,n){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(n.f=y,e.next(),t.highlightFormatting&&(n.formatting="link"),n.linkText=!0,d(n)):i(e,n,h)}function y(e,n){if(e.match(/^\]:/,!0)){n.f=n.inline=_,t.highlightFormatting&&(n.formatting="link");var i=d(n);return n.linkText=!1,i}return e.match(/^([^\]\\]|\\.)+/,!0),w.linkText}function _(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=h,w.linkHref+" url")}var b=o.default.getMode(e,"text/html"),k="null"==b.name;void 0===t.highlightFormatting&&(t.highlightFormatting=!1),void 0===t.maxBlockquoteDepth&&(t.maxBlockquoteDepth=0),void 0===t.taskLists&&(t.taskLists=!1),void 0===t.strikethrough&&(t.strikethrough=!1),void 0===t.emoji&&(t.emoji=!1),void 0===t.fencedCodeBlockHighlighting&&(t.fencedCodeBlockHighlighting=!0),void 0===t.xml&&(t.xml=!0),void 0===t.tokenTypeOverrides&&(t.tokenTypeOverrides={});var w={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var C in w)w.hasOwnProperty(C)&&t.tokenTypeOverrides[C]&&(w[C]=t.tokenTypeOverrides[C]);var E=/^([*\-_])(?:\s*\1){2,}\s*$/,S=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,T=/^\[(x| )\](?=\s)/i,M=t.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,O=/^ *(?:\={1,}|-{1,})\s*$/,N=/^[^#!\[\]*_\\<>` "'(~:]+/,L=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,A=/^\s*\[[^\]]+?\]:.*$/,x=/[!\"#$%&\'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~]/,B={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},P={startState:function(){return{f:s,prevLine:{stream:null},thisLine:{stream:null},block:s,htmlState:null,indentation:0,inline:h,text:f,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&o.default.copyState(b,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?o.default.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return l(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=u)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==u?{state:e.htmlState,mode:b}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:P}},indent:function(e,t,n){return e.block==u&&b.indent?b.indent(e.htmlState,t,n):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,n):o.default.Pass},blankLine:l,getType:d,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return P},"xml"),o.default.defineMIME("text/markdown","markdown"),o.default.defineMIME("text/x-markdown","markdown")},function(e,t,n){"use strict";var i=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(i);o.default.defineMode("gfm",function(e,t){function n(e){return e.code=!1,null}var i=0,r={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?(t.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;if("`"===e.peek()){e.next();var n=e.pos;e.eatWhile("`");var o=1+e.pos-n;return t.code?o===i&&(t.code=!1):(i=o,t.code=!0),null}return t.code?(e.next(),null):e.eatSpace()?(t.ateSpace=!0,null):(e.next(),null)},blankLine:n},a={taskLists:!0,strikethrough:!0,emoji:!0};for(var l in t)a[l]=t[l];return a.name="markdown",o.default.overlayMode(o.default.getMode(e,a),r)},"markdown"),o.default.defineMIME("text/x-gfm","gfm")},function(e,t,n){"use strict";function i(e,t){var n=t.line,i=0,o=0,r=a.exec(e.getLine(n)),l=r[1];do{i+=1;var s=n+i,u=e.getLine(s),c=a.exec(u);if(c){var d=c[1],f=parseInt(r[3],10)+i-o,h=parseInt(c[3],10),g=h;if(l!==d||isNaN(h)){if(l.length>d.length)return;if(l.length<d.length&&1===i)return;o+=1}else f===h&&(g=h+1),f>h&&(g=f+1),e.replaceRange(u.replace(a,d+g+c[4]+c[5]),{line:s,ch:0},{line:s,ch:u.length})}}while(c)}var o=n(6),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,l=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,s=/[*+-]\s/;r.default.commands.indentOrderedList=function(e){if(e.getOption("disableInput"))return r.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n].head,o=e.getLine(i.line),l=o.substr(0,i.ch);a.test(l)||e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertSoftTab")}e.execCommand("fixOrderedListNumber")},r.default.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return r.default.Pass;for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){var u=t[o].head,c=e.getStateAfter(u.line),d=!1!==c.list,f=0!==c.quote,h=e.getLine(u.line),g=a.exec(h),p=/^\s*$/.test(h.slice(0,u.ch));if(!t[o].empty()||!d&&!f||!g||p)return void e.execCommand("newlineAndIndent");if(l.test(h))/>\s*$/.test(h)||e.replaceRange("",{line:u.line,ch:0},{line:u.line,ch:u.ch+1}),n[o]="\n";else{var v=g[1],m=g[5],y=!(s.test(g[2])||g[2].indexOf(">")>=0),_=y?parseInt(g[3],10)+1+g[4]:g[2].replace("x"," ");n[o]="\n"+v+_+m,y&&i(e,u)}}e.replaceSelections(n)}},function(e,t,n){"use strict";function i(e){return o(e)&&e.anchor.ch===e.head.ch}function o(e){return e.anchor.line===e.head.line}function r(e,t,n,o){var r=e.getLine(n.line),a=e.getLine(n.line+o),l={anchor:t,head:n};e.replaceRange(a,{line:n.line,ch:0},{line:n.line,ch:r.length},"+input"),e.replaceRange(r,{line:n.line+o,ch:0},{line:n.line+o,ch:a.length},"+input"),i(l)?e.setCursor({line:n.line+o,ch:n.ch}):e.setSelection({line:t.line+o,ch:t.ch},{line:n.line+o,ch:n.ch})}function a(e,t,n,i){var o=e.getRange({line:t.line,ch:0},{line:n.line,ch:e.getLine(n.line).length}),r=i>0?n:t,a=e.getLine(r.line+i),l=void 0;l=i>0?t:n,e.replaceRange(a,{line:l.line,ch:0},{line:l.line,ch:e.getLine(l.line).length},"+input"),e.replaceRange(o,{line:t.line+i,ch:0},{line:n.line+i,ch:e.getLine(n.line+i).length},"+input"),e.setSelection({line:t.line+i,ch:t.ch},{line:n.line+i,ch:n.ch})}var l=n(6),s=function(e){return e&&e.__esModule?e:{default:e}}(l);s.default.commands.replaceLineTextToUpper=function(e){if(e.getOption("disableInput"))return s.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var l=t[n],u=l.anchor,c=l.head;if(o(l)&&c.line>0)r(e,u,c,-1);else if(!i(l)){var d=u.line<c.line?u.line:c.line;if(d>0){var f=u.line===d?u:c,h=u.line===d?c:u;a(e,f,h,-1)}}}},s.default.commands.replaceLineTextToLower=function(e){if(e.getOption("disableInput"))return s.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var l=t[n],u=l.anchor,c=l.head,d=c.line===e.lastLine();if(o(l)&&!d)r(e,u,c,1);else if(!i(l)){var f=u.line<c.line?u.line:c.line,h=u.line===f?u:c,g=u.line===f?c:u;g.line<e.lastLine()&&a(e,h,g,1)}}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=/^[ \t]*[\d]+\. .*/,a=/^[ \t]*[-*] .*/,l=/^[ \t]*[-*]( \[[ xX]])? .*/,s=/^\|([-\s\w\d\t<>?!@#$%^&*()_=+\\\/'";: \r[\]]*\|+)+/i,u=/^#+\s/,c=/^ {0,3}(```|\||>)/,d=function(){function e(t){i(this,e),this.mde=t,this.eventManager=t.eventManager,this.name="list"}return o(e,[{key:"isListOrParagraph",value:function(e){return!c.test(e)&&!s.test(e)&&!u.test(e)}},{key:"appendBlankLineIfNeed",value:function(e,t,n,i){var o=e.getDoc(),r=0,a=i!==n,l=o.getLine(this._getEndLineNumberOfList(o,n)+1),s=o.getLine(this._getStartLineNumberOfList(o,i)-1),u=o.getLine(t+1);(a&&this._isNeedAppendBlankLine(l)||!a&&this._isNeedAppendBlankLine(u))&&o.replaceRange("\n",{line:t,ch:o.getLine(t).length});var c=o.getLine(t-1);if((a&&this._isNeedAppendBlankLine(s)||!a&&this._isNeedAppendBlankLine(c))&&(o.replaceRange("\n",{line:i,ch:0}),r+=1),!a){var d=t+r;e.setCursor(d,o.getLine(d).length)}}},{key:"_isNeedAppendBlankLine",value:function(e){return e&&0!==e.length&&!this._isAList(e)}},{key:"createSortedLineRange",value:function(e){var t=e.from.line>e.to.line;return{start:{line:t?e.to.line:e.from.line,ch:0}.line,end:{line:t?e.from.line:e.to.line,ch:0}.line}}},{key:"expandLineRangeIfNeed",value:function(e,t,n){var i=this.createSortedLineRange(t),o=i.start,r=i.end,a=this._isDifferentListType(n,e.getLine(o)),l=this._isDifferentListType(n,e.getLine(r));return a&&(o=this._getStartLineNumberOfList(e,o)),l&&(r=this._getEndLineNumberOfList(e,r)),{start:o,end:r}}},{key:"replaceLineText",value:function(e,t,n,i){var o=e.getLine(t),r={line:t,ch:0},a={line:t,ch:o.length};o=o.replace(n,i),e.replaceRange(o,r,a)}},{key:"_isDifferentListType",value:function(e,t){return t&&0!==t.length&&e.call(this,t)}},{key:"_isAList",value:function(e){return e&&0!==e.length&&this._isListLine(e)}},{key:"_isListLine",value:function(e){return!!(e.match(l)||e.match(a)||e.match(r))}},{key:"_getStartLineNumberOfList",value:function(e,t){var n=void 0;for(n=t;n>0;n-=1){var i=e.getLine(n-1);if(!i||!this._isListLine(i))break}return n}},{key:"_getEndLineNumberOfList",value:function(e,t){var n=e.lineCount(),i=void 0;for(i=t;i<n;i+=1){var o=e.getLine(i+1);if(!o||!this._isListLine(o))break}return i}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){i(this,e),this._mde=t,this.setRange(n||t.getRange())}return o(e,[{key:"_setStart",value:function(e){this._start=e}},{key:"_setEnd",value:function(e){this._end=e}},{key:"setRange",value:function(e){this._setStart(e.start),this._setEnd(e.end)}},{key:"setEndBeforeRange",value:function(e){this._setEnd(e.start)}},{key:"expandStartOffset",value:function(){var e=this._start;0!==e.ch&&(e.ch-=1)}},{key:"expandEndOffset",value:function(){var e=this._end;e.ch<this._mde.getEditor().getDoc().getLine(e.line).length&&(e.ch+=1)}},{key:"getTextContent",value:function(){return this._mde.getEditor().getRange(this._start,this._end)}},{key:"replaceContent",value:function(e){this._mde.getEditor().replaceRange(e,this._start,this._end,"+input")}},{key:"deleteContent",value:function(){this._mde.getEditor().replaceRange("",this._start,this._end,"+delete")}},{key:"peekStartBeforeOffset",value:function(e){var t={line:this._start.line,ch:Math.max(this._start.ch-e,0)};return this._mde.getEditor().getRange(t,this._start)}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),d=i(c),f=n(57),h=i(f),g=n(59),p=i(g),v=n(60),m=i(v),y=n(38),_=i(y),b=n(39),k=i(b),w=n(61),C=i(w),E=n(62),S=i(E),T=n(63),M=i(T),O=n(40),N=i(O),L=n(64),A=i(L),x=n(19),B=i(x),P=n(66),I=i(P),R=n(37),D=i(R),j=n(67),H=i(j),F=B.default.getSharedInstance(),$=/<([a-z]+|h\d)>(<br>|<br \/>)<\/\1>/gi,U=/(?:<br>|<br \/>)<\/(.+?)>/gi,W=/\b(H[\d]|LI|P|BLOCKQUOTE|TD|PRE)\b/,q="undefined"!=typeof MutationObserver,K=function(){function e(t,n){var i=this;o(this,e),this.componentManager=new D.default(this),this.eventManager=n,this.$editorContainerEl=t,this._height=0,this._silentChange=!1,this._keyEventHandlers={},this._managers={},this._initEvent(),this._initDefaultKeyEventHandler(),this.debouncedPostProcessForChange=u.default.debounce(function(){return i.postProcessForChange()},0)}return r(e,[{key:"init",value:function(){var e=(0,l.default)("<div />");this.$editorContainerEl.append(e),this.editor=new A.default(e[0],{blockTag:"DIV",leafNodeNames:{HR:!1}}),this.editor.blockCommandShortcuts(),this._clipboardManager=new h.default(this),this._initSquireEvent(),this._clipboardManager.init(),this.get$Body().addClass("tui-editor-contents"),this.$editorContainerEl.css("position","relative"),this.codeBlockGadget=new H.default({eventManager:this.eventManager,container:this.$editorContainerEl,wysiwygEditor:this})}},{key:"_preprocessForInlineElement",value:function(e){return e.replace(/<br>( *)<img/g,"<br><br>$1<img")}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._preprocessForInlineElement(t)}),this.eventManager.listen("wysiwygKeyEvent",function(t){return e._runKeyEventHandlers(t.data,t.keyMap)}),this.eventManager.listen("wysiwygRangeChangeAfter",function(){return e.scrollIntoCursor()})}},{key:"addKeyEventHandler",value:function(e,t){var n=this;t||(t=e,e="DEFAULT"),u.default.isArray(e)||(e=[e]),e.forEach(function(e){n._keyEventHandlers[e]||(n._keyEventHandlers[e]=[]),n._keyEventHandlers[e].push(t)})}},{key:"removeKeyEventHandler",value:function(e,t){t||(t=e,e="DEFAULT");var n=this._keyEventHandlers[e];n&&(this._keyEventHandlers[e]=n.filter(function(e){return e!==t}))}},{key:"_runKeyEventHandlers",value:function(e,t){var n=this.getRange(),i=void 0,o=void 0;i=this._keyEventHandlers.DEFAULT,i&&u.default.forEachArray(i,function(i){return o=i(e,n,t)}),(i=this._keyEventHandlers[t])&&!1!==o&&u.default.forEachArray(i,function(i){return i(e,n,t)})}},{key:"_initSquireEvent",value:function(){var e=this,t=this.getEditor(),n=!1;t.addEventListener("copy",function(t){e.eventManager.emit("copy",{source:"wysiwyg",data:t}),u.default.debounce(function(){e.isEditorValid()&&e.eventManager.emit("copyAfter",{source:"wysiwyg",data:t})})()}),t.addEventListener(u.default.browser.msie?"beforecut":"cut",function(t){e.eventManager.emit("cut",{source:"wysiwyg",data:t}),u.default.debounce(function(){e.isEditorValid()&&e.eventManager.emit("cutAfter",{source:"wysiwyg",data:t})})()}),t.addEventListener(u.default.browser.msie?"beforepaste":"paste",function(t){e.eventManager.emit("paste",{source:"wysiwyg",data:t})}),t.addEventListener("dragover",function(e){return e.preventDefault(),!1}),t.addEventListener("drop",function(t){return t.preventDefault(),e.eventManager.emit("drop",{source:"wysiwyg",data:t}),!1}),t.addEventListener("input",u.default.debounce(function(){if(e.isEditorValid()){if(e._silentChange)e._silentChange=!1;else{var t={source:"wysiwyg"};e.eventManager.emit("changeFromWysiwyg",t),e.eventManager.emit("change",t),e.eventManager.emit("contentChangedFromWysiwyg",e)}e.getEditor().preserveLastLine()}},0)),t.addEventListener("keydown",function(t){e.getEditor().getSelection().collapsed||(n=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:t}),e._onKeyDown(t)}),u.default.browser.firefox&&(t.addEventListener("keypress",function(t){var i=t.keyCode;if(13===i||9===i){e.getEditor().getSelection().collapsed||(n=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:t}),e._onKeyDown(t)}}),t.addEventListener("keyup",function(){var t=e.getRange();if(d.default.isTextNode(t.commonAncestorContainer)&&d.default.isTextNode(t.commonAncestorContainer.previousSibling)){var n=t.commonAncestorContainer.previousSibling.length,i=t.commonAncestorContainer;t.commonAncestorContainer.previousSibling.appendData(t.commonAncestorContainer.data),t.setStart(t.commonAncestorContainer.previousSibling,n+t.startOffset),t.collapse(!0),i.parentNode.removeChild(i),e.setRange(t),t.detach()}})),t.addEventListener("keyup",function(t){n&&(e.debouncedPostProcessForChange(),n=!1),e.eventManager.emit("keyup",{source:"wysiwyg",data:t})}),this.$editorContainerEl.on("scroll",function(t){e.eventManager.emit("scroll",{source:"wysiwyg",data:t})}),t.addEventListener("click",function(t){e.eventManager.emit("click",{source:"wysiwyg",data:t})}),t.addEventListener("mousedown",function(t){e.eventManager.emit("mousedown",{source:"wysiwyg",data:t})}),t.addEventListener("mouseover",function(t){e.eventManager.emit("mouseover",{source:"wysiwyg",data:t})}),t.addEventListener("mouseout",function(t){e.eventManager.emit("mouseout",{source:"wysiwyg",data:t})}),t.addEventListener("mouseup",function(t){e.eventManager.emit("mouseup",{source:"wysiwyg",data:t})}),t.addEventListener("contextmenu",function(t){e.eventManager.emit("contextmenu",{source:"wysiwyg",data:t})}),t.addEventListener("focus",function(){e.eventManager.emit("focus",{source:"wysiwyg"})}),t.addEventListener("blur",function(){e.fixIMERange(),e.eventManager.emit("blur",{source:"wysiwyg"})}),t.addEventListener("pathChange",function(t){var n={bold:/(>B|>STRONG|^B$|^STRONG$)/.test(t.path),italic:/(>I|>EM|^I$|^EM$)/.test(t.path),strike:/(^S>|>S$|>S>|^S$)/.test(t.path),code:/CODE/.test(t.path),codeBlock:/PRE/.test(t.path),quote:/BLOCKQUOTE/.test(t.path),list:/LI(?!.task-list-item)/.test(e._getLastLiString(t.path)),task:/LI.task-list-item/.test(e._getLastLiString(t.path)),source:"wysiwyg"};e.eventManager.emit("stateChange",n)}),t.addEventListener("willPaste",function(t){t.fragment&&e.eventManager.emit("willPaste",{source:"wysiwyg",data:t})})}},{key:"_getLastLiString",value:function(e){var t=/LI[^UO]*$/.exec(e);return t?t[0]:""}},{key:"_onKeyDown",value:function(e){var t=F.convert(e);e.keyCode&&(this.eventManager.emit("keyMap",{source:"wysiwyg",keyMap:t,data:e}),e.defaultPrevented||this.eventManager.emit("wysiwygKeyEvent",{keyMap:t,data:e}))}},{key:"_initDefaultKeyEventHandler",value:function(){var e=this;this.addKeyEventHandler("ENTER",function(t,n){e._isInOrphanText(n)&&e.defer(function(){e._wrapDefaultBlockToOrphanTexts(),e.breakToNewDefaultBlock(n,"before")}),e.defer(function(){return e.scrollIntoCursor()})}),this.addKeyEventHandler("TAB",function(t){var n=e.getEditor(),i=n.getSelection(),o=i.collapsed&&e._isCursorNotInRestrictedAreaOfTabAction(n),r=!i.collapsed&&d.default.isTextNode(i.commonAncestorContainer);return t.preventDefault(),!o&&!r||(n.insertPlainText("    "),!1)})}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){this.get$Body().contents().filter(this.findTextNodeFilter).each(function(e,t){t.nextSibling&&"BR"===t.nextSibling.tagName&&(0,l.default)(t.nextSibling).remove(),(0,l.default)(t).wrap("<div />")})}},{key:"_isInOrphanText",value:function(e){return e.startContainer.nodeType===Node.TEXT_NODE&&e.startContainer.parentNode===this.get$Body()[0]}},{key:"_wrapDefaultBlockTo",value:function(e){this.saveSelection(e),this._joinSplitedTextNodes(),this.restoreSavedSelection(),e=this.getRange();var t=e.startContainer,n=e.startOffset,i=this.getEditor().createDefaultBlock([e.startContainer]),o=d.default.getChildNodeByOffset(e.startContainer,e.startOffset);o?e.setStartBefore(o):e.selectNodeContents(e.startContainer),e.collapse(!0),e.insertNode(i),e.setStart(t,n),e.collapse(!0),this.setRange(e)}},{key:"findTextNodeFilter",value:function(){return this.nodeType===Node.TEXT_NODE}},{key:"_joinSplitedTextNodes",value:function(){var e=void 0,t=void 0,n=[];this.get$Body().contents().filter(this.findTextNodeFilter).each(function(i,o){e===o.previousSibling?(t.nodeValue+=o.nodeValue,n.push(o)):t=o,e=o}),(0,l.default)(n).remove()}},{key:"saveSelection",value:function(e){e||(e=this.getRange()),this.getEditor()._saveRangeToBookmark(e)}},{key:"setSelectionByContainerAndOffset",value:function(e,t,n,i){var o=this.getEditor(),r=o.getSelection();return r.setStart(e,t),r.setEnd(n,i),o.setSelection(r),r}},{key:"restoreSavedSelection",value:function(){this.setRange(this.getEditor()._getRangeAndRemoveBookmark())}},{key:"reset",value:function(){this.setValue("")}},{key:"changeBlockFormatTo",value:function(e){this.getEditor().changeBlockFormatTo(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"makeEmptyBlockCurrentSelection",value:function(){var e=this;this.getEditor().modifyBlocks(function(t){return t.textContent||(t=e.getEditor().createDefaultBlock()),t})}},{key:"focus",value:function(){var e=this.scrollTop();this.editor.focus(),e!==this.scrollTop()&&this.scrollTop(e)}},{key:"blur",value:function(){this.editor.blur()}},{key:"remove",value:function(){this.getEditor().destroy(),this.editor=null,this.$body=null,this.eventManager=null}},{key:"setHeight",value:function(e){this._height=e,this.$editorContainerEl.css("overflow","auto"),this.$editorContainerEl.css("height","100%"),this.$editorContainerEl.parent().height(e);var t=parseInt(this.$editorContainerEl.css("padding-top"),10)-parseInt(this.$editorContainerEl.css("padding-bottom"),10),n=parseInt(this.get$Body().css("margin-top"),10)-parseInt(this.get$Body().css("margin-bottom"),10);this.get$Body().css("min-height",e-n-t+"px")}},{key:"setMinHeight",value:function(e){this.get$Body().get(0).style.minHeight=e+"px"}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=this.eventManager.emitReduce("wysiwygSetValueBefore",e),this.editor.setHTML(e),this.eventManager.emit("wysiwygSetValueAfter",this),this.eventManager.emit("contentChangedFromWysiwyg",this),t&&this.moveCursorToEnd(),this.getEditor().preserveLastLine(),this.getEditor().removeLastUndoStack(),this.getEditor().saveUndoState()}},{key:"insertText",value:function(e){this.editor.insertPlainText(e)}},{key:"getValue",value:function(){this._prepareGetHTML();var e=this.editor.getHTML();return e=e.replace($,function(e,t){return"li"===t?e:"td"===t||"th"===t?"<"+t+"></"+t+">":"<br />"}),e=e.replace(U,"</$1>"),e=e.replace(/<div[^>]*>/g,""),e=e.replace(/(<\/div>)+/g,"</div>"),e=e.replace(/<\/div>/g,"<br /><br />"),e=this.eventManager.emitReduce("wysiwygProcessHTMLText",e)}},{key:"_prepareGetHTML",value:function(){var e=this;this.getEditor().modifyDocument(function(){e._joinSplitedTextNodes(),e.eventManager.emit("wysiwygGetValueBefore",e)})}},{key:"postProcessForChange",value:function(){var e=this;this.isEditorValid()&&this.getEditor().modifyDocument(function(){e.eventManager.emit("wysiwygRangeChangeAfter",e)})}},{key:"readySilentChange",value:function(){q&&!this.getEditor().isIgnoreChange()&&(this._silentChange=!0)}},{key:"getEditor",value:function(){return this.editor}},{key:"replaceSelection",value:function(e,t){this.getEditor().replaceSelection(e,t)}},{key:"replaceRelativeOffset",value:function(e,t,n){this.getEditor().replaceRelativeOffset(e,t,n)}},{key:"addWidget",value:function(e,t,n,i){var o=this.getEditor().getSelectionPosition(e,n,i),r=this.$editorContainerEl.offset();this.$editorContainerEl.append(t),(0,l.default)(t).css({position:"absolute",top:o.top-r.top+this.scrollTop(),left:o.left-r.left})}},{key:"get$Body",value:function(){return this.getEditor().get$Body()}},{key:"hasFormatWithRx",value:function(e){return this.getEditor().getPath().match(e)}},{key:"breakToNewDefaultBlock",value:function(e,t){var n=this.editor.createDefaultBlock(),i=d.default.getChildNodeByOffset(e.startContainer,e.startOffset)||d.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),o=d.default.getParentUntil(i,this.get$Body()[0]);"before"===t?(0,l.default)(o).before(n):(0,l.default)(o).after(n),e.setStart(n,0),e.collapse(!0),this.setRange(e)}},{key:"replaceContentText",value:function(e,t,n){var i=(0,l.default)(e).html();(0,l.default)(e).html(i.replace(t,n))}},{key:"unwrapBlockTag",value:function(e){e||(e=function(e){return W.test(e)}),this.getEditor().changeBlockFormat(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"scrollIntoCursor",value:function(){var e=this.scrollTop(),t=this.getEditor().getCursorPosition(),n=t.top,i=t.height,o=this.$editorContainerEl.get(0).getBoundingClientRect(),r=o.top,a=o.height,l=n-r,s=n+i-(r+a);l<0?this.scrollTop(e+l):s>0&&this.scrollTop(e+s)}},{key:"moveCursorToEnd",value:function(){this.getEditor().moveCursorToEnd(),this.scrollIntoCursor(),this._correctRangeAfterMoveCursor("end")}},{key:"moveCursorToStart",value:function(){this.getEditor().moveCursorToStart(),this.scrollTop(0)}},{key:"scrollTop",value:function(e){return u.default.isUndefined(e)?this.$editorContainerEl.scrollTop():this.$editorContainerEl.scrollTop(e)}},{key:"_correctRangeAfterMoveCursor",value:function(e){var t=this.getRange(),n=this.get$Body().get(0);if("start"===e)for(;n.firstChild;)n=n.firstChild;else for(;n.lastChild;)n=n.lastChild;"BR"===n.tagName?t.setStartBefore(n):t.setStartAfter(n),t.collapse(!0),this.setRange(t)}},{key:"getRange",value:function(){return this.getEditor().getSelection().cloneRange()}},{key:"getIMERange",value:function(){var e=void 0,t=getSelection();return t&&t.rangeCount&&(e=t.getRangeAt(0).cloneRange()),e}},{key:"fixIMERange",value:function(){var e=this.getIMERange();e&&(0,l.default)(e.commonAncestorContainer).closest(this.$editorContainerEl).length&&this.setRange(e)}},{key:"setRange",value:function(e){this.getEditor().setSelection(e)}},{key:"getTextObject",value:function(e){return new I.default(this,e)}},{key:"defer",value:function(e,t){var n=this,i=t||0;setTimeout(function(){n.isEditorValid()&&e(n)},i)}},{key:"isEditorValid",value:function(){return this.getEditor()&&l.default.contains(this.$editorContainerEl[0].ownerDocument,this.$editorContainerEl[0])}},{key:"_isCursorNotInRestrictedAreaOfTabAction",value:function(e){return!e.hasFormat("li")&&!e.hasFormat("blockquote")&&!e.hasFormat("table")}}],[{key:"factory",value:function(t,n,i){var o=new e(t,n,i);return o.init(),o.componentManager.addManager(p.default),o.componentManager.addManager(m.default),o.componentManager.addManager(k.default),o.componentManager.addManager(_.default),o.componentManager.addManager(C.default),o.componentManager.addManager(S.default),o.componentManager.addManager(M.default),o.componentManager.addManager(N.default),o}}]),e}();t.default=K},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),d=i(c),f=n(58),h=i(f),g=n(3),p=i(g),v=function(){function e(t){o(this,e),this.wwe=t,this._pch=new h.default(this.wwe),this._selectedSellCount=0,this._$clipboardArea=null}return r(e,[{key:"init",value:function(){var e=this;this.wwe.eventManager.listen("willPaste",function(t){return e._onWillPaste(t.data)}),this.wwe.eventManager.listen("copy",this._onCopyCut.bind(this)),this.wwe.eventManager.listen("copyAfter",this._onCopyAfter.bind(this)),this.wwe.eventManager.listen("cut",this._onCopyCut.bind(this)),this.wwe.eventManager.listen("cutAfter",this._onCutAfter.bind(this))}},{key:"_onCopyCut",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection");if(t.getSelectedCells().length){if(!t.mergedTableSelectionManager)return t.createRangeBySelectedCells(),void t.removeClassAttrbuteFromAllCellsIfNeed();var n=this.wwe.getEditor(),i=e.data,o=n.getSelection().cloneRange(),r=(0,l.default)("<div />");this._extendRange(o),r.append(o.cloneContents()),this._updateCopyDataForListTypeIfNeed(o,r),this.wwe.eventManager.emit("copyBefore",{source:"wysiwyg",$clipboardContainer:r}),this._setClipboardData(i,r.html(),r.text())}}},{key:"_clearClipboardArea",value:function(){this._$clipboardArea&&(this._$clipboardArea.remove(),this._$clipboardArea=null)}},{key:"_onCopyAfter",value:function(){this.wwe.getEditor().get$Body().focus(),this._clearClipboardArea()}},{key:"_onCutAfter",value:function(){this.wwe.getEditor().getSelection().deleteContents(),this.wwe.getEditor().focus(),this._clearClipboardArea()}},{key:"_onWillPaste",value:function(e){var t=this,n=(0,l.default)("<div>").append((0,l.default)("<div>").append(e.fragment.cloneNode(!0)).html().replace(/\n/g," "));this._setTableBookmark(n),this._pasteToTable(n)?e.preventDefault():(this._preparePaste(n),this._setTableBookmark(n),e.fragment=document.createDocumentFragment(),(0,l.default)(n[0].childNodes).each(function(t,n){e.fragment.appendChild(n)})),this._pasteToEmptyCodeBlock(e);var i=function e(){t.wwe.getEditor().removeEventListener("input",e),t.wwe.eventManager.emit("wysiwygRangeChangeAfter",t),t._focusTableBookmark()};this.wwe.getEditor().addEventListener("input",i)}},{key:"_pasteToEmptyCodeBlock",value:function(e){var t=this,n=this.wwe.getEditor(),i=n.getSelection().cloneRange(),o=i.startContainer,r=this.wwe.componentManager.getManager("codeblock"),a=!1;if(r.isInCodeBlock(i)&&i.collapse&&"PRE"===o.nodeName&&!o.textContent){var l=o.firstChild;o.insertBefore(e.fragment,l),e.defaultPrevented=!0,a=!0}var s=function e(){t.wwe.getEditor().removeEventListener("input",e),a&&(i.setStart(o,1),n.setSelection(i))};this.wwe.getEditor().addEventListener("input",s)}},{key:"_setClipboardData",value:function(e,t,n){u.default.browser.msie?(e.squirePrevented=!0,this._$clipboardArea=this._createClipboardArea(),this._$clipboardArea.html(t),this._$clipboardArea.focus(),window.getSelection().selectAllChildren(this._$clipboardArea[0])):(e.preventDefault(),e.stopPropagation(),e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",n))}},{key:"_createClipboardArea",value:function(){return(0,l.default)("<DIV>").attr({contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"}).appendTo(document.body)}},{key:"_updateCopyDataForListTypeIfNeed",value:function(e,t){var n=e.commonAncestorContainer.nodeName;if("UL"===n||"OL"===n){var i=(0,l.default)("<"+n+" />");i.append(t.html()),t.html(""),t.append(i)}}},{key:"_removeEmptyFontElement",value:function(e){e.children("font").each(function(e,t){var n=(0,l.default)(t);n.text().trim()||n.remove()})}},{key:"_pasteToTable",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=this.wwe.componentManager.getManager("tableSelection"),i=this.wwe.getEditor().getSelection(),o=t.isInTable(i),r=e.get(0),a=r.childNodes,l=1===a.length&&"TABLE"===a[0].nodeName,s=!1;return o&&(l?(t.pasteClipboardData(e.first()),e.html(""),s=!0):n.getSelectedCells().length&&(alert(p.default.get("Cannot paste values ​​other than a table in the cell selection state")),e.html(""),s=!0)),s}},{key:"_preparePaste",value:function(e){this._removeEmptyFontElement(e),this._pch.preparePaste(e),this.wwe.eventManager.emit("pasteBefore",{source:"wysiwyg",$clipboardContainer:e})}},{key:"_setTableBookmark",value:function(e){var t=(0,l.default)(e[0].childNodes).last();t[0]&&"TABLE"===t[0].nodeName&&t.addClass("tui-paste-table-bookmark")}},{key:"_focusTableBookmark",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=e.get$Body().find(".tui-paste-table-bookmark"),i=e.get$Body().find(".tui-paste-table-cell-bookmark");n.length&&(n.removeClass("tui-paste-table-bookmark"),t.setEndAfter(n[0]),t.collapse(!1),e.setSelection(t)),i.length&&(i.removeClass("tui-paste-table-cell-bookmark"),t.selectNodeContents(i[0]),t.collapse(!1),e.setSelection(t))}},{key:"_extendRange",value:function(e){(!d.default.isTextNode(e.commonAncestorContainer)||0===e.startOffset&&e.commonAncestorContainer.textContent.length===e.endOffset||"TD"===e.commonAncestorContainer.nodeName)&&(0===e.startOffset&&(e=this._extendStartRange(e)),e.endOffset===d.default.getOffsetLength(e.endContainer)&&(e=this._extendEndRange(e)),this._isWholeCommonAncestorContainerSelected(e)&&e.selectNode(e.commonAncestorContainer),this.wwe.getEditor().setSelection(e))}},{key:"_extendStartRange",value:function(e){for(var t=e.startContainer;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&!t.previousSibling;)t=t.parentNode;return e.setStart(t.parentNode,d.default.getNodeOffsetOfParent(t)),e}},{key:"_extendEndRange",value:function(e){for(var t=e.endContainer,n=t.nextSibling;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&(!n||"BR"===d.default.getNodeName(n)&&t.parentNode.lastChild===n);)t=t.parentNode,n=t.nextSibling;return e.setEnd(t.parentNode,d.default.getNodeOffsetOfParent(t)+1),e}},{key:"_isWholeCommonAncestorContainerSelected",value:function(e){return e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE&&e.commonAncestorContainer!==this.wwe.get$Body()[0]&&0===e.startOffset&&e.endOffset===e.commonAncestorContainer.childNodes.length&&e.commonAncestorContainer===e.startContainer&&e.commonAncestorContainer===e.endContainer}}]),e}();t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),d=i(c),f=n(13),h=i(f),g=function(){function e(t){o(this,e),this.wwe=t}return r(e,[{key:"preparePaste",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.componentManager.getManager("codeblock"),i=!1,o=(0,l.default)("<div />"),r=void 0,a=void 0,s=void 0;this._pasteFirstAid(e);for(var c=u.default.toArray(e[0].childNodes);c.length;)a=c[0],r=d.default.getNodeName(a),s="LI"===r||"UL"===r||"OL"===r,n.isInCodeBlock(t)?o.append(n.prepareToPasteOnCodeblock(c)):s?(o.append(this._prepareToPasteList(c,t,i)),i=!0):o.append(c.shift());e.html(o.html())}},{key:"_wrapOrphanNodeWithDiv",value:function(e){var t=(0,l.default)("<div />"),n=u.default.toArray(e[0].childNodes),i=void 0;return u.default.forEachArray(n,function(e){var n=3===e.nodeType,o=/^(SPAN|A|CODE|EM|I|STRONG|B|S|ABBR|ACRONYM|CITE|DFN|KBD|SAMP|VAR|BDO|Q|SUB|SUP|U)$/gi.test(e.tagName);n||o?(i||(i=document.createElement("div"),t.append(i)),i.appendChild(e)):(i&&"BR"!==i.lastChild.tagName&&i.appendChild((0,l.default)("<br/>")[0]),i=null,t.append(e))}),t.html()}},{key:"_pasteFirstAid",value:function(e){var t=this,n="div, section, article, aside, nav, menus, p";e.html((0,h.default)(e.html(),!0)),e.find("*").each(function(e,n){t._removeStyles(n)}),this._unwrapIfNonBlockElementHasBr(e),this._unwrapNestedBlocks(e,n),this._removeUnnecessaryBlocks(e,n),e.html(this._wrapOrphanNodeWithDiv(e)),this._preElementAid(e),this._tableElementAid(e),e.children("br").remove()}},{key:"_preElementAid",value:function(e){this.wwe.componentManager.getManager("codeblock").modifyCodeBlockForWysiwyg(e)}},{key:"_unwrapIfNonBlockElementHasBr",value:function(e){e.find("span, a, b, em, i, s").each(function(e,t){var n=(0,l.default)(t).children("br");n.length&&"LI"!==t.nodeName&&"UL"!==t.nodeName&&n.eq(0).unwrap()})}},{key:"_unwrapNestedBlocks",value:function(e,t){e.find(":not(:has(*))").not("b,s,i,em,code,span").each(function(n,i){for(var o="BR"===i.nodeName?(0,l.default)(i.parentNode):(0,l.default)(i);o.parents(t).length;){var r=o.parent(t);r.length&&r[0]!==e[0]?o.unwrap():o=o.parent()}})}},{key:"_removeUnnecessaryBlocks",value:function(e,t){e.find(t).each(function(e,n){var i=(0,l.default)(n),o=n.tagName,r="DIV"===o,a=0!==i.parent("li").length,s=0!==i.parent("blockquote").length,u=i.children(t).length;if(!r||!a&&!s&&u){var c="P"===o?"<br>":"";i.replaceWith(i.html()+c)}})}},{key:"_removeStyles",value:function(e){var t=(0,l.default)(e),n=void 0;"SPAN"!==d.default.getNodeName(t[0])?t.removeAttr("style"):(t.attr("style")&&(n=t.css("color")),t.removeAttr("style"),n?t.css("color",n):t.contents().unwrap())}},{key:"_prepareToPasteList",value:function(e,t,n){var i=d.default.getNodeName(e[0]),o=e.shift(),r=this.wwe.getEditor().getDocument().createDocumentFragment();if("LI"!==i&&e.length&&"LI"===e[0].tagName&&(i="LI",o=this._makeNodeAndAppend({tagName:i},o)),"OL"===i||"UL"===i)!n&&this.wwe.getEditor().hasFormat("LI")?(0,l.default)(r).append(this._wrapCurrentFormat(o)):(0,l.default)(r).append(o);else if("LI"===i){var a=this.wwe.getEditor().getDocument().createDocumentFragment();for(a.appendChild(o);e.length&&"LI"===e[0].tagName;)a.appendChild(e.shift());!n&&this.wwe.getEditor().hasFormat("LI")?(0,l.default)(r).append(this._wrapCurrentFormat(a)):!t||"UL"!==t.commonAncestorName&&"OL"!==t.commonAncestorName?(0,l.default)(r).append(this._makeNodeAndAppend({tagName:"UL"},a)):(0,l.default)(r).append(this._makeNodeAndAppend({tagName:t.commonAncestorName},a))}return r}},{key:"_unwrapFragmentFirstChildForPasteAsInline",value:function(e){return(0,l.default)(e).find("br").remove(),e.childNodes}},{key:"_wrapCurrentFormat",value:function(e){var t=this,n=void 0;return this._eachCurrentPath(function(i){"DIV"!==i.tagName&&(n=d.default.isElemNode(e)?e.tagName:e.firstChild.tagName,i.tagName!==n&&(e=t._makeNodeAndAppend(i,e)))}),e}},{key:"_eachCurrentPath",value:function(e){for(var t=d.default.getPath(this.wwe.getEditor().getSelection().startContainer,this.wwe.get$Body()[0]),n=t.length-1;n>-1;n-=1)e(t[n])}},{key:"_makeNodeAndAppend",value:function(e,t){var n=(0,l.default)("<"+e.tagName+"/>");return n.append(t),e.id&&n.attr("id",e.id),e.className&&n.addClass(e.className),n[0]}},{key:"_tableElementAid",value:function(e){this._removeColgroup(e),this._completeTableIfNeed(e),this._updateTableIDClassName(e)}},{key:"_removeColgroup",value:function(e){e.find("colgroup").remove()}},{key:"_completeTableIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=t.wrapDanglingTableCellsIntoTrIfNeed(e);n&&e.append(n);var i=t.wrapTrsIntoTbodyIfNeed(e);i&&e.append(i);var o=t.wrapTheadAndTbodyIntoTableIfNeed(e);o&&e.append(o)}},{key:"_updateTableIDClassName",value:function(e){var t=this.wwe.componentManager.getManager("table");e.find("table").each(function(e,t){(0,l.default)(t).removeClass(function(e,t){return t.replace(/.*\s*(te-content-table-\d+)\s*.*/,"$1")})}),e.find("table").each(function(e,n){(0,l.default)(n).addClass(t.getTableIDClassName())})}}]),e}();t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(4),u=i(s),c=/<li/i,d=function(){function e(t){o(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="list",this._init()}return r(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._convertToArbitraryNestingList(t)}),this.eventManager.listen("wysiwygRangeChangeAfter",function(){e._findAndRemoveEmptyList(),e._removeBranchListAll()}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeBranchListAll()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return t=e._insertBlankToBetweenSameList(t),t=e._convertFromArbitraryNestingList(t)}),this.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){return e.replace(/:BLANK_LINE:\n/g,"")})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler(["TAB","CTRL+]","META+]"],function(t,n){var i=void 0;return n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&(t.preventDefault(),e.eventManager.emit("command","Indent"),i=!1),i}),this.wwe.addKeyEventHandler(["SHIFT+TAB","CTRL+[","META+["],function(t,n){var i=void 0;if(n.collapsed&&e.wwe.getEditor().hasFormat("LI")){t.preventDefault();var o=(0,l.default)(n.startContainer).closest("li").children("OL,UL");e.eventManager.emit("command","Outdent"),o.length&&!o.prev().length&&e._removeBranchList(o),i=!1}return i}),this.wwe.addKeyEventHandler("ENTER",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){var t=e.wwe.getRange(),n=(0,l.default)(t.startContainer).parents("li").eq(0);e._removeBranchListAll(n)})}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){e._removeBranchListAll()})})}},{key:"_findAndRemoveEmptyList",value:function(){this.wwe.get$Body().find("OL,UL").each(function(e,t){c.test(t.innerHTML)||(0,l.default)(t).remove()})}},{key:"_removeBranchListAll",value:function(e){var t=this;e=e?(0,l.default)(e):this.wwe.get$Body(),e.find("li ul, li ol").each(function(e,n){n&&!n.previousSibling&&t._removeBranchList(n)})}},{key:"_removeBranchList",value:function(e){for(var t=(0,l.default)(e),n=t;!n[0].previousSibling&&n[0].parentElement.tagName.match(/UL|OL|LI/g);)n=n.parent();var i=n.children("li").eq(0);n.prepend(t.children().unwrap()),i.remove()}},{key:"_insertBlankToBetweenSameList",value:function(e){return e.replace(/<\/(ul|ol)>(<br \/>|<br>){0,}<\1>/g,"</$1>:BLANK_LINE:<$1>")}},{key:"_convertToArbitraryNestingList",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.querySelector("li > ul, li > ol");null!==n;){var i=n.parentNode;i.parentNode.insertBefore(n,i.nextElementSibling),n=t.querySelector("li > ul, li > ol")}return t.innerHTML}},{key:"_convertFromArbitraryNestingList",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.querySelector("ol > ol, ol > ul, ul > ol, ul > ul");null!==n;){for(var i=n.previousElementSibling;i&&"LI"!==i.tagName;)i=i.previousElementSibling;i?i.appendChild(n):this._unwrap(n),n=t.querySelector("ol > ol, ol > ul, ul > ol, ul > ul")}return t.innerHTML}},{key:"_unwrap",value:function(e){for(var t=document.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}},{key:"getLinesOfSelection",value:function(e,t){var n=[],i=!1,o=!0,r=void 0;u.default.isTextNode(e)&&(e=(0,l.default)(e).parents("DIV,LI").first().get(0)),u.default.isTextNode(t)&&(t=(0,l.default)(t).parents("DIV,LI").first().get(0));for(var a=e;o&&(0,l.default)(a).is("DIV,LI");a=r)n.push(a),a===t?i=!0:r=this._getNextLine(a,t),o=r&&!i;return n}},{key:"_getNextLine",value:function(e,t){var n=e.nextElementSibling;return n?(0,l.default)(n).is("OL,UL")&&(n=n.querySelector("li")):n=e.parentNode.nextElementSibling,(0,l.default)(n).is("DIV,LI")||n===t?n:this._getNextLine(n)}},{key:"mergeList",value:function(e){var t=e.parentNode,n=t.previousElementSibling,i=t.nextElementSibling;t.firstElementChild===e&&n&&(0,l.default)(n).is("OL,UL")&&(this._mergeList(t,n),t=n),t.lastElementChild===e&&i&&(0,l.default)(i).is("OL,UL")&&this._mergeList(i,t)}},{key:"_mergeList",value:function(e,t){var n=e.firstElementChild;if(t&&(0,l.default)(t).is("OL,UL")){for(;n;){var i=n.nextElementSibling;t.appendChild(n),n=i}e.parentNode.removeChild(e)}}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(t){i(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="task",this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.wwe.getEditor().addEventListener("mousedown",function(e){var t=e.offsetX<18&&e.offsetY<18;e.target.hasAttribute("data-te-task")&&t&&(0,a.default)(e.target).toggleClass("checked")})}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeTaskListClass()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){e.isInTaskList(n)&&e.wwe.defer(function(){var t=e.wwe.getRange();(0,a.default)(t.startContainer).closest("li").removeClass("checked")})})}},{key:"isInTaskList",value:function(e){var t=void 0;return e||(e=this.wwe.getEditor().getSelection().cloneRange()),t=e.startContainer.nodeType===Node.ELEMENT_NODE&&"LI"===e.startContainer.tagName?e.startContainer:(0,a.default)(e.startContainer).parents("li").get(0),(0,a.default)(t).hasClass("task-list-item")}},{key:"unformatTask",value:function(e){var t=(0,a.default)(e).closest("li");t.removeClass("task-list-item"),t.removeClass("checked"),t.removeAttr("data-te-task"),t.attr("class")||t.removeAttr("class")}},{key:"formatTask",value:function(e){var t=(0,a.default)(e),n=t.closest("li");n.addClass("task-list-item"),n.attr("data-te-task","")}},{key:"_formatTaskIfNeed",value:function(){var e=this.wwe.getEditor().getSelection().cloneRange();this.isInTaskList(e)&&this.formatTask(e.startContainer)}},{key:"_removeTaskListClass",value:function(){this.wwe.get$Body().find(".task-list").each(function(e,t){(0,a.default)(t).removeClass("task-list")})}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return this.nodeType===Node.TEXT_NODE}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),s=i(l),u=n(4),c=i(u),d=function(){function e(t){o(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="hr",this._init()}return a(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._unwrapDivOnHr()}),this.eventManager.listen("wysiwygGetValueBefore",function(){e._wrapDefaultBlockToOrphanTexts()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler(function(t,n){return e._onTypedInHr(n)}),this.wwe.addKeyEventHandler("ENTER",function(t,n){return!n.collapsed||e._removeHrOnEnter(n,t)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!n.collapsed||e._removeHrOnBackspace(n,t)})}},{key:"_isInHr",value:function(e){return"HR"===c.default.getNodeName(e.startContainer.childNodes[e.startOffset])}},{key:"_isNearHr",value:function(e){var t=c.default.getChildNodeByOffset(e.startContainer,e.startOffset-1);return"HR"===c.default.getNodeName(t)}},{key:"_onTypedInHr",value:function(e){var t=this;(this._isInHr(e)||this._isNearHr(e))&&this.wwe.defer(function(e){e.saveSelection(),t._wrapDefaultBlockToOrphanTexts(),e.restoreSavedSelection()})}},{key:"_removeHrOnEnter",value:function(e,t){var n=void 0,i=void 0;return this._isInHr(e)?n=c.default.getChildNodeByOffset(e.startContainer,e.startOffset):this._isNearHr(e)&&(n=c.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),i="before"),this._changeHrToNewDefaultBlock(n,e,t,i)}},{key:"_removeHrOnBackspace",value:function(e,t){var n=void 0,i=void 0;return this._isInHr(e)?n=c.default.getChildNodeByOffset(e.startContainer,e.startOffset):0===e.startOffset?(n=c.default.getTopPrevNodeUnder(e.startContainer,this.wwe.get$Body()[0]),i="none"):this._isNearHr(e)&&(n=c.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),i="before"),this._changeHrToNewDefaultBlock(n,e,t,i)}},{key:"_changeHrToNewDefaultBlock",value:function(e,t,n,i){return!e||"HR"!==c.default.getNodeName(e)||(n.preventDefault(),"none"!==i&&this.wwe.breakToNewDefaultBlock(t,i),(0,s.default)(e).remove(),!1)}},{key:"_unwrapDivOnHr",value:function(){var e=this.wwe.get$Body().get(0);this.wwe.get$Body().find("hr").each(function(t,n){var i=(0,s.default)(n).parent("div");i[0]!==e&&(i.find("br").remove(),(0,s.default)(n).unwrap())})}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){this.wwe.get$Body().contents().filter(r).each(function(e,t){(0,s.default)(t).wrap("<div />")})}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(t){i(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="p",this._initEvent()}return o(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._splitPtagContentLines(t)}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._ensurePtagContentWrappedWithDiv(),e._unwrapPtags()})}},{key:"_splitPtagContentLines",value:function(e){if(e){var t=(0,a.default)("<div />");t.html(e),t.find("p").each(function(e,t){var n=t.innerHTML,i=n.split(/<br>/gi),o=i.length-1,r="";r=i.map(function(e,t){var n="";return t>0&&t<o&&(e=e||"<br>"),e&&(n="<div>"+e+"</div>"),n}),(0,a.default)(t).replaceWith((0,a.default)(r.join("")))}),e=t.html()}return e}},{key:"_ensurePtagContentWrappedWithDiv",value:function(){this.wwe.get$Body().find("p").each(function(e,t){(0,a.default)(t).find("div").length<=0&&(0,a.default)(t).wrapInner("<div />"),(0,a.default)(t).next().is("p")&&(0,a.default)(t).append("<div><br></div>")})}},{key:"_unwrapPtags",value:function(){this.wwe.get$Body().find("div").each(function(e,t){(0,a.default)(t).parent().is("p")&&(0,a.default)(t).unwrap()})}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(4),u=i(s),c=/h[\d]/i,d=function(){function e(t){o(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="heading",this._init()}return r(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._wrapDefaultBlockToHeadingInner()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){return!e.wwe.hasFormatWithRx(c)||(e._onEnter(t,n),!1)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!e.wwe.hasFormatWithRx(c)||(e._removePrevTopNodeIfNeed(t,n),!1)})}},{key:"_wrapDefaultBlockToHeadingInner",value:function(){this.wwe.get$Body().find("h1, h2, h3, h4, h5, h6").each(function(e,t){(0,l.default)(t).children("div, p").length<=0&&(0,l.default)(t).wrapInner("<div />")})}},{key:"_unwrapHeading",value:function(){this.wwe.unwrapBlockTag(function(e){return c.test(e)})}},{key:"_onEnter",value:function(e,t){var n=this;t.startOffset>0?this.wwe.defer(function(e){n._unwrapHeading(),e.getEditor().removeLastUndoStack()}):(e.preventDefault(),this._insertEmptyBlockToPrevious(t))}},{key:"_insertEmptyBlockToPrevious",value:function(e){this.wwe.getEditor().saveUndoState(e),(0,l.default)("<div><br></div>").insertBefore(u.default.getParentUntil(e.startContainer,this.wwe.get$Body()[0]))}},{key:"_removePrevTopNodeIfNeed",value:function(e,t){var n=!1;if(t.collapsed&&0===t.startOffset){var i=t.startContainer,o=u.default.getTopPrevNodeUnder(i,this.wwe.get$Body()[0]),r=o&&0===o.textContent.length,a=this.wwe.getEditor();0===i.textContent.length?n=this._removeHedingAndChangeSelection(e,t,o):r&&(e.preventDefault(),a.saveUndoState(t),(0,l.default)(o).remove(),n=!0)}return n}},{key:"_removeHedingAndChangeSelection",value:function(e,t,n){var i=t.startContainer,o=this.wwe.getEditor(),r=this.wwe.get$Body(),a=c.test(u.default.getNodeName(i)),s=a?i:(0,l.default)(i).parents("h1,h2,h3,h4,h5,h6")[0],d=n,f=1;return e.defaultPrevented||(e.preventDefault(),o.saveUndoState(t)),(0,l.default)(s).remove(),n||(d=r.children("div").first().get(0),f=0),t.setStart(d,f),t.collapse(!0),o.setSelection(t),!0}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),c=n(1),d=i(c),f=n(65),h=i(f),g=n(4),p=i(g),v=n(14),m=/\b(H[\d]|LI|P|BLOCKQUOTE|TD)\b/,y=/Trident\/[456]\./.test(navigator.userAgent),_=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return l._decorateHandlerToCancelable("copy"),l._decorateHandlerToCancelable(y?"beforecut":"cut"),l._decorateHandlerToCancelable(y?"beforepaste":"paste"),l.get$Body=function(){return l.$body=l.$body||(0,u.default)(l.getRoot()),l.$body},l}return a(t,e),l(t,[{key:"_decorateHandlerToCancelable",value:function(e){var t=this._events[e];if(t.length>1)throw new Error("too many"+e+"handlers in squire");var n=t[0].bind(this);t[0]=function(e){e.defaultPrevented||e.squirePrevented||n(e)}}},{key:"changeBlockFormat",value:function(e,t){var n=this;this.modifyBlocks(function(i){var o=void 0,r=void 0,a=void 0,l=void 0,s=void 0,u=void 0,c=void 0;if(i.childNodes.length?o=i.childNodes.item(0):(o=n.createDefaultBlock(),i.appendChild(o)),e){for(;o.firstChild;)o=o.firstChild;for(c=function(e){l.appendChild(e)};o!==i;){if(s=o.tagName,d.default.isFunction(e)?e(s):s===e){l=o.childNodes.item(0),(!p.default.isElemNode(l)||o.childNodes.length>1)&&(l=n.createDefaultBlock(),d.default.forEachArray(d.default.toArray(o.childNodes),c),(u=l.lastChild)&&"BR"===p.default.getNodeName(u)&&l.removeChild(u)),a=t?n.createElement(t,[l]):l,r=n.getDocument().createDocumentFragment(),r.appendChild(a),i=r;break}o=o.parentNode}}return r&&e||!t||"DIV"!==p.default.getNodeName(i.childNodes[0])||(i=n.createElement(t,[i.childNodes[0]])),i})}},{key:"changeBlockFormatTo",value:function(e){this.changeBlockFormat(function(e){return m.test(e)},e)}},{key:"getCaretPosition",value:function(){return this.getCursorPosition()}},{key:"replaceSelection",value:function(e,t){t&&this.setSelection(t),this._ignoreChange=!0,this.insertHTML(e)}},{key:"replaceRelativeOffset",value:function(e,t,n){var i=this.getSelection().cloneRange();this._replaceRelativeOffsetOfSelection(e,t,n,i)}},{key:"_replaceRelativeOffsetOfSelection",value:function(e,t,n,i){var o=void 0,r=void 0,a=void 0,l=i.endContainer,s=i.endOffset;"TEXT"!==p.default.getNodeName(l)&&(l=this._getClosestTextNode(l,s))&&(s=p.default.isTextNode(l)?l.nodeValue.length:l.textContent.length),l?(o=this.getSelectionInfoByOffset(l,s+t),i.setStart(o.element,o.offset),a=s+(t+n),r=this.getSelectionInfoByOffset(l,a),i.setEnd(r.element,r.offset),this.replaceSelection(e,i)):this.replaceSelection(e)}},{key:"_getClosestTextNode",value:function(e,t){var n=p.default.getChildNodeByOffset(e,t-1);return"TEXT"!==p.default.getNodeName(n)&&(n=n.previousSibling),n}},{key:"getSelectionInfoByOffset",value:function(e,t){var n=void 0,i=void 0,o=void 0,r=void 0,a=t>=0?"next":"previous",l=Math.abs(t),s=n;for(n="next"===a?e:e.previousSibling,o=l,r=0;n&&(i=p.default.isTextNode(n)?n.nodeValue.length:n.textContent.length,r+=i,!(l<=r));)o-=i,p.default.getTextLength(n)>0&&(s=n),n=n[a+"Sibling"];return n||(n=s,o=p.default.getTextLength(n)),"previous"===a&&(o=p.default.getTextLength(n)-o),{element:n,offset:o}}},{key:"getSelectionPosition",value:function(e,t,n){var i=this.createElement("INPUT"),o=e.cloneRange(),r=this.getSelectionInfoByOffset(e.endContainer,e.endOffset+(n||0));o.setStart(o.startContainer,o.startOffset),o.setEnd(r.element,r.offset),this._ignoreChange=!0,this.insertElement(i,o);var a=(0,u.default)(i).offset();return"over"!==t&&(a.top+=(0,u.default)(i).outerHeight()),i.parentNode.removeChild(i),e.setStart(e.endContainer,e.endOffset),e.collapse(!0),this.setSelection(e),a}},{key:"removeLastUndoStack",value:function(){this._undoStack.length&&(this._undoStackLength-=1,this._undoIndex-=1,this._undoStack.pop(),this._isInUndoState=!1)}},{key:"replaceParent",value:function(e,t,n){var i=(0,u.default)(e).closest(t);i.length&&(i.wrapInner("<"+n+"/>"),i.children().unwrap())}},{key:"preserveLastLine",value:function(){var e=this.get$Body().children().last();"DIV"!==p.default.getNodeName(e[0])&&(this._ignoreChange=!0,(0,u.default)(this.createDefaultBlock()).insertAfter(e))}},{key:"scrollTop",value:function(e){return d.default.isUndefined(e)?this.get$Body().scrollTop():this.get$Body().scrollTop(e)}},{key:"isIgnoreChange",value:function(){return this._ignoreChange}},{key:"focus",value:function(){h.default.prototype.focus.call(this)}},{key:"blockCommandShortcuts",value:function(){var e=this,t=v.isMac?"meta":"ctrl";["b","i","u","shift-7","shift-5","shift-6","shift-8","shift-9","[","]","d"].forEach(function(n){e.setKeyHandler(t+"-"+n,function(e,t){t.preventDefault()})})}}]),t}(h.default);t.default=_},function(e,t,n){!function(t,n){"use strict";function i(e,t,n){this.root=this.currentNode=e,this.nodeType=t,this.filter=n||de}function o(e,t){for(var n=e.length;n--;)if(!t(e[n]))return!1;return!0}function r(e){return e.nodeType===j&&!!he[e.nodeName]}function a(e){switch(e.nodeType){case H:return pe;case j:case $:if(le&&ye.has(e))return ye.get(e);break;default:return ge}var t;return t=o(e.childNodes,l)?fe.test(e.nodeName)?pe:ve:me,le&&ye.set(e,t),t}function l(e){return a(e)===pe}function s(e){return a(e)===ve}function u(e){return a(e)===me}function c(e,t){var n=new i(t,U,s);return n.currentNode=e,n}function d(e,t){return e=c(e,t).previousNode(),e!==t?e:null}function f(e,t){return e=c(e,t).nextNode(),e!==t?e:null}function h(e){return!e.textContent&&!e.querySelector("IMG")}function g(e,t){return!r(e)&&e.nodeType===t.nodeType&&e.nodeName===t.nodeName&&"A"!==e.nodeName&&e.className===t.className&&(!e.style&&!t.style||e.style.cssText===t.style.cssText)}function p(e,t,n){if(e.nodeName!==t)return!1;for(var i in n)if(e.getAttribute(i)!==n[i])return!1;return!0}function v(e,t,n,i){for(;e&&e!==t;){if(p(e,n,i))return e;e=e.parentNode}return null}function m(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function y(e,t,n){var i,o,r,a,l,s="";return e&&e!==t&&(s=y(e.parentNode,t,n),e.nodeType===j&&(s+=(s?">":"")+e.nodeName,(i=e.id)&&(s+="#"+i),(o=e.className.trim())&&(r=o.split(/\s\s*/),r.sort(),s+=".",s+=r.join(".")),(a=e.dir)&&(s+="[dir="+a+"]"),r&&(l=n.classNames,ue.call(r,l.highlight)>-1&&(s+="[backgroundColor="+e.style.backgroundColor.replace(/ /g,"")+"]"),ue.call(r,l.colour)>-1&&(s+="[color="+e.style.color.replace(/ /g,"")+"]"),ue.call(r,l.fontFamily)>-1&&(s+="[fontFamily="+e.style.fontFamily.replace(/ /g,"")+"]"),ue.call(r,l.fontSize)>-1&&(s+="[fontSize="+e.style.fontSize+"]")))),s}function _(e){var t=e.nodeType;return t===j||t===$?e.childNodes.length:e.length||0}function b(e){var t=e.parentNode;return t&&t.removeChild(e),e}function k(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function w(e){for(var t=e.ownerDocument.createDocumentFragment(),n=e.childNodes,i=n?n.length:0;i--;)t.appendChild(e.firstChild);return t}function C(e,t,i,o){var r,a,l,s=e.createElement(t);if(i instanceof Array&&(o=i,i=null),i)for(r in i)i[r]!==n&&s.setAttribute(r,i[r]);if(o)for(a=0,l=o.length;a<l;a+=1)s.appendChild(o[a]);return s}function E(e,t){var n,i,o=t.__squire__,a=e.ownerDocument,s=e;if(e===t&&((i=e.firstChild)&&"BR"!==i.nodeName||(n=o.createDefaultBlock(),i?e.replaceChild(n,i):e.appendChild(n),e=n,n=null)),e.nodeType===H)return s;if(l(e)){for(i=e.firstChild;oe&&i&&i.nodeType===H&&!i.data;)e.removeChild(i),i=e.firstChild;i||(oe?(n=a.createTextNode(W),o._didAddZWS()):n=a.createTextNode(""))}else if(ie){for(;e.nodeType!==H&&!r(e);){if(!(i=e.firstChild)){n=a.createTextNode("");break}e=i}e.nodeType===H?/^ +$/.test(e.data)&&(e.data=""):r(e)&&e.parentNode.insertBefore(a.createTextNode(""),e)}else if(!e.querySelector("BR"))for(n=C(a,"BR");(i=e.lastElementChild)&&!l(i);)e=i;if(n)try{e.appendChild(n)}catch(t){o.didError({name:"Squire: fixCursor – "+t,message:"Parent: "+e.nodeName+"/"+e.innerHTML+" appendChild: "+n.nodeName})}return s}function S(e,t){var n,i,o,r,a=e.childNodes,s=e.ownerDocument,c=null,d=t.__squire__._config;for(n=0,i=a.length;n<i;n+=1)o=a[n],r="BR"===o.nodeName,!r&&l(o)?(c||(c=C(s,d.blockTag,d.blockAttributes)),c.appendChild(o),n-=1,i-=1):(r||c)&&(c||(c=C(s,d.blockTag,d.blockAttributes)),E(c,t),r?e.replaceChild(c,o):(e.insertBefore(c,o),n+=1,i+=1),c=null),u(o)&&S(o,t);return c&&e.appendChild(E(c,t)),e}function T(e,t,n,i){var o,r,a,l=e.nodeType;if(l===H&&e!==n)return T(e.parentNode,e.splitText(t),n,i);if(l===j){if("number"==typeof t&&(t=t<e.childNodes.length?e.childNodes[t]:null),e===n)return t;for(o=e.parentNode,r=e.cloneNode(!1);t;)a=t.nextSibling,r.appendChild(t),t=a;return"OL"===e.nodeName&&v(e,i,"BLOCKQUOTE")&&(r.start=(+e.start||1)+e.childNodes.length-1),E(e,i),E(r,i),(a=e.nextSibling)?o.insertBefore(r,a):o.appendChild(r),T(o,r,n,i)}return t}function M(e,t){for(var n,i,o,r=e.childNodes,a=r.length,s=[];a--;)if(n=r[a],i=a&&r[a-1],a&&l(n)&&g(n,i)&&!he[n.nodeName])t.startContainer===n&&(t.startContainer=i,t.startOffset+=_(i)),t.endContainer===n&&(t.endContainer=i,t.endOffset+=_(i)),t.startContainer===e&&(t.startOffset>a?t.startOffset-=1:t.startOffset===a&&(t.startContainer=i,t.startOffset=_(i))),t.endContainer===e&&(t.endOffset>a?t.endOffset-=1:t.endOffset===a&&(t.endContainer=i,t.endOffset=_(i))),b(n),n.nodeType===H?i.appendData(n.data):s.push(w(n));else if(n.nodeType===j){for(o=s.length;o--;)n.appendChild(s.pop());M(n,t)}}function O(e,t){if(e.nodeType===H&&(e=e.parentNode),e.nodeType===j){var n={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};M(e,n),t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset)}}function N(e,t,n,i){for(var o,r,a,l=t;(o=l.parentNode)&&o!==i&&o.nodeType===j&&1===o.childNodes.length;)l=o;b(l),a=e.childNodes.length,r=e.lastChild,r&&"BR"===r.nodeName&&(e.removeChild(r),a-=1),e.appendChild(w(t)),n.setStart(e,a),n.collapse(!0),O(e,n),Q&&(r=e.lastChild)&&"BR"===r.nodeName&&e.removeChild(r)}function L(e,t){var n,i,o=e.previousSibling,r=e.firstChild,a=e.ownerDocument,l="LI"===e.nodeName;if(!l||r&&/^[OU]L$/.test(r.nodeName))if(o&&g(o,e)){if(!u(o)){if(!l)return;i=C(a,"DIV"),i.appendChild(w(o)),o.appendChild(i)}b(e),n=!u(e),o.appendChild(w(e)),n&&S(o,t),r&&L(r,t)}else l&&(o=C(a,"DIV"),e.insertBefore(o,r),E(o,t))}function A(e){this.isShiftDown=e.shiftKey}function x(e,t,n){var i,o;if(e||(e={}),t)for(i in t)!n&&i in e||(o=t[i],e[i]=o&&o.constructor===Object?x(e[i],o,n):o);return e}function B(e,t){e.nodeType===F&&(e=e.body);var n,i=e.ownerDocument,o=i.defaultView;this._win=o,this._doc=i,this._root=e,this._events={},this._isFocused=!1,this._lastSelection=null,re&&this.addEventListener("beforedeactivate",this.getSelection),this._hasZWS=!1,this._lastAnchorNode=null,this._lastFocusNode=null,this._path="",this._willUpdatePath=!1,"onselectionchange"in i?this.addEventListener("selectionchange",this._updatePathOnEvent):(this.addEventListener("keyup",this._updatePathOnEvent),this.addEventListener("mouseup",this._updatePathOnEvent)),this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0,this._isInUndoState=!1,this._ignoreChange=!1,this._ignoreAllChanges=!1,ae?(n=new MutationObserver(this._docWasChanged.bind(this)),n.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._mutation=n):this.addEventListener("keyup",this._keyUpDetectChange),this._restoreSelection=!1,this.addEventListener("blur",P),this.addEventListener("mousedown",I),this.addEventListener("touchstart",I),this.addEventListener("focus",R),this._awaitingPaste=!1,this.addEventListener(Z?"beforecut":"cut",et),this.addEventListener("copy",tt),this.addEventListener("keydown",A),this.addEventListener("keyup",A),this.addEventListener(Z?"beforepaste":"paste",nt),this.addEventListener("drop",it),this.addEventListener(Q?"keypress":"keydown",Ie),this._keyHandlers=Object.create(He),this.setConfig(t),Z&&(o.Text.prototype.splitText=function(e){var t=this.ownerDocument.createTextNode(this.data.slice(e)),n=this.nextSibling,i=this.parentNode,o=this.length-e;return n?i.insertBefore(t,n):i.appendChild(t),o&&this.deleteData(e,o),t}),e.setAttribute("contenteditable","true");try{i.execCommand("enableObjectResizing",!1,"false"),i.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}e.__squire__=this,this.setHTML("")}function P(){this._restoreSelection=!0}function I(){this._restoreSelection=!1}function R(){this._restoreSelection&&this.setSelection(this._lastSelection)}function D(e,t,n){var i,o;for(i=t.firstChild;i;i=o){if(o=i.nextSibling,l(i)){if(i.nodeType===H||"BR"===i.nodeName||"IMG"===i.nodeName){n.appendChild(i);continue}}else if(s(i)){n.appendChild(e.createDefaultBlock([D(e,i,e._doc.createDocumentFragment())]));continue}D(e,i,n)}return n}var j=1,H=3,F=9,$=11,U=1,W="​",q=t.defaultView,K=navigator.userAgent,V=/Android/.test(K),z=/iP(?:ad|hone|od)/.test(K),Y=/Mac OS X/.test(K),G=/Windows NT/.test(K),X=/Gecko\//.test(K),Z=/Trident\/[456]\./.test(K),Q=!!q.opera,J=/Edge\//.test(K),ee=!J&&/WebKit\//.test(K),te=/Trident\/[4567]\./.test(K),ne=Y?"meta-":"ctrl-",ie=Z||Q,oe=Z||ee,re=Z,ae="undefined"!=typeof MutationObserver,le="undefined"!=typeof WeakMap,se=/[^ \t\r\n]/,ue=Array.prototype.indexOf;Object.create||(Object.create=function(e){var t=function(){};return t.prototype=e,new t});var ce={1:1,2:2,3:4,8:128,9:256,11:1024},de=function(){return!0};i.prototype.nextNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,o=this.filter;;){for(e=t.firstChild;!e&&t&&t!==n;)(e=t.nextSibling)||(t=t.parentNode);if(!e)return null;if(ce[e.nodeType]&i&&o(e))return this.currentNode=e,e;t=e}},i.prototype.previousNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,o=this.filter;;){if(t===n)return null;if(e=t.previousSibling)for(;t=e.lastChild;)e=t;else e=t.parentNode;if(!e)return null;if(ce[e.nodeType]&i&&o(e))return this.currentNode=e,e;t=e}},i.prototype.previousPONode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,o=this.filter;;){for(e=t.lastChild;!e&&t&&t!==n;)(e=t.previousSibling)||(t=t.parentNode);if(!e)return null;if(ce[e.nodeType]&i&&o(e))return this.currentNode=e,e;t=e}};var fe=/^(?:#text|A(?:BBR|CRONYM)?|B(?:R|D[IO])?|C(?:ITE|ODE)|D(?:ATA|EL|FN)|EM|FONT|HR|I(?:FRAME|MG|NPUT|NS)?|KBD|Q|R(?:P|T|UBY)|S(?:AMP|MALL|PAN|TR(?:IKE|ONG)|U[BP])?|TIME|U|VAR|WBR)$/,he={BR:1,HR:1,IFRAME:1,IMG:1,INPUT:1},ge=0,pe=1,ve=2,me=3,ye=le?new WeakMap:null,_e=function(e,t){for(var n=e.childNodes;t&&e.nodeType===j;)e=n[t-1],n=e.childNodes,t=n.length;return e},be=function(e,t){if(e.nodeType===j){var n=e.childNodes;if(t<n.length)e=n[t];else{for(;e&&!e.nextSibling;)e=e.parentNode;e&&(e=e.nextSibling)}}return e},ke=function(e,t){var n,i,o,r,a=e.startContainer,l=e.startOffset,s=e.endContainer,u=e.endOffset;a.nodeType===H?(n=a.parentNode,i=n.childNodes,l===a.length?(l=ue.call(i,a)+1,e.collapsed&&(s=n,u=l)):(l&&(r=a.splitText(l),s===a?(u-=l,s=r):s===n&&(u+=1),a=r),l=ue.call(i,a)),a=n):i=a.childNodes,o=i.length,l===o?a.appendChild(t):a.insertBefore(t,i[l]),a===s&&(u+=i.length-o),e.setStart(a,l),e.setEnd(s,u)},we=function(e,t,n){var i=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;t||(t=e.commonAncestorContainer),t.nodeType===H&&(t=t.parentNode);for(var l,s,u,c,d,f=T(r,a,t,n),h=T(i,o,t,n),g=t.ownerDocument.createDocumentFragment();h!==f;)l=h.nextSibling,g.appendChild(h),h=l;return i=t,o=f?ue.call(t.childNodes,f):t.childNodes.length,u=t.childNodes[o],s=u&&u.previousSibling,s&&s.nodeType===H&&u.nodeType===H&&(i=s,o=s.length,c=s.data,d=u.data," "===c.charAt(c.length-1)&&" "===d.charAt(0)&&(d=" "+d.slice(1)),s.appendData(d),b(u)),e.setStart(i,o),e.collapse(!0),E(t,n),g},Ce=function(e,t){var n,i,o=Oe(e,t),r=Ne(e,t),a=o!==r;return Te(e),Me(e,o,r,t),n=we(e,null,t),Te(e),a&&(r=Ne(e,t),o&&r&&o!==r&&N(o,r,e,t)),o&&E(o,t),i=t.firstChild,i&&"BR"!==i.nodeName?e.collapse(!0):(E(t,t),e.selectNodeContents(t.firstChild)),n},Ee=function(e,t,n){var i,o,r,a,s,c,g,p,m,y,k;for(S(t,n),i=t;i=f(i,n);)E(i,n);if(e.collapsed||Ce(e,n),Te(e),e.collapse(!1),a=v(e.endContainer,n,"BLOCKQUOTE")||n,o=Oe(e,n),p=f(t,t),g=!!o&&h(o),o&&p&&!g&&!v(p,t,"PRE")&&!v(p,t,"TABLE")){if(Me(e,o,o,n),e.collapse(!0),s=e.endContainer,c=e.endOffset,Qe(o,n,!1),l(s)&&(m=T(s,c,d(s,n),n),s=m.parentNode,c=ue.call(s.childNodes,m)),c!==_(s))for(r=n.ownerDocument.createDocumentFragment();i=s.childNodes[c];)r.appendChild(i);N(s,p,e,n),c=ue.call(s.parentNode.childNodes,s)+1,s=s.parentNode,e.setEnd(s,c)}_(t)&&(g&&(e.setEndBefore(o),e.collapse(!1),b(o)),Me(e,a,a,n),m=T(e.endContainer,e.endOffset,a,n),y=m?m.previousSibling:a.lastChild,a.insertBefore(t,m),m?e.setEndBefore(m):e.setEnd(a,_(a)),o=Ne(e,n),Te(e),s=e.endContainer,c=e.endOffset,m&&u(m)&&L(m,n),m=y&&y.nextSibling,m&&u(m)&&L(m,n),e.setEnd(s,c)),r&&(k=e.cloneRange(),N(o,r,k,n),e.setEnd(k.endContainer,k.endOffset)),Te(e)},Se=function(e,t,n){var i=t.ownerDocument.createRange();if(i.selectNode(t),n){var o=e.compareBoundaryPoints(3,i)>-1,r=e.compareBoundaryPoints(1,i)<1;return!o&&!r}var a=e.compareBoundaryPoints(0,i)<1,l=e.compareBoundaryPoints(2,i)>-1;return a&&l},Te=function(e){for(var t,n=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,l=!0;n.nodeType!==H&&(t=n.childNodes[i])&&!r(t);)n=t,i=0;if(a)for(;o.nodeType!==H;){if(!(t=o.childNodes[a-1])||r(t)){if(l&&t&&"BR"===t.nodeName){a-=1,l=!1;continue}break}o=t,a=_(o)}else for(;o.nodeType!==H&&(t=o.firstChild)&&!r(t);)o=t;e.collapsed?(e.setStart(o,a),e.setEnd(n,i)):(e.setStart(n,i),e.setEnd(o,a))},Me=function(e,t,n,i){var o,r=e.startContainer,a=e.startOffset,l=e.endContainer,s=e.endOffset,u=!0;for(t||(t=e.commonAncestorContainer),n||(n=t);!a&&r!==t&&r!==i;)o=r.parentNode,a=ue.call(o.childNodes,r),r=o;for(;u&&l.nodeType!==H&&l.childNodes[s]&&"BR"===l.childNodes[s].nodeName&&(s+=1,u=!1),l!==n&&l!==i&&s===_(l);)o=l.parentNode,s=ue.call(o.childNodes,l)+1,l=o;e.setStart(r,a),e.setEnd(l,s)},Oe=function(e,t){var n,i=e.startContainer;return l(i)?n=d(i,t):i!==t&&s(i)?n=i:(n=_e(i,e.startOffset),n=f(n,t)),n&&Se(e,n,!0)?n:null},Ne=function(e,t){var n,i,o=e.endContainer;if(l(o))n=d(o,t);else if(o!==t&&s(o))n=o;else{if(!(n=be(o,e.endOffset))||!m(t,n))for(n=t;i=n.lastChild;)n=i;n=d(n,t)}return n&&Se(e,n,!0)?n:null},Le=new i(null,4|U,function(e){return e.nodeType===H?se.test(e.data):"IMG"===e.nodeName}),Ae=function(e,t){var n,i=e.startContainer,o=e.startOffset;if(Le.root=null,i.nodeType===H){if(o)return!1;n=i}else if(n=be(i,o),n&&!m(t,n)&&(n=null),!n&&(n=_e(i,o),n.nodeType===H&&n.length))return!1;return Le.currentNode=n,Le.root=Oe(e,t),!Le.previousNode()},xe=function(e,t){var n,i=e.endContainer,o=e.endOffset;if(Le.root=null,i.nodeType===H){if((n=i.data.length)&&o<n)return!1;Le.currentNode=i}else Le.currentNode=_e(i,o);return Le.root=Ne(e,t),!Le.nextNode()},Be=function(e,t){var n,i=Oe(e,t),o=Ne(e,t);i&&o&&(n=i.parentNode,e.setStart(n,ue.call(n.childNodes,i)),n=o.parentNode,e.setEnd(n,ue.call(n.childNodes,o)+1))},Pe={8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",37:"left",39:"right",46:"delete",219:"[",221:"]"},Ie=function(e){var t=e.keyCode,n=Pe[t],i="",o=this.getSelection();e.defaultPrevented||(n||(n=String.fromCharCode(t).toLowerCase(),/^[A-Za-z0-9]$/.test(n)||(n="")),Q&&46===e.which&&(n="."),111<t&&t<124&&(n="f"+(t-111)),"backspace"!==n&&"delete"!==n&&(e.altKey&&(i+="alt-"),e.ctrlKey&&(i+="ctrl-"),e.metaKey&&(i+="meta-")),e.shiftKey&&(i+="shift-"),n=i+n,this._keyHandlers[n]?this._keyHandlers[n](this,e,o):o.collapsed||e.isComposing||e.ctrlKey||e.metaKey||1!==(e.key||n).length||(this.saveUndoState(o),Ce(o,this._root),this._ensureBottomLine(),this.setSelection(o),this._updatePath(o,!0)))},Re=function(e){return function(t,n){n.preventDefault(),t[e]()}},De=function(e,t){return t=t||null,function(n,i){i.preventDefault();var o=n.getSelection();n.hasFormat(e,null,o)?n.changeFormat(null,{tag:e},o):n.changeFormat({tag:e},t,o)}},je=function(e,t){try{t||(t=e.getSelection());var n,i=t.startContainer;for(i.nodeType===H&&(i=i.parentNode),n=i;l(n)&&(!n.textContent||n.textContent===W);)i=n,n=i.parentNode;i!==n&&(t.setStart(n,ue.call(n.childNodes,i)),t.collapse(!0),n.removeChild(i),s(n)||(n=d(n,e._root)),E(n,e._root),Te(t)),i===e._root&&(i=i.firstChild)&&"BR"===i.nodeName&&b(i),e._ensureBottomLine(),e.setSelection(t),e._updatePath(t,!0)}catch(t){e.didError(t)}},He={enter:function(e,t,n){var i,o,r,a,l,s=e._root;if(t.preventDefault(),e._recordUndoState(n),bt(n.startContainer,s,e),e._removeZWS(),e._getRangeAndRemoveBookmark(n),n.collapsed||Ce(n,s),(i=Oe(n,s))&&(o=v(i,s,"PRE")))return Te(n),r=n.startContainer,a=n.startOffset,r.nodeType!==H&&(r=e._doc.createTextNode(""),o.insertBefore(r,o.firstChild)),t.shiftKey||"\n"!==r.data.charAt(a-1)&&!Ae(n,s)||"\n"!==r.data.charAt(a)&&!xe(n,s)?(r.insertData(a,"\n"),E(o,s),r.length===a+1?n.setStartAfter(r):n.setStart(r,a+1)):(r.deleteData(a&&a-1,a?2:1),l=T(r,a&&a-1,s,s),r=l.previousSibling,r.textContent||b(r),r=e.createDefaultBlock(),l.parentNode.insertBefore(r,l),l.textContent||b(l),n.setStart(r,0)),n.collapse(!0),e.setSelection(n),e._updatePath(n,!0),void e._docWasChanged();if(!i||t.shiftKey||/^T[HD]$/.test(i.nodeName))return o=v(n.endContainer,s,"A"),o&&(o=o.parentNode,Me(n,o,o,s),n.collapse(!1)),ke(n,e.createElement("BR")),n.collapse(!1),e.setSelection(n),void e._updatePath(n,!0);if((o=v(i,s,"LI"))&&(i=o),h(i)){if(v(i,s,"UL")||v(i,s,"OL"))return e.decreaseListLevel(n);if(v(i,s,"BLOCKQUOTE"))return e.modifyBlocks(gt,n)}for(l=dt(e,i,n.startContainer,n.startOffset),st(i),Ge(i),E(i,s);l.nodeType===j;){var u,c=l.firstChild;if("A"===l.nodeName&&(!l.textContent||l.textContent===W)){c=e._doc.createTextNode(""),k(l,c),l=c;break}for(;c&&c.nodeType===H&&!c.data&&(u=c.nextSibling)&&"BR"!==u.nodeName;)b(c),c=u;if(!c||"BR"===c.nodeName||c.nodeType===H&&!Q)break;l=c}n=e.createRange(l,0),e.setSelection(n),e._updatePath(n,!0)},"shift-enter":function(e,t,n){return e._keyHandlers.enter(e,t,n)},backspace:function(e,t,n){var i=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(Ae(n,i)){t.preventDefault();var o,r=Oe(n,i);if(!r)return;if(S(r.parentNode,i),o=d(r,i)){if(!o.isContentEditable)return void b(o);for(N(o,r,n,i),r=o.parentNode;r!==i&&!r.nextSibling;)r=r.parentNode;r!==i&&(r=r.nextSibling)&&L(r,i),e.setSelection(n)}else if(r){if(v(r,i,"UL")||v(r,i,"OL"))return e.decreaseListLevel(n);if(v(r,i,"BLOCKQUOTE"))return e.modifyBlocks(ht,n);e.setSelection(n),e._updatePath(n,!0)}}else e.setSelection(n),setTimeout(function(){je(e)},0);else t.preventDefault(),Ce(n,i),je(e,n)},delete:function(e,t,n){var i,o,r,a,l,s,u=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(xe(n,u)){if(t.preventDefault(),!(i=Oe(n,u)))return;if(S(i.parentNode,u),o=f(i,u)){if(!o.isContentEditable)return void b(o);for(N(i,o,n,u),o=i.parentNode;o!==u&&!o.nextSibling;)o=o.parentNode;o!==u&&(o=o.nextSibling)&&L(o,u),e.setSelection(n),e._updatePath(n,!0)}}else{if(r=n.cloneRange(),Me(n,u,u,u),a=n.endContainer,l=n.endOffset,a.nodeType===j&&(s=a.childNodes[l])&&"IMG"===s.nodeName)return t.preventDefault(),b(s),Te(n),void je(e,n);e.setSelection(r),setTimeout(function(){je(e)},0)}else t.preventDefault(),Ce(n,u),je(e,n)},tab:function(e,t,n){var i,o,r=e._root;if(e._removeZWS(),n.collapsed&&Ae(n,r))for(i=Oe(n,r);o=i.parentNode;){if("UL"===o.nodeName||"OL"===o.nodeName){t.preventDefault(),e.increaseListLevel(n);break}i=o}},"shift-tab":function(e,t,n){var i,o=e._root;e._removeZWS(),n.collapsed&&Ae(n,o)&&(i=n.startContainer,(v(i,o,"UL")||v(i,o,"OL"))&&(t.preventDefault(),e.decreaseListLevel(n)))},space:function(e,t,n){var i,o=e._root;if(e._recordUndoState(n),bt(n.startContainer,o,e),e._getRangeAndRemoveBookmark(n),i=n.endContainer,n.collapsed&&n.endOffset===_(i))do{if("A"===i.nodeName){n.setStartAfter(i);break}}while(!i.nextSibling&&(i=i.parentNode)&&i!==o);n.collapsed||(Ce(n,o),e._ensureBottomLine(),e.setSelection(n),e._updatePath(n,!0)),e.setSelection(n)},left:function(e){e._removeZWS()},right:function(e){e._removeZWS()}};Y&&X&&(He["meta-left"]=function(e,t){t.preventDefault();var n=lt(e);n&&n.modify&&n.modify("move","backward","lineboundary")},He["meta-right"]=function(e,t){t.preventDefault();var n=lt(e);n&&n.modify&&n.modify("move","forward","lineboundary")}),Y||(He.pageup=function(e){e.moveCursorToStart()},He.pagedown=function(e){e.moveCursorToEnd()}),He[ne+"b"]=De("B"),He[ne+"i"]=De("I"),He[ne+"u"]=De("U"),He[ne+"shift-7"]=De("S"),He[ne+"shift-5"]=De("SUB",{tag:"SUP"}),He[ne+"shift-6"]=De("SUP",{tag:"SUB"}),He[ne+"shift-8"]=Re("makeUnorderedList"),He[ne+"shift-9"]=Re("makeOrderedList"),He[ne+"["]=Re("decreaseQuoteLevel"),He[ne+"]"]=Re("increaseQuoteLevel"),He[ne+"d"]=Re("toggleCode"),He[ne+"y"]=Re("redo"),He[ne+"z"]=Re("undo"),He[ne+"shift-z"]=Re("redo");var Fe={1:10,2:13,3:16,4:18,5:24,6:32,7:48},$e={backgroundColor:{regexp:se,replace:function(e,t,n){return C(e,"SPAN",{class:t.highlight,style:"background-color:"+n})}},color:{regexp:se,replace:function(e,t,n){return C(e,"SPAN",{class:t.colour,style:"color:"+n})}},fontWeight:{regexp:/^bold|^700/i,replace:function(e){return C(e,"B")}},fontStyle:{regexp:/^italic/i,replace:function(e){return C(e,"I")}},fontFamily:{regexp:se,replace:function(e,t,n){return C(e,"SPAN",{class:t.fontFamily,style:"font-family:"+n})}},fontSize:{regexp:se,replace:function(e,t,n){return C(e,"SPAN",{class:t.fontSize,style:"font-size:"+n})}},textDecoration:{regexp:/^underline/i,replace:function(e){return C(e,"U")}}},Ue=function(e){return function(t,n){var i=C(t.ownerDocument,e);return n.replaceChild(i,t),i.appendChild(w(t)),i}},We=function(e,t,n){var i,o,r,a,l,s,u=e.style,c=e.ownerDocument;for(i in $e)o=$e[i],(r=u[i])&&o.regexp.test(r)&&(s=o.replace(c,n.classNames,r),l||(l=s),a&&a.appendChild(s),a=s,e.style[i]="");return l&&(a.appendChild(w(e)),"SPAN"===e.nodeName?t.replaceChild(l,e):e.appendChild(l)),a||e},qe={P:We,SPAN:We,STRONG:Ue("B"),EM:Ue("I"),INS:Ue("U"),STRIKE:Ue("S"),FONT:function(e,t,n){var i,o,r,a,l,s=e.face,u=e.size,c=e.color,d=e.ownerDocument,f=n.classNames;return s&&(i=C(d,"SPAN",{class:f.fontFamily,style:"font-family:"+s}),l=i,a=i),u&&(o=C(d,"SPAN",{class:f.fontSize,style:"font-size:"+Fe[u]+"px"}),l||(l=o),a&&a.appendChild(o),a=o),c&&/^#?([\dA-F]{3}){1,2}$/i.test(c)&&("#"!==c.charAt(0)&&(c="#"+c),r=C(d,"SPAN",{class:f.colour,style:"color:"+c}),l||(l=r),a&&a.appendChild(r),a=r),l||(l=a=C(d,"SPAN")),t.replaceChild(l,e),a.appendChild(w(e)),a},TT:function(e,t,n){var i=C(e.ownerDocument,"SPAN",{class:n.classNames.fontFamily,style:'font-family:menlo,consolas,"courier new",monospace'});return t.replaceChild(i,e),i.appendChild(w(e)),i}},Ke=/^(?:A(?:DDRESS|RTICLE|SIDE|UDIO)|BLOCKQUOTE|CAPTION|D(?:[DLT]|IV)|F(?:IGURE|IGCAPTION|OOTER)|H[1-6]|HEADER|L(?:ABEL|EGEND|I)|O(?:L|UTPUT)|P(?:RE)?|SECTION|T(?:ABLE|BODY|D|FOOT|H|HEAD|R)|COL(?:GROUP)?|UL|B|I)$/,Ve=/^(?:HEAD|META|STYLE)/,ze=new i(null,4|U),Ye=function e(t,n,i){var o,r,a,s,u,c,d,f,h,g,p,v,m=t.childNodes;for(o=t;l(o);)o=o.parentNode;for(ze.root=o,r=0,a=m.length;r<a;r+=1)if(s=m[r],u=s.nodeName,c=s.nodeType,d=qe[u],c===j){if(f=s.childNodes.length,d)s=d(s,t,n);else{if(Ve.test(u)){t.removeChild(s),r-=1,a-=1;continue}if(!Ke.test(u)&&!l(s)){r-=1,a+=f-1,t.replaceChild(w(s),s);continue}}f&&e(s,n,i||"PRE"===u)}else{if(c===H){if(p=s.data,h=!se.test(p.charAt(0)),g=!se.test(p.charAt(p.length-1)),i||!h&&!g)continue;if(h){for(ze.currentNode=s;(v=ze.previousPONode())&&!("IMG"===(u=v.nodeName)||"#text"===u&&se.test(v.data));)if(!l(v)){v=null;break}p=p.replace(/^[ \t\r\n]+/g,v?" ":"")}if(g){for(ze.currentNode=s;(v=ze.nextNode())&&!("IMG"===u||"#text"===u&&se.test(v.data));)if(!l(v)){v=null;break}p=p.replace(/[ \t\r\n]+$/g,v?" ":"")}if(p){s.data=p;continue}}t.removeChild(s),r-=1,a-=1}return t},Ge=function e(t){for(var n,i=t.childNodes,o=i.length;o--;)n=i[o],n.nodeType!==j||r(n)?n.nodeType!==H||n.data||t.removeChild(n):(e(n),l(n)&&!n.firstChild&&t.removeChild(n))},Xe=function(e){return e.nodeType===j?"BR"===e.nodeName:se.test(e.data)},Ze=function(e,t){for(var n,o=e.parentNode;l(o);)o=o.parentNode;return n=new i(o,4|U,Xe),n.currentNode=e,!!n.nextNode()||t&&!n.previousNode()},Qe=function(e,t,n){var i,o,r,a=e.querySelectorAll("BR"),s=[],u=a.length;for(i=0;i<u;i+=1)s[i]=Ze(a[i],n);for(;u--;)o=a[u],(r=o.parentNode)&&(s[u]?l(r)||S(r,t):b(o))},Je=function(e,t,n,i){var o,r,a=t.ownerDocument.body,l=i.willCutCopy;Qe(t,n,!0),t.setAttribute("style","position:fixed;overflow:hidden;bottom:100%;right:100%;"),a.appendChild(t),o=t.innerHTML,r=t.innerText||t.textContent,l&&(o=l(o)),G&&(r=r.replace(/\r?\n/g,"\r\n")),e.setData("text/html",o),e.setData("text/plain",r),a.removeChild(t)},et=function(e){var t,n,i,o,r,a,l,s=e.clipboardData,u=this.getSelection(),c=this._root,d=this;if(u.collapsed)return void e.preventDefault();if(this.saveUndoState(u),J||z||!s)setTimeout(function(){try{d._ensureBottomLine()}catch(e){d.didError(e)}},0);else{for(t=Oe(u,c),n=Ne(u,c),i=t===n&&t||c,o=Ce(u,c),r=u.commonAncestorContainer,r.nodeType===H&&(r=r.parentNode);r&&r!==i;)a=r.cloneNode(!1),a.appendChild(o),o=a,r=r.parentNode;l=this.createElement("div"),l.appendChild(o),Je(s,l,c,this._config),e.preventDefault()}this.setSelection(u)},tt=function(e){var t,n,i,o,r,a,l,s=e.clipboardData,u=this.getSelection(),c=this._root;if(!J&&!z&&s){for(t=Oe(u,c),n=Ne(u,c),i=t===n&&t||c,u=u.cloneRange(),Te(u),Me(u,i,i,c),o=u.cloneContents(),r=u.commonAncestorContainer,r.nodeType===H&&(r=r.parentNode);r&&r!==i;)a=r.cloneNode(!1),a.appendChild(o),o=a,r=r.parentNode;l=this.createElement("div"),l.appendChild(o),Je(s,l,c,this._config),e.preventDefault()}},nt=function(e){var t,n,i,o,r,a=e.clipboardData,l=a&&a.items,s=this.isShiftDown,u=!1,c=!1,d=!1,f=null,h=null,g=this;if(l){for(t=l.length;t--;)n=l[t],i=n.type,"text/html"===i?h=n:"text/plain"===i||"text/uri-list"===i?f=n:"text/rtf"===i?c=!0:/^image\/.*/.test(i)&&(d=!0);if(d&&(!c||!h))return e.preventDefault(),this.fireEvent("dragover",{dataTransfer:a,preventDefault:function(){u=!0}}),void(u&&this.fireEvent("drop",{dataTransfer:a}));if(!J)return e.preventDefault(),void(!h||s&&f?f&&f.getAsString(function(e){g.insertPlainText(e,!0)}):h.getAsString(function(e){g.insertHTML(e,!0)}))}if(o=a&&a.types,!J&&o&&(ue.call(o,"text/html")>-1||!X&&ue.call(o,"text/plain")>-1&&ue.call(o,"text/rtf")<0))return e.preventDefault(),void(!s&&(r=a.getData("text/html"))?this.insertHTML(r,!0):((r=a.getData("text/plain"))||(r=a.getData("text/uri-list")))&&this.insertPlainText(r,!0));this._awaitingPaste=!0;var p=this._doc.body,v=this.getSelection(),m=v.startContainer,y=v.startOffset,_=v.endContainer,k=v.endOffset,w=this.createElement("DIV",{contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"});p.appendChild(w),v.selectNodeContents(w),this.setSelection(v),setTimeout(function(){try{g._awaitingPaste=!1;for(var e,t,n="",i=w;w=i;)i=w.nextSibling,b(w),e=w.firstChild,e&&e===w.lastChild&&"DIV"===e.nodeName&&(w=e),n+=w.innerHTML;t=g.createRange(m,y,_,k),g.setSelection(t),n&&g.insertHTML(n,!0)}catch(e){g.didError(e)}},0)},it=function(e){for(var t=e.dataTransfer.types,n=t.length,i=!1,o=!1;n--;)switch(t[n]){case"text/plain":i=!0;break;case"text/html":o=!0;break;default:return}(o||i)&&this.saveUndoState()},ot=B.prototype,rt=function(e,t,n){var i=n._doc,o=e?DOMPurify.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0}):null;return o?i.importNode(o,!0):i.createDocumentFragment()};ot.setConfig=function(e){return e=x({blockTag:"DIV",blockAttributes:null,tagAttributes:{blockquote:null,ul:null,ol:null,li:null,a:null},classNames:{colour:"colour",fontFamily:"font",fontSize:"size",highlight:"highlight"},leafNodeNames:he,undo:{documentSizeThreshold:-1,undoLimit:-1},isInsertedHTMLSanitized:!0,isSetHTMLSanitized:!0,sanitizeToDOMFragment:"undefined"!=typeof DOMPurify&&DOMPurify.isSupported?rt:null,willCutCopy:null},e,!0),e.blockTag=e.blockTag.toUpperCase(),this._config=e,this},ot.createElement=function(e,t,n){return C(this._doc,e,t,n)},ot.createDefaultBlock=function(e){var t=this._config;return E(this.createElement(t.blockTag,t.blockAttributes,e),this._root)},ot.didError=function(e){console.log(e)},ot.getDocument=function(){return this._doc},ot.getRoot=function(){return this._root},ot.modifyDocument=function(e){var t=this._mutation;t&&(t.takeRecords().length&&this._docWasChanged(),t.disconnect()),this._ignoreAllChanges=!0,e(),this._ignoreAllChanges=!1,t&&(t.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._ignoreChange=!1)};var at={pathChange:1,select:1,input:1,undoStateChange:1};ot.fireEvent=function(e,t){var n,i,o,r=this._events[e];if(/^(?:focus|blur)/.test(e))if(n=this._root===this._doc.activeElement,"focus"===e){if(!n||this._isFocused)return this;this._isFocused=!0}else{if(n||!this._isFocused)return this;this._isFocused=!1}if(r)for(t||(t={}),t.type!==e&&(t.type=e),r=r.slice(),i=r.length;i--;){o=r[i];try{o.handleEvent?o.handleEvent(t):o.call(this,t)}catch(t){t.details="Squire: fireEvent error. Event type: "+e,this.didError(t)}}return this},ot.destroy=function(){var e,t=this._events;for(e in t)this.removeEventListener(e);this._mutation&&this._mutation.disconnect(),delete this._root.__squire__,this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0},ot.handleEvent=function(e){this.fireEvent(e.type,e)},ot.addEventListener=function(e,t){var n=this._events[e],i=this._root;return t?(n||(n=this._events[e]=[],at[e]||("selectionchange"===e&&(i=this._doc),i.addEventListener(e,this,!0))),n.push(t),this):(this.didError({name:"Squire: addEventListener with null or undefined fn",message:"Event type: "+e}),this)},ot.removeEventListener=function(e,t){var n,i=this._events[e],o=this._root;if(i){if(t)for(n=i.length;n--;)i[n]===t&&i.splice(n,1);else i.length=0;i.length||(delete this._events[e],at[e]||("selectionchange"===e&&(o=this._doc),o.removeEventListener(e,this,!0)))}return this},ot.createRange=function(e,t,n,i){if(e instanceof this._win.Range)return e.cloneRange();var o=this._doc.createRange();return o.setStart(e,t),n?o.setEnd(n,i):o.setEnd(e,t),o},ot.getCursorPosition=function(e){if(!e&&!(e=this.getSelection())||!e.getBoundingClientRect)return null;var t,n,i=e.getBoundingClientRect();return i&&!i.top&&(this._ignoreChange=!0,t=this._doc.createElement("SPAN"),t.textContent=W,ke(e,t),i=t.getBoundingClientRect(),n=t.parentNode,n.removeChild(t),O(n,e)),i},ot._moveCursorTo=function(e){var t=this._root,n=this.createRange(t,e?0:t.childNodes.length);return Te(n),this.setSelection(n),this},ot.moveCursorToStart=function(){return this._moveCursorTo(!0)},ot.moveCursorToEnd=function(){return this._moveCursorTo(!1)};var lt=function(e){return e._win.getSelection()||null};ot.setSelection=function(e){if(e)if(this._lastSelection=e,this._isFocused)if(V&&!this._restoreSelection)P.call(this),this.blur(),this.focus();else{z&&this._win.focus();var t=lt(this);t&&(t.removeAllRanges(),t.addRange(e))}else P.call(this);return this},ot.getSelection=function(){var e,t,n,i,o=lt(this),a=this._root;return this._isFocused&&o&&o.rangeCount&&(e=o.getRangeAt(0).cloneRange(),t=e.startContainer,n=e.endContainer,t&&r(t)&&e.setStartBefore(t),n&&r(n)&&e.setEndBefore(n)),e&&m(a,e.commonAncestorContainer)?this._lastSelection=e:(e=this._lastSelection,i=e.commonAncestorContainer,m(i.ownerDocument,i)||(e=null)),e||(e=this.createRange(a.firstChild,0)),e},ot.getSelectedText=function(){var e=this.getSelection();if(!e||e.collapsed)return"";var t,n=new i(e.commonAncestorContainer,4|U,function(t){return Se(e,t,!0)}),o=e.startContainer,r=e.endContainer,a=n.currentNode=o,s="",u=!1;for(n.filter(a)||(a=n.nextNode());a;)a.nodeType===H?(t=a.data)&&/\S/.test(t)&&(a===r&&(t=t.slice(0,e.endOffset)),a===o&&(t=t.slice(e.startOffset)),s+=t,u=!0):("BR"===a.nodeName||u&&!l(a))&&(s+="\n",u=!1),a=n.nextNode();return s},ot.getPath=function(){return this._path};var st=function(e,t){for(var n,o,r,a=new i(e,4);o=a.nextNode();)for(;(r=o.data.indexOf(W))>-1&&(!t||o.parentNode!==t);){if(1===o.length){do{n=o.parentNode,n.removeChild(o),o=n,a.currentNode=n}while(l(o)&&!_(o));break}o.deleteData(r,1)}};ot._didAddZWS=function(){this._hasZWS=!0},ot._removeZWS=function(){this._hasZWS&&(st(this._root),this._hasZWS=!1)},ot._updatePath=function(e,t){if(e){var n,i=e.startContainer,o=e.endContainer;(t||i!==this._lastAnchorNode||o!==this._lastFocusNode)&&(this._lastAnchorNode=i,this._lastFocusNode=o,n=i&&o?i===o?y(o,this._root,this._config):"(selection)":"",this._path!==n&&(this._path=n,this.fireEvent("pathChange",{path:n}))),this.fireEvent(e.collapsed?"cursor":"select",{range:e})}},ot._updatePathOnEvent=function(e){var t=this;t._isFocused&&!t._willUpdatePath&&(t._willUpdatePath=!0,setTimeout(function(){t._willUpdatePath=!1,t._updatePath(t.getSelection())},0))},ot.focus=function(){return this._root.focus(),te&&this.fireEvent("focus"),this},ot.blur=function(){return this._root.blur(),te&&this.fireEvent("blur"),this};var ut="squire-selection-end";ot._saveRangeToBookmark=function(e){var t,n=this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),i=this.createElement("INPUT",{id:ut,type:"hidden"});ke(e,n),e.collapse(!1),ke(e,i),2&n.compareDocumentPosition(i)&&(n.id=ut,i.id="squire-selection-start",t=n,n=i,i=t),e.setStartAfter(n),e.setEndBefore(i)},ot._getRangeAndRemoveBookmark=function(e){var t=this._root,n=t.querySelector("#squire-selection-start"),i=t.querySelector("#"+ut);if(n&&i){var o=n.parentNode,r=i.parentNode,a=ue.call(o.childNodes,n),l=ue.call(r.childNodes,i);o===r&&(l-=1),b(n),b(i),e||(e=this._doc.createRange()),e.setStart(o,a),e.setEnd(r,l),O(o,e),o!==r&&O(r,e),e.collapsed&&(o=e.startContainer,o.nodeType===H&&(r=o.childNodes[e.startOffset],r&&r.nodeType===H||(r=o.childNodes[e.startOffset-1]),r&&r.nodeType===H&&(e.setStart(r,0),e.collapse(!0))))}return e||null},ot._keyUpDetectChange=function(e){var t=e.keyCode;e.ctrlKey||e.metaKey||e.altKey||!(t<16||t>20)||!(t<33||t>45)||this._docWasChanged()},ot._docWasChanged=function(){if(le&&(ye=new WeakMap),!this._ignoreAllChanges){if(ae&&this._ignoreChange)return void(this._ignoreChange=!1);this._isInUndoState&&(this._isInUndoState=!1,this.fireEvent("undoStateChange",{canUndo:!0,canRedo:!1})),this.fireEvent("input")}},ot._recordUndoState=function(e,t){if(!this._isInUndoState||t){var n,i=this._undoIndex,o=this._undoStack,r=this._config.undo,a=r.documentSizeThreshold,l=r.undoLimit;t||(i+=1),i<this._undoStackLength&&(o.length=this._undoStackLength=i),e&&this._saveRangeToBookmark(e),n=this._getHTML(),a>-1&&2*n.length>a&&l>-1&&i>l&&(o.splice(0,i-l),i=l,this._undoStackLength=l),o[i]=n,this._undoIndex=i,this._undoStackLength+=1,this._isInUndoState=!0}},ot.saveUndoState=function(e){return e===n&&(e=this.getSelection()),this._recordUndoState(e,this._isInUndoState),this._getRangeAndRemoveBookmark(e),this},ot.undo=function(){if(0!==this._undoIndex||!this._isInUndoState){this._recordUndoState(this.getSelection(),!1),this._undoIndex-=1,this._setHTML(this._undoStack[this._undoIndex]);var e=this._getRangeAndRemoveBookmark();e&&this.setSelection(e),this._isInUndoState=!0,this.fireEvent("undoStateChange",{canUndo:0!==this._undoIndex,canRedo:!0}),this.fireEvent("input")}return this},ot.redo=function(){var e=this._undoIndex,t=this._undoStackLength;if(e+1<t&&this._isInUndoState){this._undoIndex+=1,this._setHTML(this._undoStack[this._undoIndex]);var n=this._getRangeAndRemoveBookmark();n&&this.setSelection(n),this.fireEvent("undoStateChange",{canUndo:!0,canRedo:e+2<t}),this.fireEvent("input")}return this},ot.hasFormat=function(e,t,n){if(e=e.toUpperCase(),t||(t={}),!n&&!(n=this.getSelection()))return!1;!n.collapsed&&n.startContainer.nodeType===H&&n.startOffset===n.startContainer.length&&n.startContainer.nextSibling&&n.setStartBefore(n.startContainer.nextSibling),!n.collapsed&&n.endContainer.nodeType===H&&0===n.endOffset&&n.endContainer.previousSibling&&n.setEndAfter(n.endContainer.previousSibling);var o,r,a=this._root,l=n.commonAncestorContainer;if(v(l,a,e,t))return!0;if(l.nodeType===H)return!1;o=new i(l,4,function(e){return Se(n,e,!0)});for(var s=!1;r=o.nextNode();){if(!v(r,a,e,t))return!1;s=!0}return s},ot.getFontInfo=function(e){var t,i,o,r={color:n,backgroundColor:n,family:n,size:n},a=0;if(!e&&!(e=this.getSelection()))return r;if(t=e.commonAncestorContainer,e.collapsed||t.nodeType===H)for(t.nodeType===H&&(t=t.parentNode);a<4&&t;)(i=t.style)&&(!r.color&&(o=i.color)&&(r.color=o,a+=1),!r.backgroundColor&&(o=i.backgroundColor)&&(r.backgroundColor=o,a+=1),!r.family&&(o=i.fontFamily)&&(r.family=o,a+=1),!r.size&&(o=i.fontSize)&&(r.size=o,a+=1)),t=t.parentNode;return r},ot._addFormat=function(e,t,n){var o,r,a,s,u,c,d,f,h=this._root;if(n.collapsed){for(o=E(this.createElement(e,t),h),ke(n,o),n.setStart(o.firstChild,o.firstChild.length),n.collapse(!0),f=o;l(f);)f=f.parentNode;st(f,o)}else{if(r=new i(n.commonAncestorContainer,4|U,function(e){return(e.nodeType===H||"BR"===e.nodeName||"IMG"===e.nodeName)&&Se(n,e,!0)}),a=n.startContainer,u=n.startOffset,s=n.endContainer,c=n.endOffset,r.currentNode=a,r.filter(a)||(a=r.nextNode(),u=0),!a)return n;do{d=r.currentNode,!v(d,h,e,t)&&(d===s&&d.length>c&&d.splitText(c),d===a&&u&&(d=d.splitText(u),s===a&&(s=d,c-=u),a=d,u=0),o=this.createElement(e,t),k(d,o),o.appendChild(d))}while(r.nextNode());s.nodeType!==H&&(d.nodeType===H?(s=d,c=d.length):(s=d.parentNode,c=1)),n=this.createRange(a,u,s,c)}return n},ot._removeFormat=function(e,t,n,i){this._saveRangeToBookmark(n);var o,r=this._doc;n.collapsed&&(oe?(o=r.createTextNode(W),this._didAddZWS()):o=r.createTextNode(""),ke(n,o));for(var a=n.commonAncestorContainer;l(a);)a=a.parentNode;var s=n.startContainer,u=n.startOffset,c=n.endContainer,d=n.endOffset,f=[],h=function(e,t){if(!Se(n,e,!1)){var i,o,r=e.nodeType===H;if(!Se(n,e,!0))return void("INPUT"===e.nodeName||r&&!e.data||f.push([t,e]));if(r)e===c&&d!==e.length&&f.push([t,e.splitText(d)]),e===s&&u&&(e.splitText(u),f.push([t,e]));else for(i=e.firstChild;i;i=o)o=i.nextSibling,h(i,t)}},g=Array.prototype.filter.call(a.getElementsByTagName(e),function(i){return Se(n,i,!0)&&p(i,e,t)});return i||g.forEach(function(e){h(e,e)}),f.forEach(function(e){var t=e[0].cloneNode(!1),n=e[1];k(n,t),t.appendChild(n)}),g.forEach(function(e){k(e,w(e))}),this._getRangeAndRemoveBookmark(n),o&&n.collapse(!1),O(a,n),n},ot.changeFormat=function(e,t,n,i){return n||(n=this.getSelection())?(this.saveUndoState(n),t&&(n=this._removeFormat(t.tag.toUpperCase(),t.attributes||{},n,i)),e&&(n=this._addFormat(e.tag.toUpperCase(),e.attributes||{},n)),this.setSelection(n),this._updatePath(n,!0),ae||this._docWasChanged(),this):this};var ct={DT:"DD",DD:"DT",LI:"LI",PRE:"PRE"},dt=function(e,t,n,i){var o=ct[t.nodeName],r=null,a=T(n,i,t.parentNode,e._root),l=e._config;return o||(o=l.blockTag,r=l.blockAttributes),p(a,o,r)||(t=C(a.ownerDocument,o,r),a.dir&&(t.dir=a.dir),k(a,t),t.appendChild(w(a)),a=t),a};ot.forEachBlock=function(e,t,n){if(!n&&!(n=this.getSelection()))return this;t&&this.saveUndoState(n);var i=this._root,o=Oe(n,i),r=Ne(n,i);if(o&&r)do{if(e(o)||o===r)break}while(o=f(o,i));return t&&(this.setSelection(n),this._updatePath(n,!0),ae||this._docWasChanged()),this},ot.modifyBlocks=function(e,t){if(!t&&!(t=this.getSelection()))return this;this._recordUndoState(t,this._isInUndoState);var n,i=this._root;return Be(t,i),Me(t,i,i,i),n=we(t,i,i),ke(t,e.call(this,n)),t.endOffset<t.endContainer.childNodes.length&&L(t.endContainer.childNodes[t.endOffset],i),L(t.startContainer.childNodes[t.startOffset],i),this._getRangeAndRemoveBookmark(t),this.setSelection(t),this._updatePath(t,!0),ae||this._docWasChanged(),this};var ft=function(e){return this.createElement("BLOCKQUOTE",this._config.tagAttributes.blockquote,[e])},ht=function(e){var t=this._root,n=e.querySelectorAll("blockquote");return Array.prototype.filter.call(n,function(e){return!v(e.parentNode,t,"BLOCKQUOTE")}).forEach(function(e){k(e,w(e))}),e},gt=function(){return this.createDefaultBlock([this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),this.createElement("INPUT",{id:ut,type:"hidden"})])},pt=function(e,t,n){for(var i,o,r,a,l=c(t,e._root),s=e._config.tagAttributes,u=s[n.toLowerCase()],d=s.li;i=l.nextNode();)"LI"===i.parentNode.nodeName&&(i=i.parentNode,l.currentNode=i.lastChild),"LI"!==i.nodeName?(a=e.createElement("LI",d),i.dir&&(a.dir=i.dir),(r=i.previousSibling)&&r.nodeName===n?(r.appendChild(a),b(i)):k(i,e.createElement(n,u,[a])),a.appendChild(w(i)),l.currentNode=a):(i=i.parentNode,(o=i.nodeName)!==n&&/^[OU]L$/.test(o)&&k(i,e.createElement(n,u,[w(i)])))},vt=function(e){return pt(this,e,"UL"),e},mt=function(e){return pt(this,e,"OL"),e},yt=function(e){var t,n,i,o,r,a=e.querySelectorAll("UL, OL"),l=e.querySelectorAll("LI"),u=this._root;for(t=0,n=a.length;t<n;t+=1)i=a[t],o=w(i),S(o,u),k(i,o);for(t=0,n=l.length;t<n;t+=1)r=l[t],s(r)?k(r,this.createDefaultBlock([w(r)])):(S(r,u),k(r,w(r)));return e},_t=function(e,t){for(var n=e.commonAncestorContainer,i=e.startContainer,o=e.endContainer;n&&n!==t&&!/^[OU]L$/.test(n.nodeName);)n=n.parentNode;if(!n||n===t)return null;for(i===n&&(i=i.childNodes[e.startOffset]),o===n&&(o=o.childNodes[e.endOffset]);i&&i.parentNode!==n;)i=i.parentNode;for(;o&&o.parentNode!==n;)o=o.parentNode;return[n,i,o]};ot.increaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=_t(e,t);if(!n)return this.focus();var i=n[0],o=n[1],r=n[2];if(!o||o===i.firstChild)return this.focus();this._recordUndoState(e,this._isInUndoState);var a,l,s=i.nodeName,u=o.previousSibling;u.nodeName!==s&&(a=this._config.tagAttributes[s.toLowerCase()],u=this.createElement(s,a),i.insertBefore(u,o));do{l=o===r?null:o.nextSibling,u.appendChild(o)}while(o=l);return l=u.nextSibling,l&&L(l,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),ae||this._docWasChanged(),this.focus()},ot.decreaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=_t(e,t);if(!n)return this.focus();var i,o,r,a,l=n[0],s=n[1],u=n[2];if(s||(s=l.firstChild),u||(u=l.lastChild),this._recordUndoState(e,this._isInUndoState),s){if(i=l.parentNode,r=u.nextSibling?T(l,u.nextSibling,i,t):l.nextSibling,i!==t&&"LI"===i.nodeName){for(i=i.parentNode;r;)o=r.nextSibling,u.appendChild(r),r=o;r=l.parentNode.nextSibling}a=!/^[OU]L$/.test(i.nodeName);do{o=s===u?null:s.nextSibling,l.removeChild(s),a&&"LI"===s.nodeName&&(s=this.createDefaultBlock([w(s)])),i.insertBefore(s,r)}while(s=o)}return l.firstChild||b(l),r&&L(r,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),ae||this._docWasChanged(),this.focus()},ot._ensureBottomLine=function(){var e=this._root,t=e.lastElementChild;t&&t.nodeName===this._config.blockTag&&s(t)||e.appendChild(this.createDefaultBlock())},ot.setKeyHandler=function(e,t){return this._keyHandlers[e]=t,this},ot._getHTML=function(){return this._root.innerHTML},ot._setHTML=function(e){var t=this._root,n=t;n.innerHTML=e;do{E(n,t)}while(n=f(n,t));this._ignoreChange=!0},ot.getHTML=function(e){var t,n,i,o,r,a,l=[];if(e&&(a=this.getSelection())&&this._saveRangeToBookmark(a),ie)for(t=this._root,n=t;n=f(n,t);)n.textContent||n.querySelector("BR")||(i=this.createElement("BR"),n.appendChild(i),l.push(i));if(o=this._getHTML().replace(/\u200B/g,""),ie)for(r=l.length;r--;)b(l[r]);return a&&this._getRangeAndRemoveBookmark(a),o},ot.setHTML=function(e){var t,n,i,o=this._config,r=o.isSetHTMLSanitized?o.sanitizeToDOMFragment:null,a=this._root;"function"==typeof r?n=r(e,!1,this):(t=this.createElement("DIV"),t.innerHTML=e,n=this._doc.createDocumentFragment(),n.appendChild(w(t))),Ye(n,o),Qe(n,a,!1),S(n,a);for(var l=n;l=f(l,a);)E(l,a);for(this._ignoreChange=!0;i=a.lastChild;)a.removeChild(i);a.appendChild(n),E(a,a),this._undoIndex=-1,this._undoStack.length=0,this._undoStackLength=0,this._isInUndoState=!1;var s=this._getRangeAndRemoveBookmark()||this.createRange(a.firstChild,0);return this.saveUndoState(s),this._lastSelection=s,P.call(this),this._updatePath(s,!0),this},ot.insertElement=function(e,t){if(t||(t=this.getSelection()),t.collapse(!0),l(e))ke(t,e),t.setStartAfter(e);else{for(var n,i,o=this._root,r=Oe(t,o)||o;r!==o&&!r.nextSibling;)r=r.parentNode;r!==o&&(n=r.parentNode,i=T(n,r.nextSibling,o,o)),i?o.insertBefore(e,i):(o.appendChild(e),i=this.createDefaultBlock(),o.appendChild(i)),t.setStart(i,0),t.setEnd(i,0),Te(t)}return this.focus(),this.setSelection(t),this._updatePath(t),ae||this._docWasChanged(),this},ot.insertImage=function(e,t){var n=this.createElement("IMG",x({src:e},t,!0));return this.insertElement(n),n},ot.linkRegExp=/\b((?:(?:ht|f)tps?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,}\/)(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))|([\w\-.%+]+@(?:[\w\-]+\.)+[A-Z]{2,}\b)(?:\?[^&?\s]+=[^&?\s]+(?:&[^&?\s]+=[^&?\s]+)*)?/i;var bt=function(e,t,n){var o,r,a,l,s,u,c,d=e.ownerDocument,f=new i(e,4,function(e){return!v(e,t,"A")}),h=n.linkRegExp,g=n._config.tagAttributes.a;if(h)for(;o=f.nextNode();)for(r=o.data,a=o.parentNode;l=h.exec(r);)s=l.index,u=s+l[0].length,s&&(c=d.createTextNode(r.slice(0,s)),a.insertBefore(c,o)),c=n.createElement("A",x({href:l[1]?/^(?:ht|f)tps?:/i.test(l[1])?l[1]:"http://"+l[1]:"mailto:"+l[0]},g,!1)),c.textContent=r.slice(s,u),a.insertBefore(c,o),o.data=r=r.slice(u)};ot.insertHTML=function(e,t){var n,i,o,r,a,l,s,u=this._config,c=u.isInsertedHTMLSanitized?u.sanitizeToDOMFragment:null,d=this.getSelection(),h=this._doc;"function"==typeof c?r=c(e,t,this):(t&&(n=e.indexOf("\x3c!--StartFragment--\x3e"),i=e.lastIndexOf("\x3c!--EndFragment--\x3e"),n>-1&&i>-1&&(e=e.slice(n+20,i))),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(e)&&(e="<TR>"+e+"</TR>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(e)&&(e="<TABLE>"+e+"</TABLE>"),o=this.createElement("DIV"),o.innerHTML=e,r=h.createDocumentFragment(),r.appendChild(w(o))),this.saveUndoState(d);try{for(a=this._root,l=r,s={fragment:r,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},bt(r,r,this),Ye(r,u),Qe(r,a,!1),Ge(r),r.normalize();l=f(l,r);)E(l,a);t&&this.fireEvent("willPaste",s),s.defaultPrevented||(Ee(d,s.fragment,a),ae||this._docWasChanged(),d.collapse(!1),this._ensureBottomLine()),this.setSelection(d),this._updatePath(d,!0),t&&this.focus()}catch(e){this.didError(e)}return this};var kt=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")};ot.insertPlainText=function(e,t){var n=this.getSelection();if(n.collapsed&&v(n.startContainer,this._root,"PRE")){var i,o,r=n.startContainer,a=n.startOffset;return r&&r.nodeType===H||(i=this._doc.createTextNode(""),r.insertBefore(i,r.childNodes[a]),r=i,a=0),o={text:e,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},t&&this.fireEvent("willPaste",o),o.defaultPrevented||(e=o.text,r.insertData(a,e),n.setStart(r,a+e.length),n.collapse(!0)),this.setSelection(n),this}var l,s,u,c,d=e.split("\n"),f=this._config,h=f.blockTag,g=f.blockAttributes,p="</"+h+">",m="<"+h;for(l in g)m+=" "+l+'="'+kt(g[l])+'"';for(m+=">",s=0,u=d.length;s<u;s+=1)c=d[s],c=kt(c).replace(/ (?= )/g,"&nbsp;"),d[s]=m+(c||"<BR>")+p;return this.insertHTML(d.join(""),t)};var wt=function(e,t,n){return function(){return this[e](t,n),this.focus()}};ot.addStyles=function(e){if(e){var t=this._doc.documentElement.firstChild,n=this.createElement("STYLE",{type:"text/css"});n.appendChild(this._doc.createTextNode(e)),t.appendChild(n)}return this},ot.bold=wt("changeFormat",{tag:"B"}),ot.italic=wt("changeFormat",{tag:"I"}),ot.underline=wt("changeFormat",{tag:"U"}),ot.strikethrough=wt("changeFormat",{tag:"S"}),ot.subscript=wt("changeFormat",{tag:"SUB"},{tag:"SUP"}),ot.superscript=wt("changeFormat",{tag:"SUP"},{tag:"SUB"}),ot.removeBold=wt("changeFormat",null,{tag:"B"}),ot.removeItalic=wt("changeFormat",null,{tag:"I"}),ot.removeUnderline=wt("changeFormat",null,{tag:"U"}),ot.removeStrikethrough=wt("changeFormat",null,{tag:"S"}),ot.removeSubscript=wt("changeFormat",null,{tag:"SUB"}),ot.removeSuperscript=wt("changeFormat",null,{tag:"SUP"}),ot.makeLink=function(e,t){var n=this.getSelection();if(n.collapsed){var i=e.indexOf(":")+1;if(i)for(;"/"===e[i];)i+=1;ke(n,this._doc.createTextNode(e.slice(i)))}return t=x(x({href:e},t,!0),this._config.tagAttributes.a,!1),this.changeFormat({tag:"A",attributes:t},{tag:"A"},n),this.focus()},ot.removeLink=function(){return this.changeFormat(null,{tag:"A"},this.getSelection(),!0),this.focus()},ot.setFontFace=function(e){var t=this._config.classNames.fontFamily;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"font-family: "+e+", sans-serif;"}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},ot.setFontSize=function(e){var t=this._config.classNames.fontSize;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"font-size: "+("number"==typeof e?e+"px":e)}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},ot.setTextColour=function(e){var t=this._config.classNames.colour;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"color:"+e}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},ot.setHighlightColour=function(e){var t=this._config.classNames.highlight;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"background-color:"+e}}:e,{tag:"SPAN",attributes:{class:t}}),this.focus()},ot.setTextAlignment=function(e){return this.forEachBlock(function(t){var n=t.className.split(/\s+/).filter(function(e){return!!e&&!/^align/.test(e)}).join(" ");e?(t.className=n+" align-"+e,t.style.textAlign=e):(t.className=n,t.style.textAlign="")},!0),this.focus()},ot.setTextDirection=function(e){return this.forEachBlock(function(t){e?t.dir=e:t.removeAttribute("dir")},!0),this.focus()};var Ct=function(e){for(var t,n=this._root,o=this._doc,r=o.createDocumentFragment(),a=c(e,n);t=a.nextNode();){var l,s,u=t.querySelectorAll("BR"),d=[],f=u.length;for(l=0;l<f;l+=1)d[l]=Ze(u[l],!1);for(;f--;)s=u[f],d[f]?k(s,o.createTextNode("\n")):b(s);for(u=t.querySelectorAll("CODE"),f=u.length;f--;)b(u[f]);r.childNodes.length&&r.appendChild(o.createTextNode("\n")),r.appendChild(w(t))}for(a=new i(r,4);t=a.nextNode();)t.data=t.data.replace(/ /g," ");return r.normalize(),E(this.createElement("PRE",this._config.tagAttributes.pre,[r]),n)},Et=function(e){for(var t,n,o,r,a,l,s=this._doc,u=this._root,c=e.querySelectorAll("PRE"),d=c.length;d--;){for(t=c[d],n=new i(t,4);o=n.nextNode();){for(r=o.data,r=r.replace(/ (?= )/g," "),a=s.createDocumentFragment();(l=r.indexOf("\n"))>-1;)a.appendChild(s.createTextNode(r.slice(0,l))),a.appendChild(s.createElement("BR")),r=r.slice(l+1);o.parentNode.insertBefore(a,o),o.data=r}S(t,u),k(t,w(t))}return e};ot.code=function(){var e=this.getSelection();return e.collapsed||u(e.commonAncestorContainer)?this.modifyBlocks(Ct,e):this.changeFormat({tag:"CODE",attributes:this._config.tagAttributes.code},null,e),this.focus()},ot.removeCode=function(){var e=this.getSelection();return v(e.commonAncestorContainer,this._root,"PRE")?this.modifyBlocks(Et,e):this.changeFormat(null,{tag:"CODE"},e),this.focus()},ot.toggleCode=function(){return this.hasFormat("PRE")||this.hasFormat("CODE")?this.removeCode():this.code(),this},ot.removeAllFormatting=function(e){if(!e&&!(e=this.getSelection())||e.collapsed)return this;for(var t=this._root,n=e.commonAncestorContainer;n&&!s(n);)n=n.parentNode;if(n||(Be(e,t),n=t),n.nodeType===H)return this;this.saveUndoState(e),Me(e,n,n,t);for(var i,o,r=n.ownerDocument,a=e.startContainer,l=e.startOffset,u=e.endContainer,c=e.endOffset,d=r.createDocumentFragment(),f=r.createDocumentFragment(),h=T(u,c,n,t),g=T(a,l,n,t);g!==h;)i=g.nextSibling,d.appendChild(g),g=i;return D(this,d,f),f.normalize(),g=f.firstChild,i=f.lastChild,o=n.childNodes,g?(n.insertBefore(f,h),l=ue.call(o,g),c=ue.call(o,i)+1):(l=ue.call(o,h),c=l),e.setStart(n,l),e.setEnd(n,c),O(n,e),Te(e),this.setSelection(e),this._updatePath(e,!0),this.focus()},ot.increaseQuoteLevel=wt("modifyBlocks",ft),ot.decreaseQuoteLevel=wt("modifyBlocks",ht),ot.makeUnorderedList=wt("modifyBlocks",vt),ot.makeOrderedList=wt("modifyBlocks",mt),ot.removeList=wt("modifyBlocks",yt),B.isInline=l,B.isBlock=s,B.isContainer=u,B.getBlockWalker=c,B.getPreviousBlock=d,B.getNextBlock=f,B.areAlike=g,B.hasTagAttributes=p,B.getNearest=v,B.isOrContains=m,B.detach=b,B.replaceWith=k,B.empty=w,B.getNodeBefore=_e,B.getNodeAfter=be,B.insertNodeInRange=ke,B.extractContentsOfRange=we,B.deleteContentsOfRange=Ce,B.insertTreeFragmentIntoRange=Ee,B.isNodeContainedInRange=Se,B.moveRangeBoundariesDownTree=Te,B.moveRangeBoundariesUpTree=Me,B.getStartBlockOfRange=Oe,B.getEndBlockOfRange=Ne,B.contentWalker=Le,B.rangeDoesStartAtBlockBoundary=Ae,B.rangeDoesEndAtBlockBoundary=xe,B.expandRangeToBlockBoundaries=Be,B.onPaste=nt,B.addLinks=bt,B.splitBlock=dt,B.startSelectionId="squire-selection-start",B.endSelectionId=ut,e.exports=B}(document)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),l=i(a),s=n(4),u=i(s),c=l.default.browser.msie&&11===l.default.browser.version,d=-1!==navigator.appVersion.indexOf("Win")&&l.default.browser.chrome,f=c||d,h=function(){function e(t,n){o(this,e),this._wwe=t,f&&(this.isComposition=!1,this._initCompositionEvent()),this.setRange(n||this._wwe.getRange())}return r(e,[{key:"_initCompositionEvent",value:function(){var e=this;this._wwe.getEditor().addEventListener("compositionstart",function(){e.isComposition=!0}),this._wwe.getEditor().addEventListener("compositionend",function(){e.isComposition=!1})}},{key:"setRange",value:function(e){this._range&&this._range.detach(),this._range=e}},{key:"expandStartOffset",value:function(){var e=this._range;u.default.isTextNode(e.startContainer)&&e.startOffset>0&&e.setStart(e.startContainer,e.startOffset-1)}},{key:"expandEndOffset",value:function(){var e=this._range;u.default.isTextNode(e.endContainer)&&e.endOffset<e.endContainer.nodeValue.length&&e.setEnd(e.endContainer,e.endOffset+1)}},{key:"setEndBeforeRange",value:function(e){var t=e.startOffset;this.isComposition&&(t+=1),this._range.setEnd(e.startContainer,t)}},{key:"getTextContent",value:function(){return this._range.cloneContents().textContent}},{key:"replaceContent",value:function(e){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(e),this._range=this._wwe.getRange()}},{key:"deleteContent",value:function(){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(""),this._range=this._wwe.getRange()}},{key:"peekStartBeforeOffset",value:function(e){var t=this._range.cloneRange();return t.setStart(t.startContainer,Math.max(t.startOffset-e,0)),t.setEnd(this._range.startContainer,this._range.startOffset),t.cloneContents().textContent}}]),e}();t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(68),f=i(d),h=function(e){function t(e){var n=e.eventManager,i=e.container,a=e.wysiwygEditor;o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{eventManager:n,container:i,attachedSelector:"pre"}));return l._wysiwygEditor=a,l._popupCodeBlockLanguages=null,l._initDOM(),l._initDOMEvent(),l}return a(t,e),l(t,[{key:"_initDOM",value:function(){this.$el.addClass("code-block-header"),this._$languageLabel=(0,c.default)("<span>text</span>"),this.$el.append(this._$languageLabel),this._$buttonOpenModalEditor=(0,c.default)('<button type="button">Editor</button>'),this.$el.append(this._$buttonOpenModalEditor)}},{key:"_initDOMEvent",value:function(){var e=this;this._$buttonOpenModalEditor.on("click",function(){return e._openPopupCodeBlockEditor()})}},{key:"_openPopupCodeBlockEditor",value:function(){this._eventManager.emit("openPopupCodeBlockEditor",this.getAttachedElement())}},{key:"_updateLanguage",value:function(){var e=this.getAttachedElement(),t=e?e.getAttribute("data-language"):null;this._$languageLabel.text(t||"text")}},{key:"syncLayout",value:function(){var e=(0,c.default)(this.getAttachedElement()),t=e.offset();t.left=t.left+(e.outerWidth()-250),this.$el.offset(t),this.$el.height(30),this.$el.width(250)}},{key:"onShow",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onShow",this).call(this),this._onAttachedElementChange=function(){return e._updateLanguage()},(0,c.default)(this.getAttachedElement()).on("language-changed",this._onAttachedElementChange),this._updateLanguage()}},{key:"onHide",value:function(){(0,c.default)(this.getAttachedElement()).off("language-changed",this._onAttachedElementChange),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onHide",this).call(this)}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(t){var n=t.eventManager,o=t.container,r=t.attachedSelector;i(this,e),this._eventManager=n,this._attachedSelector="[contenteditable=true] "+r,this._$container=(0,a.default)(o),this._$attachedElement=null,this.active=!1,this._createElement(),this._initEvent()}return o(e,[{key:"_createElement",value:function(){this.$el=(0,a.default)('<div class="te-ww-block-overlay">'),this.$el.css({position:"absolute",display:"none","z-index":1}),this._$container.append(this.$el)}},{key:"_initEvent",value:function(){var e=this;this._eventManager.listen("change",this._onChange.bind(this)),this._eventManager.listen("mouseover",this._onMouseOver.bind(this)),this._eventManager.listen("focus",function(){e.setVisibility(!1)}),this._eventManager.listen("mousedown",function(){e.setVisibility(!1)})}},{key:"_onChange",value:function(){this._$attachedElement&&a.default.contains(document,this._$attachedElement[0])?this.syncLayout():this.setVisibility(!1)}},{key:"_onMouseOver",value:function(e){var t=e.data,n=(0,a.default)(t.target),i=n.closest(this._attachedSelector);i.length?(this._$attachedElement=i,this.setVisibility(!0)):n.closest(this.$el).length?this.setVisibility(!0):this.active||this.setVisibility(!1)}},{key:"syncLayout",value:function(){this.$el.offset(this._$attachedElement.offset()),this.$el.width(this._$attachedElement.outerWidth()),this.$el.height(this._$attachedElement.outerHeight())}},{key:"getAttachedElement",value:function(){return this._$attachedElement?this._$attachedElement.get(0):null}},{key:"getVisibility",value:function(){return"block"===this.$el.css("display")}},{key:"setVisibility",value:function(e){e&&this._$attachedElement?this.getVisibility()||(this.$el.css("display","block"),this.syncLayout(),this.onShow()):e||this.getVisibility()&&(this.$el.css("display","none"),this.onHide())}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){this.active=!1,this._$attachedElement=null}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=['<div class="tui-editor">','<div class="te-md-container">','<div class="te-editor" />','<div class="te-md-splitter" />','<div class="te-preview" />',"</div>",'<div class="te-ww-container">','<div class="te-editor" />',"</div>","</div>"].join(""),s=function(){function e(t,n){i(this,e),this.$el=(0,a.default)(t.el),this.height=t.height,this.type=t.initialEditType,this.eventManager=n,this.init(),this._initEvent()}return o(e,[{key:"init",value:function(){this._renderLayout(),this._initMarkdownAndPreviewSection(),this._initWysiwygSection()}},{key:"_initEvent",value:function(){this.eventManager.listen("hide",this.hide.bind(this)),this.eventManager.listen("show",this.show.bind(this))}},{key:"_renderLayout",value:function(){this.$el.css("box-sizing","border-box"),this.$containerEl=(0,a.default)(l).appendTo(this.$el)}},{key:"switchToWYSIWYG",value:function(){this.$containerEl.removeClass("te-md-mode"),this.$containerEl.addClass("te-ww-mode")}},{key:"switchToMarkdown",value:function(){this.$containerEl.removeClass("te-ww-mode"),this.$containerEl.addClass("te-md-mode")}},{key:"_initMarkdownAndPreviewSection",value:function(){this.$mdEditorContainerEl=this.$containerEl.find(".te-md-container .te-editor"),this.$previewEl=this.$containerEl.find(".te-md-container .te-preview")}},{key:"_initWysiwygSection",value:function(){this.$wwEditorContainerEl=this.$containerEl.find(".te-ww-container .te-editor")}},{key:"_verticalSplitStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-tab"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-vertical")}},{key:"_tabStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-vertical"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-tab")}},{key:"changePreviewStyle",value:function(e){"tab"===e?this._tabStyle():"vertical"===e&&this._verticalSplitStyle()}},{key:"hide",value:function(){this.$el.find(".tui-editor").addClass("te-hide")}},{key:"show",value:function(){this.$el.find(".tui-editor").removeClass("te-hide")}},{key:"remove",value:function(){this.$el.find(".tui-editor").remove()}},{key:"getEditorEl",value:function(){return this.$containerEl}},{key:"getPreviewEl",value:function(){return this.$previewEl}},{key:"getMdEditorContainerEl",value:function(){return this.$mdEditorContainerEl}},{key:"getWwEditorContainerEl",value:function(){return this.$wwEditorContainerEl}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(71),u=i(s),c=n(44),d=i(c),f=n(5),h=i(f),g=n(76),p=i(g),v=n(77),m=i(v),y=n(78),_=i(y),b=n(79),k=i(b),w=n(80),C=i(w),E=n(81),S=i(E),T=n(82),M=i(T),O=n(83),N=i(O),L=n(3),A=i(L),x=n(35),B=i(x),P=function(){function e(t){o(this,e),Object.defineProperty(this,"name",{enumerable:!0,writable:!0,value:"default"}),Object.defineProperty(this,"_popups",{enumerable:!0,writable:!0,value:[]}),this._editor=t,this._initialEditType=t.options.initialEditType,this._init(t.options),this._initEvent()}return r(e,[{key:"_init",value:function(e){var t=e.el,n=e.toolbarItems,i=e.hideModeSwitch;this.$el=(0,l.default)('\n    <div class="tui-editor-defaultUI">\n        <div class="te-toolbar-section"><div class="te-markdown-tab-section"></div></div>\n        <div class="te-editor-section"></div>\n        <div class="te-mode-switch-section"></div>\n    </div>\n').appendTo(t),this._container=t,this._editorSection=this.$el.find(".te-editor-section").get(0),this._editorSection.appendChild(this._editor.layout.getEditorEl().get(0)),this._initToolbar(this._editor.eventManager,n),this._initModeSwitch(i),this._initPopupAddLink(),this._initPopupAddImage(),this._initPopupAddTable(),this._initPopupAddHeading(),this._initPopupTableUtils(),this._initPopupCodeBlockLanguages(),this._initPopupCodeBlockEditor(),this._initMarkdownTab()}},{key:"_initEvent",value:function(){this._editor.eventManager.listen("hide",this.hide.bind(this)),this._editor.eventManager.listen("show",this.show.bind(this)),this._editor.eventManager.listen("changeMode",this._markdownTabControl.bind(this)),this._editor.eventManager.listen("changePreviewStyle",this._markdownTabControl.bind(this))}},{key:"_initToolbar",value:function(e,t){var n=new u.default(e,t);this._toolbar=n,this.$el.find(".te-toolbar-section").append(n.$el)}},{key:"_initModeSwitch",value:function(e){var t=this,n=this.$el.find(".te-mode-switch-section"),i="markdown"===this._initialEditType?p.default.TYPE.MARKDOWN:p.default.TYPE.WYSIWYG,o=new p.default(n,i);this._modeSwitch=o,e&&o.hide(),o.on("modeSwitched",function(e,n){return t._editor.changeMode(n)})}},{key:"_initMarkdownTab",value:function(){var e=this._editor;this._markdownTab=new d.default({initName:A.default.get("Write"),items:[A.default.get("Write"),A.default.get("Preview")],sections:[e.layout.getMdEditorContainerEl(),e.layout.getPreviewEl()]}),this._$markdownTabSection=this.$el.find(".te-markdown-tab-section"),this._$markdownTabSection.append(this._markdownTab.$el),this._markdownTab.on("itemClick",function(t,n){n===A.default.get("Preview")?(e.eventManager.emit("previewNeedsRefresh"),e.eventManager.emit("changePreviewTabPreview"),e.eventManager.emit("closeAllPopup")):(e.getCodeMirror().focus(),e.eventManager.emit("changePreviewTabWrite"))})}},{key:"_markdownTabControl",value:function(){this._editor.isMarkdownMode()&&"tab"===this._editor.getCurrentPreviewStyle()?(this._$markdownTabSection.show(),this._markdownTab.activate(A.default.get("Write"))):this._$markdownTabSection.hide()}},{key:"_initPopupAddLink",value:function(){this._popups.push(new m.default({$target:this.$el,editor:this._editor}))}},{key:"_initPopupAddImage",value:function(){this._popups.push(new _.default({$target:this.$el,eventManager:this._editor.eventManager}))}},{key:"_initPopupAddTable",value:function(){this._popups.push(new C.default({$target:this._toolbar.$el,eventManager:this._editor.eventManager,$button:this.$el.find("button.tui-table"),css:{position:"absolute"}}))}},{key:"_initPopupAddHeading",value:function(){this._popups.push(new S.default({$target:this._toolbar.$el,eventManager:this._editor.eventManager,$button:this.$el.find("button.tui-heading"),css:{position:"absolute"}}))}},{key:"_initPopupTableUtils",value:function(){var e=this;this._editor.eventManager.listen("contextmenu",function(t){(0,l.default)(t.data.target).parents("[contenteditable=true] table").length>0&&(t.data.preventDefault(),e._editor.eventManager.emit("openPopupTableUtils",t.data))}),this._popups.push(new k.default({$target:this.$el,eventManager:this._editor.eventManager}))}},{key:"_initPopupCodeBlockLanguages",value:function(){var e=this._editor;this._popups.push(new M.default({$target:this.$el,eventManager:e.eventManager,languages:e.options.codeBlockLanguages}))}},{key:"_initPopupCodeBlockEditor",value:function(){this._popups.push(new N.default({$target:this.$el,eventManager:this._editor.eventManager,convertor:this._editor.convertor}))}},{key:"getToolbar",value:function(){return this._toolbar}},{key:"setToolbar",value:function(e){this._toolbar.destroy(),this._toolbar=e}},{key:"getModeSwitch",value:function(){return this._modeSwitch}},{key:"getEditorSectionHeight",value:function(){var e=this._editorSection.getBoundingClientRect();return e.bottom-e.top}},{key:"getEditorHeight",value:function(){var e=this._container.getBoundingClientRect();return e.bottom-e.top}},{key:"getPopupTableUtils",value:function(){var e=void 0;return this._popups.forEach(function(t){t instanceof k.default&&(e=t)}),e}},{key:"hide",value:function(){this.$el.addClass("te-hide")}},{key:"show",value:function(){this.$el.removeClass("te-hide")}},{key:"remove",value:function(){this.$el.remove(),B.default.hide()}},{key:"createPopup",value:function(e){return new h.default(e)}}]),e}();t.default=P},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(72),c=i(u),d=n(3),f=i(d),h=n(41),g=i(h),p=n(75),v=i(p),m=n(43),y=i(m),_=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._init(e),i._bindWidthChangedEvent(),i}return a(t,e),l(t,[{key:"insertItem",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",this).call(this,e,n),this._arrangeMoreButton()}},{key:"_init",value:function(e){var t=y.default.create("button",{name:"more",className:"tui-more",tooltip:f.default.get("More"),event:v.default.OPEN_EVENT});this._moreButton=t,this._popupDropdownToolbar=new v.default({eventManager:e,$target:this.$el,$button:t.$el}),this.addItem(t)}},{key:"_bindWidthChangedEvent",value:function(){var e=this;this._observer=new c.default(function(){e._popupDropdownToolbar.hide(),e._balanceButtons()}),this._observer.observe(this.$el.get(0))}},{key:"_balanceButtons",value:function(){var e=this;this._popupDropdownToolbar.getItems().forEach(function(n){e._popupDropdownToolbar.removeItem(n,!1);var i=e.getItems().length;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",e).call(e,i,n)}),this.removeItem(this._moreButton,!1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",this).call(this,0,this._moreButton);var n=this.$el.height();this.getItems().filter(function(e){return e.$el.position().top>n}).forEach(function(t){e.removeItem(t,!1),e._popupDropdownToolbar.addItem(t)}),this._arrangeMoreButton()}},{key:"_arrangeMoreButton",value:function(){if(this._popupDropdownToolbar){this.removeItem(this._moreButton,!1);var e=this._popupDropdownToolbar.getItems().length>0,n=this.getItems().length;e&&s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",this).call(this,n,this._moreButton)}}},{key:"destroy",value:function(){this._observer&&this._observer.disconnect()}}]),t}(g.default);t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function n(e){return parseFloat(e)||0}function i(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return t.reduce(function(t,i){return t+n(e["border-"+i+"-width"])},0)}function o(e){for(var t=["top","right","bottom","left"],i={},o=0,r=t;o<r.length;o+=1){var a=r[o],l=e["padding-"+a];i[a]=n(l)}return i}function r(e){var t=e.getBBox();return c(0,0,t.width,t.height)}function a(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return w;var a=k(e).getComputedStyle(e),s=o(a),u=s.left+s.right,d=s.top+s.bottom,f=n(a.width),h=n(a.height);if("border-box"===a.boxSizing&&(Math.round(f+u)!==t&&(f-=i(a,"left","right")+u),Math.round(h+d)!==r&&(h-=i(a,"top","bottom")+d)),!l(e)){var g=Math.round(f+u)-t,p=Math.round(h+d)-r;1!==Math.abs(g)&&(f-=g),1!==Math.abs(p)&&(h-=p)}return c(s.left,s.top,f,h)}function l(e){return e===k(e).document.documentElement}function s(e){return f?C(e)?r(e):a(e):w}function u(e){var t=e.x,n=e.y,i=e.width,o=e.height,r="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(r.prototype);return b(a,{x:t,y:n,width:i,height:o,top:n,right:t+i,bottom:o+n,left:t}),a}function c(e,t,n,i){return{x:e,y:t,width:n,height:i}}var d=function(){function e(e,t){var n=-1;return e.some(function(e,i){return e[0]===t&&(n=i,!0)}),n}return"undefined"!=typeof Map?Map:function(){function t(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){var n=this;void 0===t&&(t=null);for(var i=0,o=n.__entries__;i<o.length;i+=1){var r=o[i];e.call(t,r[1],r[0])}},Object.defineProperties(t.prototype,n),t}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,h=function(){return void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),g=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(h):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),p=2,v=function(e,t){function n(){r&&(r=!1,e()),a&&o()}function i(){g(n)}function o(){var e=Date.now();if(r){if(e-l<p)return;a=!0}else r=!0,a=!1,setTimeout(i,t);l=e}var r=!1,a=!1,l=0;return o},m=["top","right","bottom","left","width","height","size","weight"],y="undefined"!=typeof MutationObserver,_=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=v(this.refresh.bind(this),20)};_.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},_.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},_.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},_.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},_.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),y?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},_.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},_.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),m.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},_.getInstance=function(){return this.instance_||(this.instance_=new _),this.instance_},_.instance_=null;var b=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n+=1){var o=i[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},k=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||h},w=c(0,0,0,0),C=function(){return"undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof k(e).SVGGraphicsElement}:function(e){return e instanceof k(e).SVGElement&&"function"==typeof e.getBBox}}(),E=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=c(0,0,0,0),this.target=e};E.prototype.isActive=function(){var e=s(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},E.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var S=function(e,t){var n=u(t);b(this,{target:e,contentRect:n})},T=function(e,t,n){if(this.activeObservations_=[],this.observations_=new d,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n};T.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof k(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new E(e)),this.controller_.addObserver(this),this.controller_.refresh())}},T.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof k(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},T.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},T.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},T.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new S(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},T.prototype.clearActive=function(){this.activeObservations_.splice(0)},T.prototype.hasActive=function(){return this.activeObservations_.length>0};var M="undefined"!=typeof WeakMap?new WeakMap:new d,O=function(e){if(!(this instanceof O))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=_.getInstance(),n=new T(e,t,this);M.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){O.prototype[e]=function(){return(t=M.get(this))[e].apply(t,arguments);var t}});var N=function(){return void 0!==h.ResizeObserver?h.ResizeObserver:O}();t.default=N}.call(t,n(73))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),t}(l.default);t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(1),c=i(u),d=n(5),f=i(d),h=n(41),g=i(h),p=function(e){function t(e){return o(this,t),e=c.default.extend({header:!1,className:"te-dropdown-toolbar"},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"getToolbar",value:function(){return this._toolbar}},{key:"getItems",value:function(){return this.getToolbar().getItems()}},{key:"getItem",value:function(e){return this.getToolbar().getItem(e)}},{key:"setItems",value:function(e){this.getToolbar().setItems(e)}},{key:"addItem",value:function(e){this.getToolbar().addItem(e)}},{key:"insertItem",value:function(e,t){this.getToolbar().insertItem(e,t)}},{key:"indexOfItem",value:function(e){return this.getToolbar().indexOfItem(e)}},{key:"removeItem",value:function(e,t){return this.getToolbar().removeItem(e,t)}},{key:"removeAllItems",value:function(){this.getToolbar().removeAllItems()}},{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e);var n=e.$button,i=e.eventManager;this._$button=n,this._eventManager=i,this._toolbar=new g.default(i)}},{key:"_initDOM",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this),this.setContent(this._toolbar.$el)}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",function(){return e.hide()}),this._eventManager.listen("closeAllPopup",function(){return e.hide()}),this._eventManager.listen(t.OPEN_EVENT,function(){var t=e.isShow();e._eventManager.emit("closeAllPopup"),t||e.show(),e.$el.css({left:"-1000px"});var n=e._$button,i=n.position(),o=n.outerHeight(!0),r=(o-n.outerHeight())/2,a=i.top+o-r,l=i.left+n.outerWidth(!0)-e.$el.outerWidth(!0);e.$el.css({top:a,left:l})})}}]),t}(f.default);Object.defineProperty(p,"OPEN_EVENT",{enumerable:!0,writable:!0,value:"openDropdownToolbar"}),t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),c=n(1),d=i(c),f=n(8),h=i(f),g=n(3),p=i(g),v="markdown",m=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"te-mode-switch"}));return Object.defineProperty(i,"_buttons",{enumerable:!0,writable:!0,value:{}}),i._render(e),i._switchType(d.default.isExisty(n)?n:v),i}return a(t,e),l(t,[{key:"isShown",value:function(){return"block"===this._$rootElement.css("display")}},{key:"show",value:function(){this._$rootElement.css("display","block")}},{key:"hide",value:function(){this._$rootElement.css("display","none")}},{key:"_render",value:function(e){this._buttons.$markdown=(0,u.default)('<button class="te-switch-button markdown" type="button">'+p.default.get("Markdown")+"</button>"),this._buttons.$wysiwyg=(0,u.default)('<button class="te-switch-button wysiwyg" type="button">'+p.default.get("WYSIWYG")+"</button>"),this.$el.append(this._buttons.$markdown),this.$el.append(this._buttons.$wysiwyg),e&&(e.append(this.$el),this._$rootElement=e),this.on("click .markdown",this._changeMarkdown.bind(this)),this.on("click .wysiwyg",this._changeWysiwyg.bind(this)),this.show()}},{key:"_changeMarkdown",value:function(){this._switchType(v)}},{key:"_changeWysiwyg",value:function(){this._switchType("wysiwyg")}},{key:"_setActiveButton",value:function(e){this._buttons.$markdown.removeClass("active"),this._buttons.$wysiwyg.removeClass("active"),this._buttons["$"+e].addClass("active")}},{key:"_switchType",value:function(e){this._type!==e&&(this._type=e,this._setActiveButton(e),this.trigger("modeSwitched",this._type))}}]),t}(h.default);Object.defineProperty(m,"TYPE",{enumerable:!0,writable:!0,value:{MARKDOWN:v,WYSIWYG:"wysiwyg"}}),t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(1),f=i(d),h=n(5),g=i(h),p=n(3),v=i(p),m=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})(\/([^\s]*))?$/,y=function(e){function t(e){o(this,t);var n='\n            <label for="linkText">'+v.default.get("Link text")+'</label>\n            <input type="text" class="te-link-text-input" />\n            <label for="url">'+v.default.get("URL")+'</label>\n            <input type="text" class="te-url-input" />\n            <div class="te-button-section">\n                <button type="button" class="te-ok-button">'+v.default.get("OK")+'</button>\n                <button type="button" class="te-close-button">'+v.default.get("Cancel")+"</button>\n            </div>\n        ";return e=f.default.extend({header:!0,title:v.default.get("Insert link"),className:"te-popup-add-link tui-editor-popup",content:n},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._editor=e.editor,this._eventManager=e.editor.eventManager}},{key:"_initDOM",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this);var e=this.$el.get(0);this._inputText=e.querySelector(".te-link-text-input"),this._inputURL=e.querySelector(".te-url-input")}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click .te-close-button",function(){return e.hide()}),this.on("click .te-ok-button",function(){return e._addLink()}),this.on("shown",function(){var t=e._inputText,n=e._inputURL,i=e._editor.getSelectedText().trim();t.value=i,m.exec(i)&&(n.value=i),i.length>0&&n.value.length<1?n.focus():(t.focus(),t.setSelectionRange(0,i.length))}),this.on("hidden",function(){e._resetInputs()})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this);var n=this._eventManager;n.listen("focus",function(){return e.hide()}),n.listen("closeAllPopup",function(){return e.hide()}),n.listen("openPopupAddLink",function(){n.emit("closeAllPopup"),e.show()})}},{key:"_addLink",value:function(){var e=this._getValue(),t=e.url,n=e.linkText;return this._clearValidationStyle(),n.length<1?void(0,c.default)(this._inputText).addClass("wrong"):t.length<1?void(0,c.default)(this._inputURL).addClass("wrong"):(this._eventManager.emit("command","AddLink",{linkText:n,url:t}),void this.hide())}},{key:"_getValue",value:function(){return{url:this._inputURL.value,linkText:this._inputText.value}}},{key:"_clearValidationStyle",value:function(){(0,c.default)(this._inputURL).removeClass("wrong"),(0,c.default)(this._inputText).removeClass("wrong")}},{key:"_resetInputs",value:function(){this._inputText.value="",this._inputURL.value="",this._clearValidationStyle()}}]),t}(g.default);t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(1),c=i(u),d=n(5),f=i(d),h=n(44),g=i(h),p=n(3),v=i(p),m="te-image-url-input",y="te-image-file-input",_="te-alt-text-input",b="te-ok-button",k="te-close-button",w="te-file-type",C="te-url-type",E="te-tab-section",S=function(e){function t(e){o(this,t);var n='\n            <div class="'+E+'"></div>\n            <div class="'+C+'">\n                <label for="">'+v.default.get("Image URL")+'</label>\n                <input type="text" class="'+m+'" />\n            </div>\n            <form enctype="multipart/form-data" class="'+w+'">\n                <label for="">'+v.default.get("Select image file")+'</label>\n                <input type="file" class="'+y+'" accept="image/*" />\n            </form>\n            <label for="url">'+v.default.get("Description")+'</label>\n            <input type="text" class="'+_+'" />\n            <div class="te-button-section">\n                <button type="button" class="'+b+'">'+v.default.get("OK")+'</button>\n                <button type="button" class="'+k+'">'+v.default.get("Cancel")+"</button>\n            </div>\n        ";return e=c.default.extend({header:!0,title:v.default.get("Insert image"),className:"te-popup-add-image tui-editor-popup",content:n},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager}},{key:"_initDOM",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this);var e=this.$el;this._$imageUrlInput=e.find("."+m),this._$imageFileInput=e.find("."+y),this._$altTextInput=e.find("."+_);var n=e.find("."+w),i=e.find("."+C),o=this.$body.find("."+E);this.tab=new g.default({initName:v.default.get("File"),items:[v.default.get("File"),v.default.get("URL")],sections:[n,i]}),o.append(this.tab.$el)}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("shown",function(){return e._$imageUrlInput.focus()}),this.on("hidden",function(){return e._resetInputs()}),this.on("change ."+y,function(){var t=e._$imageFileInput.val().split("\\").pop();e._$altTextInput.val(t)}),this.on("click ."+k,function(){return e.hide()}),this.on("click ."+b,function(){var t=e._$imageUrlInput.val(),n=e._$altTextInput.val();if(t)e._applyImage(t,n);else{var i=e._$imageFileInput.get(0),o=i.files;if(o.length){var r=o.item(0),a=function(t,i){return e._applyImage(t,n||i)};e.eventManager.emit("addImageBlobHook",r,a,"ui")}}e.hide()}),this.tab.on("itemClick",function(){return e._resetInputs()})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("openPopupAddImage",function(){e.eventManager.emit("closeAllPopup"),e.show()})}},{key:"_applyImage",value:function(e,t){this.eventManager.emit("command","AddImage",{imageUrl:e,altText:t||"image"}),this.hide()}},{key:"_resetInputs",value:function(){this.$el.find("input").val("")}}]),t}(f.default);t.default=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(1),f=i(d),h=n(5),g=i(h),p=n(3),v=i(p),m=function(e){function t(e){o(this,t);var n='\n            <button type="button" class="te-table-add-row">'+v.default.get("Add row")+'</button>\n            <button type="button" class="te-table-add-col">'+v.default.get("Add col")+'</button>\n            <button type="button" class="te-table-remove-row">'+v.default.get("Remove row")+'</button>\n            <button type="button" class="te-table-remove-col">'+v.default.get("Remove col")+'</button>\n            <hr/>\n            <button type="button" class="te-table-col-align-left">'+v.default.get("Align left")+'</button>\n            <button type="button" class="te-table-col-align-center">'+v.default.get("Align center")+'</button>\n            <button type="button" class="te-table-col-align-right">'+v.default.get("Align right")+'</button>\n            <hr/>\n            <button type="button" class="te-table-remove">'+v.default.get("Remove table")+"</button>\n        ";return e=f.default.extend({header:!1,className:"te-popup-table-utils",content:n},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click .te-table-add-row",function(){return e.eventManager.emit("command","AddRow")}),this.on("click .te-table-add-col",function(){return e.eventManager.emit("command","AddCol")}),this.on("click .te-table-remove-row",function(){return e.eventManager.emit("command","RemoveRow")}),this.on("click .te-table-col-align-left",function(){return e.eventManager.emit("command","AlignCol","left")}),this.on("click .te-table-col-align-center",function(){return e.eventManager.emit("command","AlignCol","center")}),this.on("click .te-table-col-align-right",function(){return e.eventManager.emit("command","AlignCol","right")}),this.on("click .te-table-remove-col",function(){return e.eventManager.emit("command","RemoveCol")}),this.on("click .te-table-remove",function(){return e.eventManager.emit("command","RemoveTable")})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("mousedown",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("openPopupTableUtils",function(t){var n=e.$el.parent().offset(),i=t.clientX-n.left,o=t.clientY-n.top+(0,c.default)(window).scrollTop();e.$el.css({position:"absolute",top:o+5,left:i+10}),e.eventManager.emit("closeAllPopup"),e.show()})}}]),t}(g.default);t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(1),c=i(u),d=n(5),f=i(d),h='\n    <div class="te-table-selection">\n        <div class="te-table-header"></div>\n        <div class="te-table-body"></div>\n        <div class="te-selection-area"></div>\n    </div>\n    <p class="te-description"></p>\n',g=function(e){function t(e){return o(this,t),e=c.default.extend({header:!1,className:"te-popup-add-table",content:h},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._selectedBound={},this._tableBound={},this._eventManager=e.eventManager,this._$button=e.$button}},{key:"_initDOM",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this),this._cacheElements(),this._setTableSizeByBound(5,7)}},{key:"_initDOMEvent",value:function(e){var n=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this,e),this.on("mousemove .te-table-selection",function(e){var t=e.pageX-n._selectionOffset.left,i=e.pageY-n._selectionOffset.top,o=n._getSelectionBoundByOffset(t,i);n._resizeTableBySelectionIfNeed(o.col,o.row),n._setSelectionAreaByBound(o.col,o.row),n._setDisplayText(o.col,o.row),n._setSelectedBound(o.col,o.row)}),this.on("click .te-table-selection",function(){var e=n._getSelectedTableSize();n._eventManager.emit("command","Table",e.col,e.row)})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",function(){return e.hide()}),this._eventManager.listen("closeAllPopup",function(){return e.hide()}),this._eventManager.listen("openPopupAddTable",function(){var t=e._$button,n=t.get(0),i=n.offsetTop,o=n.offsetLeft;e.$el.css({top:i+t.outerHeight(),left:o}),e._eventManager.emit("closeAllPopup"),e.show(),e._selectionOffset=e.$el.find(".te-table-selection").offset()})}},{key:"_cacheElements",value:function(){this.$header=this.$el.find(".te-table-header"),this.$body=this.$el.find(".te-table-body"),this.$selection=this.$el.find(".te-selection-area"),this.$desc=this.$el.find(".te-description")}},{key:"_resizeTableBySelectionIfNeed",value:function(e,t){var n=this._getResizedTableBound(e,t);n&&this._setTableSizeByBound(n.col,n.row)}},{key:"_getResizedTableBound",value:function(e,t){var n=void 0,i=void 0,o=void 0;return e>=5&&e<9?n=e+1:e<5&&(n=5),t>=7&&t<14?i=t+1:t<7&&(i=7),this._isNeedResizeTable(n,i)&&(o={row:i||this._tableBound.row,col:n||this._tableBound.col}),o}},{key:"_isNeedResizeTable",value:function(e,t){return e&&e!==this._tableBound.col||t&&t!==this._tableBound.row}},{key:"_getBoundByOffset",value:function(e,t){return{row:parseInt(t/17,10),col:parseInt(e/25,10)}}},{key:"_getOffsetByBound",value:function(e,t){return{x:25*e+25,y:17*t+17}}},{key:"_setTableSizeByBound",value:function(e,t){var n=this._getOffsetByBound(e,t-1);this._setTableSize(n.x,n.y),this._tableBound.row=t,this._tableBound.col=e}},{key:"_getSelectionBoundByOffset",value:function(e,t){var n=this._getBoundByOffset(e,t);return n.row<1?n.row=1:n.row>this._tableBound.row&&(n.row=this._tableBound.row),n.col<1?n.col=1:n.col>this._tableBound.col&&(n.col=this._tableBound.col),n}},{key:"_setSelectionAreaByBound",value:function(e,t){var n=this._getOffsetByBound(e,t);this._setSelectionArea(n.x,n.y)}},{key:"_setSelectedBound",value:function(e,t){this._selectedBound.col=e,this._selectedBound.row=t}},{key:"_getSelectedTableSize",value:function(){return{row:this._selectedBound.row+1,col:this._selectedBound.col+1}}},{key:"_setDisplayText",value:function(e,t){this.$desc.html(e+1+" x "+(t+1))}},{key:"_setTableSize",value:function(e,t){e+=1,t+=1,this.$header.css({height:17,width:e}),this.$body.css({height:t,width:e}),this.$el.css({width:e+30})}},{key:"_setSelectionArea",value:function(e,t){e+=1,t+=1,this.$selection.css({height:t,width:e})}}]),t}(f.default);g.CELL_WIDTH=25,g.CELL_HEIGHT=17,g.MIN_ROW_SELECTION_INDEX=1,g.MIN_COL_SELECTION_INDEX=1,t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(1),f=i(d),h=n(5),g=i(h),p=n(3),v=i(p),m=function(e){function t(e){o(this,t);var n='\n            <ul>\n                <li data-value="1" data-type="Heading"><h1>'+v.default.get("Heading")+' 1</h1></li>\n                <li data-value="2" data-type="Heading"><h2>'+v.default.get("Heading")+' 2</h2></li>\n                <li data-value="3" data-type="Heading"><h3>'+v.default.get("Heading")+' 3</h3></li>\n                <li data-value="4" data-type="Heading"><h4>'+v.default.get("Heading")+' 4</h4></li>\n                <li data-value="5" data-type="Heading"><h5>'+v.default.get("Heading")+' 5</h5></li>\n                <li data-value="6" data-type="Heading"><h6>'+v.default.get("Heading")+' 6</h6></li>\n                <li data-type="Paragraph"><div>'+v.default.get("Paragraph")+"</div></li>\n            </ul>\n        ";return e=f.default.extend({header:!1,className:"te-heading-add",content:n},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._eventManager=e.eventManager,this._$button=e.$button}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click li",function(t){var n=(0,c.default)(t.target).closest("li");e._eventManager.emit("command",n.data("type"),n.data("value"))})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",this.hide.bind(this)),this._eventManager.listen("closeAllPopup",this.hide.bind(this)),this._eventManager.listen("openHeadingSelect",function(){var t=e._$button,n=t.get(0),i=n.offsetTop,o=n.offsetLeft;e.$el.css({top:i+t.outerHeight(),left:o}),e._eventManager.emit("closeAllPopup"),e.show()})}}]),t}(g.default);t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(1),f=i(d),h=n(5),g=i(h),p="te-popup-code-block-lang-",v=function(e){function t(e){o(this,t);var n=[];return e.languages.forEach(function(e){return n.push('<button type="button" class="'+p+e+'" data-lang="'+e+'">'+e+"</button>")}),e=f.default.extend({header:!1,className:"te-popup-code-block-languages",content:n.join("")},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._onSelectedLanguage=null,this._onDismissed=null,this._currentButton=null,this._$buttons=null,this._languages=e.languages,this.eventManager=e.eventManager}},{key:"_initDOM",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this,e),this.$el.css("z-index",1e4),this._$buttons=this.$el.find("button"),this._activateButtonByIndex(0)}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this);var n=function(t){var n=(0,c.default)(t.target).data("lang");e._onSelectedLanguage&&e._onSelectedLanguage(n),e.hide()};this._languages.forEach(function(t){return e.on("mousedown ."+p+t,n)})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("openPopupCodeBlockLanguages",function(t){e.show(t.callback);var n=e.$el.get(0).style;return n.top=t.offset.top+"px",n.left=t.offset.left+"px",e.setCurrentLanguage(t.language),e}),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("mousedown",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("closePopupCodeBlockLanguages",function(){return e.hide()}),this.eventManager.listen("scroll",function(){return e.hide()})}},{key:"_activateButtonByIndex",value:function(e){this._currentButton&&(0,c.default)(this._currentButton).removeClass("active"),this._currentButton=this._$buttons.get(e),(0,c.default)(this._currentButton).addClass("active"),this._currentButton.scrollIntoView()}},{key:"prev",value:function(){var e=this._$buttons.index(this._currentButton)-1;e<0&&(e=this._$buttons.length-1),this._activateButtonByIndex(e)}},{key:"next",value:function(){var e=this._$buttons.index(this._currentButton)+1;e>=this._$buttons.length&&(e=0),this._activateButtonByIndex(e)}},{key:"getCurrentLanguage",value:function(){return(0,c.default)(this._currentButton).data("lang")}},{key:"setCurrentLanguage",value:function(e){var t=this._$buttons.filter("."+p+e);if(t.length>0){var n=this._$buttons.index(t);this._activateButtonByIndex(n)}}},{key:"show",value:function(e){this._onSelectedLanguage=e.selected,this._onDismissed=e.dismissed,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"hide",value:function(){this._onDismissed&&this._onDismissed(),this._onSelectedLanguage=null,this._onDismissed=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}(g.default);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),c=i(u),d=n(1),f=i(d),h=n(5),g=i(h),p=n(84),v=i(p),m=n(85),y=i(m),_=n(86),b=i(_),k=n(87),w=i(k),C=n(3),E=i(C),S="popup-editor-",T="te-ok-button",M="te-close-button",O='\n    <button type="button" class="'+S+'toggle-scroll"></button>\n    <button type="button" class="'+S+'toggle-preview"></button>\n    <button type="button" class="'+S+'toggle-fit"></button>\n    <button type="button" class="tui-popup-close-button"></button>\n',N=function(e){function t(e){o(this,t);var n='\n            <div class="'+S+'body"></div>\n            <div class="te-button-section">\n                <button type="button" class="'+T+'">'+E.default.get("OK")+'</button>\n                <button type="button" class="'+M+'">'+E.default.get("Cancel")+"</button>\n            </div>\n        ";return e=f.default.extend({header:!0,title:"CodeBlock Editor",content:n,className:"tui-popup-code-block-editor",headerButtons:O,modal:!0},e),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager,this.convertor=e.convertor}},{key:"_initDOM",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this,e);var n=this.$el.get(0);this._body=n.querySelector("."+S+"body"),this._toggleFitButton=n.querySelector("."+S+"toggle-fit"),this._togglePreviewButton=n.querySelector("."+S+"toggle-preview"),this._toggleScrollButton=n.querySelector("."+S+"toggle-scroll"),this._okButton=n.querySelector("."+T),this._closeButton=n.querySelector("."+M),this._codeMirrorWrapper=this._createCodeBlockEditor(),this._previewWrapper=this._createPreview(),this._scrollSyncSplit=new v.default(this._body,this._codeMirrorWrapper,this._previewWrapper),this._updateFitWindowButton(),this._updatePreviewButton(),this._updateScrollButton(),this._codeBlockLanguagesCombo=this._createCodeBlockLanguagesCombo()}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("scroll",function(e){return e.preventDefault()}),this.on("click ."+S+"toggle-fit",function(){return e._toggleFitToWindow()}),this.on("click ."+S+"toggle-preview",function(){return e._togglePreview()}),this.on("click ."+S+"toggle-scroll",function(){return e._toggleScroll()}),this.on("click ."+T,function(){return e._save()}),this.on("click ."+M,function(){return e.hide()}),this.on("click ."+S+"close",function(){return e.hide()}),this.on("click ."+S+"editor-wrapper",function(t){t.target===e._codeMirrorWrapper&&e._focusEditor(!0)})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("openPopupCodeBlockEditor",function(t){return e.eventManager.emit("closeAllPopup"),e.show(t),e}),this.eventManager.listen("closeAllPopup",this.hide.bind(this)),this.eventManager.listen("closePopupCodeBlockEditor",this.hide.bind(this))}},{key:"_createCodeBlockEditor",value:function(){var e=document.createElement("div");return e.className=S+"editor-wrapper",this._codeBlockEditor=new y.default(e,this.eventManager),e}},{key:"_createPreview",value:function(){var e=document.createElement("div");return this._codeBlockPreview=new b.default((0,c.default)(e),this.eventManager,this.convertor,this._codeBlockEditor),e}},{key:"_createCodeBlockLanguagesCombo",value:function(){var e=this,t=this.getTitleElement(),n=new w.default(this.eventManager);return n.setOnLanguageSelected(function(t){e._codeBlockEditor.setLanguage(t),e._codeBlockEditor.refresh(),e._focusEditor()}),t.innerHTML="CodeBlock Editor",t.appendChild(n.getElement()),n}},{key:"_updateFitWindowButton",value:function(){(0,c.default)(this._toggleFitButton).toggleClass("active",this.isFitToWindow())}},{key:"_updatePreviewButton",value:function(){(0,c.default)(this._togglePreviewButton).toggleClass("active",this._scrollSyncSplit.isSplitView())}},{key:"_updateScrollButton",value:function(){this._scrollSyncSplit.isSplitView()?this._toggleScrollButton.style.display="inline-block":this._toggleScrollButton.style.display="none",(0,c.default)(this._toggleScrollButton).toggleClass("active",this._scrollSyncSplit.isScrollSynced())}},{key:"_focusEditor",value:function(e){this._codeBlockEditor.focus(),e?this._codeBlockEditor.moveCursorToEnd():this._codeBlockEditor.moveCursorToStart()}},{key:"_togglePreview",value:function(){this._scrollSyncSplit.toggleSplitView(),this._updatePreviewButton(),this._updateScrollButton(),this._codeBlockEditor.refresh()}},{key:"_toggleFitToWindow",value:function(){this.toggleFitToWindow(),this._updateFitWindowButton(),this._codeBlockEditor.refresh()}},{key:"_toggleScroll",value:function(){this._scrollSyncSplit.toggleScrollSync(),this._updateScrollButton()}},{key:"_save",value:function(){this._codeBlockEditor.save(this._codeBlockElement),this.hide()}},{key:"_load",value:function(e){this._codeBlockElement=e,this._codeBlockEditor.load(e),this._codeBlockLanguagesCombo.setLanguage(this._codeBlockEditor.getLanguage()),this._focusEditor(),this._codeBlockPreview.refresh()}},{key:"show",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),!e)throw new Error("should be called with codeBlockElement");this._load(e)}},{key:"hide",value:function(){this.setFitToWindow(!1),this._codeBlockEditor&&this._codeBlockEditor.clear(),this._codeBlockPreview&&this._codeBlockPreview.clear(),this._codeBlockElement=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}(g.default);t.default=N},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(1),u=i(s),c={left:"tui-split-content-left",right:"tui-split-content-right"},d=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),r=u.default.extend({showScrollSyncButton:!1,scrollSync:!0,splitView:!0},r),this._baseElement=t,this._contentElements=[],this._initDom(n,i,r),this._initDomEvent()}return r(e,[{key:"_initDom",value:function(e,t,n){var i=document.createElement("div");i.className="tui-split-scroll",this._el=i;var o=document.createElement("div");o.className="tui-split-scroll-wrapper",this._scrollWrapper=o,this._setScrollSync(n.scrollSync),this.setSplitView(n.splitView);var r=document.createElement("div");r.className="tui-split-scroll-content",this._contentWrapper=r;var a=document.createElement("div");a.className="tui-splitter",this._baseElement.appendChild(i),i.appendChild(o),o.appendChild(r),o.appendChild(a),this._setLeft(e),this._setRight(t)}},{key:"_initDomEvent",value:function(){this._contentWrapper.addEventListener("scroll",this.sync.bind(this))}},{key:"_requireScrollIntoView",value:function(e){var t=e.target,n=t.getBoundingClientRect(),i=n.top,o=n.bottom,r=void 0,a=void 0,s=void 0;if(this.isScrollSynced())s=this._contentWrapper;else if((0,l.default)(t).parents(this._contentElements.left).length)s=this._contentElements.left;else{if(!(0,l.default)(t).parents(this._contentElements.right).length)return;s=this._contentElements.right}var u=s.getBoundingClientRect();r=u.top,a=u.bottom,i<r?s.scrollTop=s.scrollTop+i-r:o>a&&(s.scrollTop=s.scrollTop+o-a),this.sync()}},{key:"_setContentElement",value:function(e,t){var n=this,i=this._contentElements[t];i&&((0,l.default)(i).off("requireScrollIntoView"),this._contentWrapper.removeChild(i)),(0,l.default)(e).addClass(c[t]),this._contentWrapper.appendChild(e),(0,l.default)(e).on("requireScrollIntoView",function(e){return n._requireScrollIntoView(e)}),(0,l.default)(e).on("requireScrollSync",function(){return n.sync()}),this._contentElements[t]=e,this.sync()}},{key:"_setLeft",value:function(e){this._setContentElement(e,"left")}},{key:"_setRight",value:function(e){this._setContentElement(e,"right")}},{key:"_setScrollSync",value:function(e){(0,l.default)(this._el).toggleClass("scroll-sync",e)}},{key:"toggleScrollSync",value:function(){(0,l.default)(this._el).toggleClass("scroll-sync")}},{key:"setSplitView",value:function(e){(0,l.default)(this._el).toggleClass("single-content",!e)}},{key:"toggleSplitView",value:function(){(0,l.default)(this._el).toggleClass("single-content")}},{key:"isScrollSynced",value:function(){return(0,l.default)(this._el).hasClass("scroll-sync")}},{key:"isSplitView",value:function(){return!(0,l.default)(this._el).hasClass("single-content")}},{key:"sync",value:function(){if(this._contentElements.left&&this._contentElements.right){var e=this._contentWrapper.clientHeight,t=this._contentWrapper.scrollTop,n=this._contentElements.left,i=this._contentElements.right,o=n.offsetHeight-e>0?n:i,r=o===n?i:n,a=o.offsetHeight,l=Math.max(a-e,0),s=Math.max(r.offsetHeight,e),u=a-s;o.style.top="0px",r.style.top=t/l*u+"px"}}},{key:"scrollTop",value:function(e){this._contentWrapper.scrollTop=e}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),c=n(36),d=i(c),f=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{singleCursorHeightPerLine:!1,theme:"none"}));return i._language="",i._eventManager=n,i._initEvent(),i}return a(t,e),l(t,[{key:"_initEvent",value:function(){var e=this;this.on("cursorActivity",this._onRequireScrollIntoView.bind(this)),this.on("beforeChange",function(t,n){"paste"===n.origin&&e._eventManager.emit("pasteBefore",{source:"codeblock",data:n})})}},{key:"_onRequireScrollIntoView",value:function(){var e=this.getCursor(),t=this.getWrapperElement();setTimeout(function(){var n=t.querySelector("pre:nth-child("+(e.line+1)+")");(0,u.default)(n).trigger("requireScrollIntoView")},0)}},{key:"load",value:function(e){var t=e.cloneNode(!0);this.setLanguage(t.getAttribute("data-language")||""),this.setEditorCodeText(t.textContent)}},{key:"save",value:function(e){e.innerHTML="",e.textContent=this.getEditorCodeText(),e.setAttribute("data-language",this._language),(0,u.default)(e).trigger("language-changed")}},{key:"clear",value:function(){this.setLanguage(""),this.setEditorCodeText("")}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._language=e}},{key:"getEditorCodeText",value:function(){return this.getValue()}},{key:"setEditorCodeText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setValue(e)}},{key:"refresh",value:function(){this.cm.refresh()}}]),t}(d.default);t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(12),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n,r,a){i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,!0));return l._codeBlockEditor=a,l._initEvent(),l}return r(t,e),a(t,[{key:"_initEvent",value:function(){var e=this;this._codeBlockEditor.on("update",function(){return e.lazyRunner.run("refresh")})}},{key:"refresh",value:function(){var e=this._codeBlockEditor.getLanguage(),n=this._codeBlockEditor.getEditorCodeText();l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this,"```"+e+"\n"+n+"\n```"),this.$el.trigger("requireScrollSync")}},{key:"clear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,"")}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),s=n(3),u=i(s),c=n(19),d=i(c),f=function(){function e(t){o(this,e),this._eventManager=t,this._initDOM(),this._initDOMEvent()}return r(e,[{key:"_initDOM",value:function(){this._inputLanguage=(0,l.default)('<input type="text" maxlength="20" placeholder="'+u.default.get("Choose language")+'">').get(0),this._wrapper=(0,l.default)('<span class="te-input-language">').get(0),this._wrapper.appendChild(this._inputLanguage)}},{key:"_initDOMEvent",value:function(){var e=this;this._inputLanguage.addEventListener("keydown",function(t){return e._onKeyEvent(t)}),this._inputLanguage.addEventListener("focus",function(){return e._showPopupCodeBlockLanguages()}),this._inputLanguage.addEventListener("focusout",function(){return e._onFocusOut()}),this._wrapper.addEventListener("mousedown",function(t){t.target===e._wrapper&&(t.preventDefault(),e._toggleFocus())})}},{key:"_showPopupCodeBlockLanguages",value:function(){var e=this,t=this._inputLanguage.getBoundingClientRect();(0,l.default)(this._wrapper).toggleClass("active",!0),this.active=!0,this._popupCodeBlockLanguages=this._eventManager.emitReduce("openPopupCodeBlockLanguages",{language:this._prevStoredLanguage,offset:{left:t.left,top:t.bottom},callback:{selected:function(t){return e._onLanguageSelectedFromList(t)},dismissed:function(){e._popupCodeBlockLanguages=null}}})}},{key:"_toggleFocus",value:function(){var e=this._inputLanguage;(0,l.default)(this._wrapper).hasClass("active")?e.blur():e.focus()}},{key:"_onFocusOut",value:function(){(0,l.default)(this._wrapper).toggleClass("active",!1),this._inputLanguage.value=this._prevStoredLanguage,this._hidePopupCodeBlockLanguages()}},{key:"_onKeyEvent",value:function(e){if(this._popupCodeBlockLanguages)switch(e.which){case d.default.keyCode("UP"):this._popupCodeBlockLanguages.prev(),e.preventDefault();break;case d.default.keyCode("DOWN"):this._popupCodeBlockLanguages.next(),e.preventDefault();break;case d.default.keyCode("ENTER"):case d.default.keyCode("TAB"):var t=this._popupCodeBlockLanguages.getCurrentLanguage();this._inputLanguage.value=t,this._storeInputLanguage(),e.preventDefault();break;default:this._popupCodeBlockLanguages.hide()}else e.which!==d.default.keyCode("ENTER")&&e.which!==d.default.keyCode("TAB")||(this._storeInputLanguage(),e.preventDefault())}},{key:"_onLanguageSelectedFromList",value:function(e){this._inputLanguage.value=e,this._storeInputLanguage()}},{key:"setOnLanguageSelected",value:function(e){this._onLanguageSelected=e}},{key:"_hidePopupCodeBlockLanguages",value:function(){this._eventManager.emit("closePopupCodeBlockLanguages")}},{key:"setLanguage",value:function(e){this._prevStoredLanguage=e,this._inputLanguage.value=e}},{key:"_storeInputLanguage",value:function(){var e=this._inputLanguage.value;this.setLanguage(e),this._onLanguageSelected&&this._onLanguageSelected(e),this._hidePopupCodeBlockLanguages()}},{key:"getElement",value:function(){return this._wrapper}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=/^[*_]{2,}[^*_]+[*_]{2,}$/,a=/[*_]{2,}([^*_]+)[*_]{2,}/g,l=o.default.command("markdown",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),o=n.getSelection(),r=!o;if(r&&i.ch>1){o=this.expendSelection(n,i)||o}var a=this.isNeedRemove(o),l=void 0;a?(l=this.remove(o),l=this._removeBoldSyntax(l)):(l=this._removeBoldSyntax(o),l=this.append(l)),n.replaceSelection(l,"around"),r&&!a&&this.setCursorToCenter(n,i),t.focus()},isNeedRemove:function(e){return r.test(e)},append:function(e){return"**"+e+"**"},remove:function(e){return e.substr(2,e.length-4)},expendSelection:function(e,t){var n=e.getSelection(),i=void 0,o={line:t.line,ch:t.ch-2},r={line:t.line,ch:t.ch+2};return e.setSelection(o,r),"****"===n||"____"===n?i=n:e.setSelection(t),i},setCursorToCenter:function(e,t){e.setCursor(t.line,t.ch+2)},_removeBoldSyntax:function(e){return e?e.replace(a,"$1"):""}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=/^[*_]{3,}[^*_]+[*_]{3,}$/,a=/^[*_][^*_]+[*_]$/,l=/[*_]([^*_]+)[*_]/g,s=o.default.command("markdown",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),o=n.getSelection(),r=!o,a=!1,l=void 0;r&&(i.ch>2&&(l=this.expendWithBoldSelection(n,i))&&(a="with"),"with"!==a&&i.ch>1&&(a=this.expendOnlyBoldSelection(n,i)),!a&&i.ch>0&&(this.expendSelection(n,i),o=l||o));var s=this.isNeedRemove(o),u=void 0;s?(u=this.remove(o),u=this._removeItalicSyntax(u)):(u=this._removeItalicSyntax(o),u=this.append(u)),n.replaceSelection(u,"around"),r&&this.setCursorToCenter(n,i,s),t.focus()},isNeedRemove:function(e){return a.test(e)||r.test(e)},append:function(e){return"_"+e+"_"},remove:function(e){return e.substr(1,e.length-2)},expendWithBoldSelection:function(e,t){var n=e.getSelection(),i=void 0,o={line:t.line,ch:t.ch-3},r={line:t.line,ch:t.ch+3};return e.setSelection(o,r),"******"===n||"______"===n?i=n:e.setSelection(t),i},expendOnlyBoldSelection:function(e,t){var n=e.getSelection(),i=!1,o={line:t.line,ch:t.ch-2},r={line:t.line,ch:t.ch+2};return e.setSelection(o,r),"****"!==n&&"____"!==n||(e.setSelection(t),i="only"),i},expendSelection:function(e,t){var n=e.getSelection(),i=void 0,o={line:t.line,ch:t.ch-2},r={line:t.line,ch:t.ch+2};return e.setSelection(o,r),"****"===n||"____"===n?i=n:e.setSelection(t),i},setCursorToCenter:function(e,t,n){var i=n?-1:1;e.setCursor(t.line,t.ch+i)},_removeItalicSyntax:function(e){return e?e.replace(l,"$1"):""}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=/^~~[^~]+~~$/,a=/~~([^~]+)~~/g,l=o.default.command("markdown",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),o=n.getSelection(),r=this.hasStrikeSyntax(o),a=void 0;r?(a=this.remove(o),a=this._removeStrikeSyntax(a)):(a=this._removeStrikeSyntax(o),a=this.append(a)),n.replaceSelection(a,"around"),o||r||this.setCursorToCenter(n,i,r),t.focus()},hasStrikeSyntax:function(e){return r.test(e)},append:function(e){return"~~"+e+"~~"},remove:function(e){return e.substr(2,e.length-4)},setCursorToCenter:function(e,t,n){var i=n?-2:2;e.setCursor(t.line,t.ch+i)},_removeStrikeSyntax:function(e){return e?e.replace(a,"$1"):""}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=/^> ?/,a=o.default.command("markdown",{name:"Blockquote",keyMap:["ALT+Q","ALT+Q"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),o={line:i.from.line,ch:0},r={line:i.to.line,ch:n.getLineHandle(i.to.line).text.length},a=n.getRange(o,r),l=a.split("\n"),s=this._haveBlockquote(l),u=void 0;if(u=s?this._removeBlockquote(l):this._addBlockquote(l),n.replaceRange(u.join("\n"),o,r),s){var c=l.length;this._isBlockquoteWithSpace(l[c-1])?i.to.ch-=2:i.to.ch-=1}else i.to.ch+=2;n.setCursor(i.to),t.focus()},_haveBlockquote:function(e){for(var t=0;t<e.length;t+=1)if(!r.test(e[t]))return!1;return!0},_addBlockquote:function(e){return e.map(function(e){return"> "+e})},_removeBlockquote:function(e){return e.map(function(e){return e.replace(r,"")})},_isBlockquoteWithSpace:function(e){return/^> /.test(e)}});t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.match(u),i="";do{i+="#",t-=1}while(t>0);if(n){e=e.split(n[0])[1]}return i+" "+e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=i(r),l=n(2),s=i(l),u=/^#+\s/g,c=s.default.command("markdown",{name:"Heading",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),r=e.getCurrentRange(),l={line:r.from.line,ch:0},s={line:r.to.line,ch:i.getLineHandle(r.to.line).text.length},u=i.getLine(s.line).length,c=i.getRange(l,s),d=c.split("\n");a.default.forEachArray(d,function(e,n){d[n]=o(e,t)}),i.replaceRange(d.join("\n"),l,s),r.to.ch+=i.getLine(s.line).length-u,i.setSelection(l,r.to),n.focus()}});t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=/^(#{1,6}| *((?:\*|-|\d\.)(?: \[[ xX]])?)) /;return e.replace(t,"")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=i(r),l=n(2),s=i(l),u=s.default.command("markdown",{name:"Paragraph",exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r={line:i.from.line,ch:0},l={line:i.to.line,ch:n.getLineHandle(i.to.line).text.length},s=n.getLine(l.line).length,u=n.getRange(r,l),c=u.split("\n");a.default.forEachArray(c,function(e,t){c[t]=o(e)}),n.replaceRange(c.join("\n"),r,l),i.to.ch+=n.getLine(l.line).length-s,n.setSelection(r,l),t.focus()}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o.default.command("markdown",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i="",o=e.getCurrentRange(),r={line:o.from.line,ch:o.from.ch},a={line:o.to.line,ch:o.to.ch};o.collapsed&&(i=n.getLine(r.line),r.ch=0,a.ch=n.getLineHandle(o.to.line).text.length),n.getLine(r.line).length?i+="\n\n* * *\n\n":i+="\n* * *\n",n.replaceRange(i,r,a),t.focus()}});t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(9),l=i(a),s=l.default.decodeURIGraceful,u=l.default.encodeMarkdownCharacters,c=l.default.escapeMarkdownCharacters,d=r.default.command("markdown",{name:"AddLink",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),o=e.getCurrentRange(),r={line:o.from.line,ch:o.from.ch},a={line:o.to.line,ch:o.to.ch},l=t.linkText,d=t.url;l=s(l),l=c(l),d=u(d);var f="["+l+"]("+d+")";i.replaceRange(f,r,a),n.focus()}});t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(9),l=i(a),s=l.default.decodeURIGraceful,u=l.default.encodeMarkdownCharacters,c=l.default.escapeMarkdownCharacters,d=r.default.command("markdown",{name:"AddImage",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),o=e.getCurrentRange(),r={line:o.from.line,ch:o.from.ch},a={line:o.to.line,ch:o.to.ch},l=t.altText,d=t.imageUrl;l=s(l),l=c(l),d=u(d);var f="!["+l+"]("+d+")";i.replaceRange(f,r,a,"+addImage"),n.focus()}});t.default=d},function(e,t,n){"use strict";function i(e){return!(!e||!e.match(l.FIND_MD_UL_TASK_RX))}function o(e){return!(!e||!e.match(l.FIND_MD_TASK_RX)&&!e.match(l.FIND_MD_OL_RX))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=n(34),s=/([-*])( \[[ xX]]) /,u=/[\d]+\.( \[[ xX]])? /,c=a.default.command("markdown",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),r=e.getCurrentRange(),a=e.componentManager.getManager("list"),c=a.expandLineRangeIfNeed(n,r,o),d=c.start,f=c.end,h=void 0,g=void 0,p=d;p<=f&&(g={line:p,ch:0},h=n.getLine(p),a.isListOrParagraph(h));p+=1)i(h)?a.replaceLineText(n,p,s,"$1 "):o(h)?a.replaceLineText(n,p,u,"* "):h.match(l.FIND_MD_UL_RX)||n.replaceRange("* ",g),p===f&&a.appendBlankLineIfNeed(t,p,f,d);t.focus()}});t.default=c},function(e,t,n){"use strict";function i(e){return!(!e||!e.match(a.FIND_MD_TASK_RX)&&!e.match(a.FIND_MD_UL_RX))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(34),l=/([-*]|[\d]+\.)( \[[ xX]])? /,s=r.default.command("markdown",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),o=e.getCurrentRange(),r=e.componentManager.getManager("list"),s=r.expandLineRangeIfNeed(n,o,i),u=s.start,c=s.end,d=1,f=void 0,h=void 0,g=u;g<=c&&(h={line:g,ch:0},f=n.getLine(g),r.isListOrParagraph(f));g+=1)i(f)?r.replaceLineText(n,g,l,d+". "):f.match(a.FIND_MD_OL_RX)||n.replaceRange(d+". ",h),d+=1,g===c&&r.appendBlankLineIfNeed(t,g,c,u);t.focus()}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o.default.command("markdown",{name:"Indent",exec:function(e){e.getEditor().execCommand("indentOrderedList")}});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o.default.command("markdown",{name:"Outdent",exec:function(e){e.getEditor().execCommand("indentLessOrderedList")}});t.default=r},function(e,t,n){"use strict";function i(e,t){for(var n="|",i="|",o=0;e;)t?(n+=" "+t[o]+" |",o+=1):n+="  |",i+=" --- |",e-=1;return n+"\n"+i+"\n"}function o(e,t,n){for(var i="",o=e,r=0;r<t;r+=1){i+="|";for(var a=0;a<e;a+=1)n?(i+=" "+n[o]+" |",o+=1):i+="  |";i+="\n"}return i=i.replace(/\n$/g,"")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a.default.command("markdown",{name:"Table",exec:function(e,t,n,r){var a=e.getEditor(),l=a.getDoc(),s="\n";a.getCursor().ch>0&&(s+="\n"),s+=i(t,r),s+=o(t,n-1,r),l.replaceSelection(s),r||a.setCursor(a.getCursor().line-n,2),e.focus()}});t.default=l},function(e,t,n){"use strict";function i(e){return!(!e||!e.match(a.FIND_MD_UL_RX)&&!e.match(a.FIND_MD_OL_RX))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(34),l=/([*-] |[\d]+\. )/,s=/([*-] |[\d]+\. )(\[[ xX]] )/,u=r.default.command("markdown",{name:"Task",keyMap:["ALT+T","ALT+T"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),o=e.getCurrentRange(),r=e.componentManager.getManager("list"),u=r.createSortedLineRange(o),c=u.start,d=u.end,f=void 0,h=void 0,g=c;g<=d;g+=1){h={line:g,ch:0},f=n.getLine(g);var p=!!f.match(s);if(!r.isListOrParagraph(f))break;i(f)&&p?r.replaceLineText(n,g,s,"$1"):i(f)&&!p?r.replaceLineText(n,g,l,"$1[ ] "):f.match(a.FIND_MD_TASK_RX)||n.replaceRange("* [ ] ",h),g===d&&r.appendBlankLineIfNeed(t,g,d,c)}t.focus()}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=/^`([^`]+)`$/,a=/`([^`]+)`/g,l=o.default.command("markdown",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getSelection(),o=t.getCursor(),r=this.hasStrikeSyntax(i),a=void 0;r?(a=this.remove(i),a=this._removeCodeSyntax(a)):(a=this._removeCodeSyntax(i),a=this.append(a)),n.replaceSelection(a,"around"),i||r||this.setCursorToCenter(n,o,r),t.focus()},setCursorToCenter:function(e,t,n){var i=n?-1:1;e.setCursor(t.line,t.ch+i)},hasStrikeSyntax:function(e){return r.test(e)},append:function(e){return"`"+e+"`"},remove:function(e){return e.substr(1,e.length-2)},_removeCodeSyntax:function(e){return e?e.replace(a,"$1"):""}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o.default.command("markdown",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),o=["```",n.getSelection(),"```"],r=1;0!==i.from.ch&&(o.unshift(""),r+=1),i.to.ch!==n.getLine(i.to.line).length&&o.push(""),n.replaceSelection(o.join("\n")),t.setCursor(i.from.line+r,0),t.focus()}});t.default=r},function(e,t,n){"use strict";function i(e){e.hasFormat("b")||e.hasFormat("strong")?e.changeFormat(null,{tag:"b"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.bold())}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=r.default.command("wysiwyg",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(i);var o=t.getSelection();o.collapse(!0),t.setSelection(o)}else i(t)}});t.default=a},function(e,t,n){"use strict";function i(e){e.hasFormat("i")||e.hasFormat("em")?e.changeFormat(null,{tag:"i"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.italic())}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=r.default.command("wysiwyg",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(i);var o=t.getSelection();o.collapse(!0),t.setSelection(o)}else i(t)}});t.default=a},function(e,t,n){"use strict";function i(e){e.hasFormat("S")?e.changeFormat(null,{tag:"S"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.strikethrough())}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=r.default.command("wysiwyg",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(i);var o=t.getSelection();o.collapse(!0),t.setSelection(o)}else i(t)}});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o.default.command("wysiwyg",{name:"Blockquote",keyMap:["ALT+Q","ALT+Q"],exec:function(e){var t=e.getEditor();e.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||(t.hasFormat("BLOCKQUOTE")?t.decreaseQuoteLevel():t.increaseQuoteLevel())}});t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(9),l=i(a),s=l.default.decodeURIGraceful,u=l.default.encodeMarkdownCharacters,c=r.default.command("wysiwyg",{name:"AddImage",exec:function(e,t){var n=e.getEditor(),i=t.altText,o=t.imageUrl;i=s(i),o=u(o),e.focus(),n.hasFormat("PRE")||n.insertImage(o,{alt:i})}});t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(2),l=i(a),s=n(9),u=i(s),c=u.default.decodeURIGraceful,d=u.default.encodeMarkdownCharacters,f=l.default.command("wysiwyg",{name:"AddLink",exec:function(e,t){var n=e.getEditor(),i=t.url,o=t.linkText;if(o=c(o),i=d(i),e.focus(),!n.hasFormat("PRE"))if(n.removeAllFormatting(),n.getSelectedText())n.makeLink(i);else{var a=n.createElement("A",{href:i});(0,r.default)(a).text(o),n.insertElement(a)}}});t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(4),l=i(a),s=r.default.command("wysiwyg",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=void 0,o=void 0,r=void 0;if(n.collapsed&&!t.hasFormat("TABLE")&&!t.hasFormat("PRE")){i=l.default.getChildNodeByOffset(n.startContainer,n.startOffset),o=l.default.getTopNextNodeUnder(i,e.get$Body()[0]),o||(o=t.createDefaultBlock(),e.get$Body().append(o));var a=t.createElement("HR");t.modifyBlocks(function(e){return e.appendChild(a),e}),r=a.previousSibling,r&&l.default.isTextNode(r)&&0===l.default.getTextLength(r)&&a.parentNode.removeChild(r),n.selectNodeContents(o),n.collapse(!0),t.setSelection(n)}e.focus()}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(2),l=i(a),s=l.default.command("wysiwyg",{name:"Heading",exec:function(e,t){var n=e.getEditor();e.focus(),n.hasFormat("TABLE")||n.hasFormat("PRE")||n.modifyBlocks(function(e){return(0,r.default)(e).children("h1, h2, h3, h4, h5, h6, div").each(function(e,n){var i="<H"+t+" />",o=(0,r.default)(n);if(o.is("DIV"))o.wrap(i);else{var a=(0,r.default)(i);a.insertBefore(n),a.html(o.html()),o.remove()}}),e})}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(2),l=i(a),s=l.default.command("wysiwyg",{name:"Paragraph",exec:function(e){var t=e.getEditor();e.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||t.modifyBlocks(function(e){var t=(0,r.default)(document.createDocumentFragment());return(0,r.default)(e).children().each(function(e,n){n.nodeName.match(/h\d/i)?t.append((0,r.default)(n).children()):n.nodeName.match(/ul|ol/i)?(0,r.default)(n).find("li").each(function(e,n){t.append((0,r.default)(n).children())}):t.append(n)}),t[0]})}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(4),l=i(a),s=r.default.command("wysiwyg",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),o=n.startContainer,r=n.endContainer,a=n.startOffset,s=n.endOffset;e.focus(),t.saveUndoState(n);for(var u=i.getLinesOfSelection(o,r),c=[],d=0;d<u.length;d+=1){var f=this._changeFormatToUnorderedListIfNeed(e,u[d]);f&&c.push(f)}if(c.length){var h=l.default.containsNode(c[0],o)?o:c[0],g=l.default.containsNode(c[c.length-1],r)?r:c[c.length-1];e.setSelectionByContainerAndOffset(h,a,g,s)}},_changeFormatToUnorderedListIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection(),o=e.componentManager.getManager("task"),r=void 0;return n.hasFormat("TABLE")||n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("LI")?(e.saveSelection(i),o.unformatTask(i.startContainer),n.replaceParent(i.startContainer,"ol","ul"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeUnorderedList()),r=n.getSelection().startContainer),r}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(4),l=i(a),s=r.default.command("wysiwyg",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),o=n.startContainer,r=n.startOffset,a=n.endContainer,s=n.endOffset;e.focus(),t.saveUndoState(n);for(var u=i.getLinesOfSelection(o,a),c=[],d=0;d<u.length;d+=1){var f=this._changeFormatToOrderedListIfNeed(e,u[d]);f&&c.push(f)}if(c.length){var h=l.default.containsNode(c[0],o)?o:c[0],g=l.default.containsNode(c[c.length-1],a)?a:c[c.length-1];e.setSelectionByContainerAndOffset(h,r,g,s)}},_changeFormatToOrderedListIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection(),o=e.componentManager.getManager("task"),r=void 0;return n.hasFormat("TABLE")||n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("LI")?(e.saveSelection(i),o.unformatTask(i.startContainer),n.replaceParent(i.startContainer,"ul","ol"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeOrderedList()),r=n.getSelection().startContainer),r}});t.default=s},function(e,t,n){"use strict";function i(e,t){var n=e.getSelection();n.selectNodeContents(t.find("th")[0]),n.collapse(!0),e.setSelection(n)}function o(e,t){for(var n="<thead><tr>",i=0;e;)n+="<th>",t&&(n+=t[i],i+=1),n+="</th>",e-=1;return n+="</tr></thead>"}function r(e,t,n){for(var i="<tbody>",o=e,r=0;r<t;r+=1){i+="<tr>";for(var a=0;a<e;a+=1)i+="<td>",n&&(i+=n[o],o+=1),i+="</td>";i+="</tr>"}return i+="</tbody>"}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=l.default.command("wysiwyg",{name:"Table",exec:function(e,t,n,a){var l=e.getEditor(),s=e.componentManager.getManager("table").getTableIDClassName(),u=void 0;if(!l.getSelection().collapsed||l.hasFormat("TABLE")||l.hasFormat("PRE"))return void e.focus();u='<table class="'+s+'">',u+=o(t,a),u+=r(t,n-1,a),u+="</table>",l.insertHTML(u),e.focus(),a||i(l,e.get$Body().find("."+s))}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.componentManager.getManager("tableSelection"),n=t.getSelectedCells(),i=1;if(n.length>1){var o=n.first().get(0),r=n.last().get(0),a=t.getSelectionRangeFromTable(o,r);i=a.to.row-a.from.row+1}return i}function r(e){var t=e.clone(),n=c.default.browser.msie?"":"<br />";return t.find("td").html(n),t}function a(e,t){var n=e.getSelection();n.selectNodeContents(t.find("td")[0]),n.collapse(!0),e.setSelection(n)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=i(l),u=n(1),c=i(u),d=n(2),f=i(d),h=f.default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=o(e),l=void 0,u=void 0;if(e.focus(),t.hasFormat("TD")){t.saveUndoState(n),l=(0,s.default)(n.startContainer).closest("tr");for(var c=0;c<i;c+=1)u=r(l),u.insertAfter(l);a(t,u)}else if(t.hasFormat("TH")){t.saveUndoState(n),l=(0,s.default)(n.startContainer).parents("thead").next("tbody").children("tr").eq(0);for(var d=0;d<i;d+=1)u=r(l),u.insertBefore(l);a(t,u)}}});t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.componentManager.getManager("tableSelection"),n=t.getSelectedCells(),i=1;if(n.length>0){var o=n.get(0).parentNode.querySelectorAll("td, th").length;i=Math.min(o,n.length)}return i}function r(e){var t=e.startContainer;return t="TD"===p.default.getNodeName(t)||"TH"===p.default.getNodeName(t)?(0,u.default)(t):(0,u.default)(t).parentsUntil("tr")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.index(),i=void 0;e.parents("table").find("tr").each(function(e,o){for(var r="TBODY"===p.default.getNodeName(o.parentNode),a=d.default.browser.msie,l=o.children[n],s=0;s<t;s+=1)i=r?document.createElement("td"):document.createElement("th"),a||i.appendChild(document.createElement("br")),(0,u.default)(i).insertAfter(l)})}function l(e,t){var n=e.getSelection();n.selectNodeContents(t.next()[0]),n.collapse(!0),e.setSelection(n)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),u=i(s),c=n(1),d=i(c),f=n(2),h=i(f),g=n(4),p=i(g),v=h.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=o(e),s=void 0;e.focus(),t.hasFormat("TR")&&(t.saveUndoState(n),s=r(n),a(s,i),l(t,s))}});t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=n.find("td").get(0);t.setStart(o,0),t.collapse(!0),i.setLastCellNode(o),e.setSelection(t)}function r(e,t,n){var i=n.find("tbody tr").length,o=(0,s.default)(e).parents("thead").length,r=t.from.row,a=t.to.row;return o&&(r+=1),(1===r||o)&&a===i&&(a-=1),n.find("tr").slice(r,a+1)}function a(e,t,n){var i=t.getSelectedCells(),o=void 0,a=void 0;if(i.length)o=t.getSelectionRangeFromTable(i.first().get(0),i.last().get(0)),a=r(i.first()[0],o,n);else{var l=(0,s.default)(e.startContainer).closest("td,th").get(0);o=t.getSelectionRangeFromTable(l,l),a=r(l,o,n)}return a}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=i(l),u=n(2),c=i(u),d=c.default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=(0,s.default)(n.startContainer).parents("table"),r=e.componentManager.getManager("tableSelection"),l=e.componentManager.getManager("table"),u=a(n,r,i),c=i.find("tbody tr").length;if(e.focus(),(t.hasFormat("TD")||t.hasFormat("TABLE"))&&c>1){t.saveUndoState(n);var d=u.last().next()[0]?u.last().next():u.first().prev();d.length&&o(t,n,d,l),u.remove()}r.removeClassAttrbuteFromAllCellsIfNeed()}});t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.startContainer;return t="TD"===h.default.getNodeName(t)||"TH"===h.default.getNodeName(t)?(0,u.default)(t):(0,u.default)(t).parentsUntil("tr")}function r(e){for(var t=e.length,n=0;n<t;n+=1){e.eq(n).length>0&&a(e.eq(n))}}function a(e){var t=e.index();e.parents("table").find("tr").each(function(e,n){(0,u.default)(n).children().eq(t).remove()})}function l(e,t,n){var i=t.get(0);if(t.length&&u.default.contains(document,t)){var o=e.getSelection();o.selectNodeContents(t[0]),o.collapse(!0),e.setSelection(o),n.setLastCellNode(i)}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),u=i(s),c=n(2),d=i(c),f=n(4),h=i(f),g=d.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=(0,u.default)(n.startContainer).parents("table"),s=e.componentManager.getManager("table"),c=e.componentManager.getManager("tableSelection"),d=(0,u.default)(n.startContainer).closest("table").find("thead tr th").length>1;if(e.focus(),n.collapse(!0),t.setSelection(n),t.hasFormat("TR",null,n)&&d){var f=i.find("tbody tr:first td").length,h=c.getSelectedCells();if(h.length<f){t.saveUndoState(n);var g=void 0;if(h.length>1){var p=h.last(),v=h.first();g=p.next().length?p.next():v.prev(),r(h)}else{var m=o(n);g=m.next().length?m.next():m.prev(),a(m)}l(t,g,s)}}}});t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i=n.isDivided||!1,o=n.startColumnIndex,r=n.endColumnIndex,a=e.find("tr").eq(0).find("td,th").length;e.find("tr").each(function(e,n){(0,s.default)(n).children("td,th").each(function(e,n){i&&(o<=e&&e<=a||e<=r)?(0,s.default)(n).attr("align",t):o<=e&&e<=r&&(0,s.default)(n).attr("align",t)})})}function r(e,t){var n=e.find("tr").eq(0).find("td,th").length,i=t.from,o=t.to,r=void 0,a=void 0,l=void 0;return i.row===o.row?(r=i.cell,a=o.cell):i.row<o.row&&(i.cell<=o.cell?(r=0,a=n-1):(r=i.cell,a=o.cell,l=!0)),{startColumnIndex:r,endColumnIndex:a,isDivided:l}}function a(e,t){var n=t.getSelectedCells(),i=void 0,o=void 0;if(n.length)i=t.getSelectionRangeFromTable(n.first().get(0),n.last().get(0));else{var r=e.startContainer;o=f.default.isTextNode(r)?(0,s.default)(r).parent("td,th")[0]:r,i=t.getSelectionRangeFromTable(o,o)}return i}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=i(l),u=n(2),c=i(u),d=n(4),f=i(d),h=c.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),i=n.getSelection().cloneRange(),l=e.componentManager.getManager("tableSelection"),u=a(i,l);if(e.focus(),n.hasFormat("TR")){n.saveUndoState(i);var c=(0,s.default)(i.startContainer).parents("table");o(c,t,r(c,u))}l.removeClassAttrbuteFromAllCellsIfNeed()}});t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(2),l=i(a),s=l.default.command("wysiwyg",{name:"RemoveTable",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.hasFormat("TABLE")){t.saveUndoState(n);(0,r.default)(n.startContainer).closest("table").remove()}e.focus()}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(2),l=i(a),s=l.default.command("wysiwyg",{name:"Indent",exec:function(e){var t=e.componentManager.getManager("list"),n=e.getEditor().getSelection(),i=(0,r.default)(n.startContainer).closest("li"),o=void 0,a=void 0,l=void 0,s=i.prev();if(s.length&&i.length){var u=i.find("li").eq(0);e.getEditor().saveUndoState(),a=i.attr("class"),o=s.attr("class"),l=u.attr("class"),i.removeAttr("class"),s.removeAttr("class"),u.length&&!u.children("div").length&&u.removeAttr("class"),e.getEditor().increaseListLevel(),t.mergeList(i.get(0)),i.attr("class",a),s.attr("class",o),u.attr("class",l)}}});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return!e.next().is("OL,UL")}function r(e){var t=e.getEditor().getSelection();return(0,l.default)(t.startContainer).closest("li")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=i(a),s=n(2),u=i(s),c=u.default.command("wysiwyg",{name:"Outdent",exec:function(e){var t=r(e);if(t.length&&o(t)){e.getEditor().saveUndoState();var n=t.attr("class");e.getEditor().decreaseListLevel(),t=r(e),t.attr("class",n)}}});t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(2),l=i(a),s=n(4),u=i(s),c=l.default.command("wysiwyg",{name:"Task",keyMap:["ALT+T","ALT+T"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),o=n.startContainer,r=n.endContainer,a=n.startOffset,l=n.endOffset;e.focus(),t.saveUndoState(n);for(var s=i.getLinesOfSelection(o,r),c=[],d=0;d<s.length;d+=1){var f=this._changeFormatToTaskIfNeed(e,s[d]);f&&c.push(f)}if(c.length){var h=u.default.containsNode(c[0],o)?o:c[0],g=u.default.containsNode(c[c.length-1],r)?r:c[c.length-1];e.setSelectionByContainerAndOffset(h,a,g,l)}},_changeFormatToTaskIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection(),o=e.componentManager.getManager("task"),a=void 0;return n.hasFormat("TABLE")||n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("li")||(n.makeUnorderedList(),t=n.getSelection().startContainer),(0,r.default)(t).hasClass("task-list-item")?o.unformatTask(t):o.formatTask(t),a=n.getSelection().startContainer),a}});t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){"CODE"===h.default.getNodeName(e.startContainer.nextSibling)&&0===h.default.getTextLength(e.startContainer.nextSibling)&&(0,l.default)(e.startContainer.nextSibling).remove()}function r(e,t){if(!t.hasFormat("PRE")&&t.hasFormat("code"))t.changeFormat(null,{tag:"code"}),o(e.getSelection().cloneRange());else if(!t.hasFormat("a")&&!t.hasFormat("PRE")){t.hasFormat("b")?t.removeBold():t.hasFormat("i")&&t.removeItalic(),t.changeFormat({tag:"code"});var n=t.getSelection().cloneRange();n.setStart(n.endContainer,n.endOffset),n.collapse(!0),t.setSelection(n)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=i(a),s=n(1),u=i(s),c=n(2),d=i(c),f=n(4),h=i(f),g=d.default.command("wysiwyg",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection"),i=u.default.bind(r,null,e.getEditor());if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(i);var o=t.getSelection();o.collapse(!0),t.setSelection(o)}else i(t)}});t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t.getEditor().getSelection().cloneRange();e.removeClass(f),n.setStartBefore(e.get(0).firstChild),n.collapse(!0),t.getEditor().setSelection(n)}function r(e,t){var n=t.componentManager.getManager("codeblock"),i=void 0;if(e.collapsed)i="<br>";else{var o=e.extractContents(),r=u.default.toArray(o.childNodes);i=(0,l.default)("<div>").append(n.prepareToPasteOnCodeblock(r)).html()}return i}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=i(a),s=n(1),u=i(s),c=n(2),d=i(c),f="te-content-codeblock-temp",h=d.default.command("wysiwyg",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e,t){var n=e.getEditor(),i=n.getSelection().cloneRange();if(!n.hasFormat("PRE")&&!n.hasFormat("TABLE")){var a='data-te-codeblock class = "'+f+'"';t&&(a+=' data-language="'+t+'"');var l=r(i,e);n.insertHTML("<pre "+a+">"+l+"</pre>"),o(e.get$Body().find("."+f),e)}e.focus()}});t.default=h},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["en","en_US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row":"Add row","Add col":"Add col","Remove row":"Remove row","Remove col":"Remove col","Align left":"Align left","Align center":"Align center","Align right":"Align right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Cannot paste values ​​other than a table in the cell selection state":"Cannot paste values ​​other than a table in the cell selection state.","Choose language":"Choose language"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["ko","ko_KR"],{Markdown:"마크다운",WYSIWYG:"위지윅",Write:"편집하기",Preview:"미리보기",Headings:"제목크기",Paragraph:"본문",Bold:"굵게",Italic:"기울임꼴",Strike:"취소선",Code:"인라인 코드",Line:"문단나눔",Blockquote:"인용구","Unordered list":"글머리 기호","Ordered list":"번호 매기기",Task:"체크박스",Indent:"들여쓰기",Outdent:"내어쓰기","Insert link":"링크 삽입","Insert CodeBlock":"코드블럭 삽입","Insert table":"표 삽입","Insert image":"이미지 삽입",Heading:"제목","Image URL":"이미지 주소","Select image file":"이미지 파일을 선택하세요.",Description:"설명",OK:"확인",More:"더 보기",Cancel:"취소",File:"파일",URL:"주소","Link text":"링크 텍스트","Add row":"행 추가","Add col":"열 추가","Remove row":"행 삭제","Remove col":"열 삭제","Align left":"왼쪽 정렬","Align center":"가운데 정렬","Align right":"오른쪽 정렬","Remove table":"표 삭제","Would you like to paste as table?":"표형태로 붙여 넣겠습니까?","Text color":"글자 색상","Auto scroll enabled":"자동 스크롤 켜짐","Auto scroll disabled":"자동 스크롤 꺼짐","Cannot paste values ​​other than a table in the cell selection state.":"셀 선택 상태에서는 테이블 이외의 값은 붙여넣을 수 없습니다.","Choose language":"언어 선택"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["zh","zh_CN"],{Markdown:"Markdown",WYSIWYG:"所见即所得",Write:"编辑",Preview:"预览",Headings:"标题",Paragraph:"文本",Bold:"加粗",Italic:"斜体字",Strike:"删除线",Code:"内嵌代码",Line:"水平线",Blockquote:"引用块","Unordered list":"无序列表","Ordered list":"有序列表",Task:"任务",Indent:"缩进",Outdent:"减少缩进","Insert link":"插入链接","Insert CodeBlock":"插入代码块","Insert table":"插入表格","Insert image":"插入图片",Heading:"标题","Image URL":"图片网址","Select image file":"选择图片文件",Description:"说明",OK:"确认",More:"更多",Cancel:"取消",File:"文件",URL:"URL","Link text":"链接文本","Add row":"添加行","Add col":"添加列","Remove row":"删除行","Remove col":"删除列","Align left":"左对齐","Align center":"居中对齐","Align right":"右对齐","Remove table":"删除表格","Would you like to paste as table?":"需要粘贴为表格吗?","Text color":"文字颜色","Auto scroll enabled":"自动滚动已启用","Auto scroll disabled":"自动滚动已禁用","Cannot paste values ​​other than a table in the cell selection state":"在选中单元格状态下无法将值粘贴到表格以外。","Choose language":"选择语言"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["ja","ja_JP"],{Markdown:"マークダウン",WYSIWYG:"WYSIWYG",Write:"編集する",Preview:"プレビュー",Headings:"見出し",Paragraph:"本文",Bold:"太字",Italic:"イタリック",Strike:"ストライク",Code:"インラインコード",Line:"ライン",Blockquote:"引用","Unordered list":"番号なしリスト","Ordered list":"順序付きリスト",Task:"タスク",Indent:"インデント",Outdent:"アウトデント","Insert link":"リンク挿入","Insert CodeBlock":"コードブロック挿入","Insert table":"テーブル挿入","Insert image":"画像挿入",Heading:"見出し","Image URL":"イメージURL","Select image file":"画像ファイル選択",Description:"ディスクリプション ",OK:"はい",More:"もっと",Cancel:"キャンセル",File:"ファイル",URL:"URL","Link text":"リンクテキスト","Add row":"行追加","Add col":"列追加","Remove row":"行削除","Remove col":"列削除","Align left":"左揃え","Align center":"中央揃え","Align right":"右揃え","Remove table":"テーブル削除","Would you like to paste as table?":"テーブルを貼り付けますか?","Text color":"文字色相","Auto scroll enabled":"自動スクロールが有効","Auto scroll disabled":"自動スクロールを無効に","Cannot paste values ​​other than a table in the cell selection state":"表以外の値をセル選択状態に貼り付けることはできません。","Choose language":"言語選択"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["nl","nl_NL"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Koppen",Paragraph:"tekst",Bold:"Vet",Italic:"Cursief",Strike:"Doorhalen",Code:"Inline Code",Line:"Regel",Blockquote:"Citaatblok","Unordered list":"Opsomming","Ordered list":"Genummerde opsomming",Task:"Taak",Indent:"Inspringen",Outdent:"Outdent","Insert link":"Link invoegen","Insert CodeBlock":"Codeblok toevoegen","Insert table":"Tabel invoegen","Insert image":"Afbeelding invoegen",Heading:"Kop","Image URL":"Afbeelding URL","Select image file":"Selecteer een afbeelding",Description:"Omschrijving",OK:"OK",More:"verder",Cancel:"Annuleren",File:"Bestand",URL:"URL","Link text":"Link tekst","Add row":"Rij toevoegen","Add col":"Kolom toevoegen","Remove row":"Rij verwijderen","Remove col":"Kolom verwijderen","Align left":"Links uitlijnen","Align center":"Centreren","Align right":"Rechts uitlijnen","Remove table":"Verwijder tabel","Would you like to paste as table?":"Wil je dit als tabel plakken?","Text color":"Tekstkleur","Auto scroll enabled":"Autoscroll ingeschakeld","Auto scroll disabled":"Autoscroll uitgeschakeld","Cannot paste values ​​other than a table in the cell selection state":"Kan geen waardes anders dan de tabel in de cell plakken","Choose language":"Kies een taal"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["es","es_ES"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Escribir",Preview:"Vista previa",Headings:"Encabezados",Paragraph:"Párrafo",Bold:"Negrita",Italic:"Itálica",Strike:"Tachado",Code:"Código",Line:"Línea",Blockquote:"Cita","Unordered list":"Lista desordenada","Ordered list":"Lista ordenada",Task:"Tarea",Indent:"Sangría",Outdent:"Saliendo","Insert link":"Insertar enlace","Insert CodeBlock":"Insertar bloque de código","Insert table":"Insertar tabla","Insert image":"Insertar imagen",Heading:"Encabezado","Image URL":"URL de la imagen","Select image file":"Seleccionar archivo de imagen",Description:"Descripción",OK:"Aceptar",More:"Más",Cancel:"Cancelar",File:"Archivo",URL:"URL","Link text":"Texto del enlace","Add row":"Agregar fila","Add col":"Agregar columna","Remove row":"Eliminar fila","Remove col":"Eliminar columna","Align left":"Alinear a la izquierda","Align center":"Centrar","Align right":"Alinear a la derecha","Remove table":"Eliminar tabla","Would you like to paste as table?":"¿Desea pegar como tabla?","Text color":"Color del texto","Auto scroll enabled":"Desplazamiento automático habilitado","Auto scroll disabled":"Desplazamiento automático deshabilitado","Cannot paste values ​​other than a table in the cell selection state":"Sólo se pueden pegar tablas en el modo de selección de celdas","Choose language":"Elegir idioma"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["de","de_DE"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Verfassen",Preview:"Vorschau",Headings:"Überschriften",Paragraph:"Text",Bold:"Fett",Italic:"Kursiv",Strike:"Durchgestrichen",Code:"Code",Line:"Trennlinie",Blockquote:"Blocktext","Unordered list":"Aufzählung","Ordered list":"Nummerierte Aufzählung",Task:"Aufgabe",Indent:"Einrücken",Outdent:"Ausrücken","Insert link":"Link einfügen","Insert CodeBlock":"Codeblock einfügen","Insert table":"Tabelle einfügen","Insert image":"Grafik einfügen",Heading:"Titel","Image URL":"Bild URL","Select image file":"Grafik auswählen",Description:"Beschreibung",OK:"OK",More:"Mehr",Cancel:"Abbrechen",File:"Datei",URL:"URL","Link text":"Anzuzeigender Text","Add row":"Zeile hinzufügen","Add col":"Spalte hinzufügen","Remove row":"Zeile entfernen","Remove col":"Spalte entfernen","Align left":"Links ausrichten","Align center":"Zentrieren","Align right":"Rechts ausrichten","Remove table":"Tabelle entfernen","Would you like to paste as table?":"Möchten Sie eine Tabelle einfügen?","Text color":"Textfarbe","Auto scroll enabled":"Autoscrollen aktiviert","Auto scroll disabled":"Autoscrollen deaktiviert","Cannot paste values ​​other than a table in the cell selection state":"Im Zellenauswahlstatus können keine anderen Werte als eine Tabelle eingefügt werden","Choose language":"Sprache auswählen"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["ru","ru_RU"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Написать",Preview:"Предварительный просмотр",Headings:"Заголовки",Paragraph:"Абзац",Bold:"Жирный",Italic:"Курсив",Strike:"Зачеркнутый",Code:"Встроенный код",Line:"Строка",Blockquote:"Блок цитирования","Unordered list":"Неупорядоченный список","Ordered list":"Упорядоченный список",Task:"Задача",Indent:"отступ",Outdent:"Выступ","Insert link":"Вставить ссылку","Insert CodeBlock":"Вставить код","Insert table":"Вставить таблицу","Insert image":"Вставить изображение",Heading:"Заголовок","Image URL":"URL изображения","Select image file":"Выбрать файл изображения",Description:"Описание",OK:"Хорошо",More:"еще",Cancel:"Отмена",File:"Файл",URL:"URL","Link text":"Текст ссылки","Add row":"Добавить ряд","Add col":"Добавить столбец","Remove row":"Удалить ряд","Remove col":"Удалить столбец","Align left":"Выровнять по левому краю","Align center":"Выровнять по центру","Align right":"Выровнять по правому краю","Remove table":"Удалить таблицу","Would you like to paste as table?":"Вы хотите вставить в виде таблицы?","Text color":"Цвет текста","Auto scroll enabled":"Автоматическая прокрутка включена","Auto scroll disabled":"Автоматическая прокрутка отключена","Cannot paste values ​​other than a table in the cell selection state":"Вы не можете вставлять значения, отличные от таблицы, в состоянии выбора ячейки.","Choose language":"Выбрать язык"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["fr","fr_FR"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Écrire",Preview:"Aperçu",Headings:"En-têtes",Paragraph:"Paragraphe",Bold:"Gras",Italic:"Italique",Strike:"Barré",Code:"Code en ligne",Line:"Ligne",Blockquote:"Citation","Unordered list":"Liste non-ordonnée","Ordered list":"Liste ordonnée",Task:"Tâche",Indent:"Retrait",Outdent:"Sortir","Insert link":"Insérer un lien","Insert CodeBlock":"Insérer un bloc de code","Insert table":"Insérer un tableau","Insert image":"Insérer une image",Heading:"En-tête","Image URL":"URL de l'image","Select image file":"Sélectionnez un fichier image",Description:"Description",OK:"OK",More:"de plus",Cancel:"Annuler",File:"Fichier",URL:"URL","Link text":"Texte du lien","Add row":"Ajouter une ligne","Add col":"Ajouter une colonne","Remove row":"Supprimer une ligne","Remove col":"Supprimer une colonne","Align left":"Aligner à gauche","Align center":"Aligner au centre","Align right":"Aligner à droite","Remove table":"Supprimer le tableau","Would you like to paste as table?":"Voulez-vous coller ce contenu en tant que tableau ?","Text color":"Couleur du texte","Auto scroll enabled":"Défilement automatique activé","Auto scroll disabled":"Défilement automatique désactivé","Cannot paste values ​​other than a table in the cell selection state":"Impossible de coller autre chose qu'un tableau dans la sélection de la cellule.","Choose language":"Choix de la langue"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["uk","uk_UA"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Написати",Preview:"Попередній перегляд",Headings:"Заголовки",Paragraph:"Абзац",Bold:"Жирний",Italic:"Курсив",Strike:"Закреслений",Code:"Вбудований код",Line:"Лінія",Blockquote:"Блок цитування","Unordered list":"Невпорядкований список","Ordered list":"Упорядкований список",Task:"Завдання",Indent:"відступ",Outdent:"застарілий","Insert link":"Вставити посилання","Insert CodeBlock":"Вставити код","Insert table":"Вставити таблицю","Insert image":"Вставити зображення",Heading:"Заголовок","Image URL":"URL зображення","Select image file":"Вибрати файл зображення",Description:"Опис",OK:"OK",More:"ще",Cancel:"Скасувати",File:"Файл",URL:"URL","Link text":"Текст посилання","Add row":"Додати ряд","Add col":"Додати стовпчик","Remove row":"Видалити ряд","Remove col":"Видалити стовпчик","Align left":"Вирівняти по лівому краю","Align center":"Вирівняти по центру","Align right":"Вирівняти по правому краю","Remove table":"Видалити таблицю","Would you like to paste as table?":"Ви хочете вставити у вигляді таблиці?","Text color":"Колір тексту","Auto scroll enabled":"Автоматична прокрутка включена","Auto scroll disabled":"Автоматична прокрутка відключена","Cannot paste values ​​other than a table in the cell selection state":"Ви не можете вставляти значення, відмінні від таблиці, в стані вибору комірки.","Choose language":"Вибрати мову"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["tr","tr_TR"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Düzenle",Preview:"Ön izleme",Headings:"Başlıklar",Paragraph:"Paragraf",Bold:"Kalın",Italic:"İtalik",Strike:"Altı çizgili",Code:"Satır içi kod",Line:"Çizgi",Blockquote:"Alıntı","Unordered list":"Sıralanmamış liste","Ordered list":"Sıralı liste",Task:"Görev kutusu",Indent:"Girintiyi arttır",Outdent:"Girintiyi azalt","Insert link":"Bağlantı ekle","Insert CodeBlock":"Kod bloku ekle","Insert table":"Tablo ekle","Insert image":"İmaj ekle",Heading:"Başlık","Image URL":"İmaj URL","Select image file":"İmaj dosyası seç",Description:"Açıklama",OK:"Onay",More:"Daha Fazla",Cancel:"İptal",File:"Dosya",URL:"URL","Link text":"Bağlantı yazısı","Add row":"Satır ekle","Add col":"Sütun ekle","Remove row":"Satır sil","Remove col":"Sütun sil","Align left":"Sola hizala","Align center":"Merkeze hizala","Align right":"Sağa hizala","Remove table":"Tabloyu kaldır","Would you like to paste as table?":"Tablo olarak yapıştırmak ister misiniz?","Text color":"Metin rengi","Auto scroll enabled":"Otomatik kaydırma açık","Auto scroll disabled":"Otomatik kaydırma kapalı","Cannot paste values ​​other than a table in the cell selection state":"Hücre seçimi sırasında tablo dışında veriler yapıştırılamaz.","Choose language":"Dil seçiniz"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["fi","fi_FI"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Kirjoita",Preview:"Esikatselu",Headings:"Otsikot",Paragraph:"Kappale",Bold:"Lihavointi",Italic:"Kursivointi",Strike:"Yliviivaus",Code:"Koodi",Line:"Vaakaviiva",Blockquote:"Lainaus","Unordered list":"Luettelo","Ordered list":"Numeroitu luettelo",Task:"Tehtävä",Indent:"Suurenna sisennystä",Outdent:"Pienennä sisennystä","Insert link":"Lisää linkki","Insert CodeBlock":"Lisää koodia","Insert table":"Lisää taulukko","Insert image":"Lisää kuva",Heading:"Otsikko","Image URL":"Kuvan URL","Select image file":"Valitse kuvatiedosto",Description:"Kuvaus",OK:"OK",More:"Lisää",Cancel:"Peruuta",File:"Tiedosto",URL:"URL","Link text":"Linkkiteksti","Add row":"Lisää rivi","Add col":"Lisää sarake","Remove row":"Poista rivi","Remove col":"Poista sarake","Align left":"Tasaus vasemmalle","Align center":"Keskitä","Align right":"Tasaus oikealle","Remove table":"Poista taulukko","Would you like to paste as table?":"Haluatko liittää taulukkomuodossa?","Text color":"Tekstin väri","Auto scroll enabled":"Automaattinen skrollaus käytössä","Auto scroll disabled":"Automaattinen skrollaus pois käytöstä","Cannot paste values other than a table in the cell selection state":"Vain taulukko voidaan liittää solunvalintatilassa.","Choose language":"Valitse kieli"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["cs","cs_CZ"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Napsat",Preview:"Náhled",Headings:"Nadpisy",Paragraph:"Odstavec",Bold:"Tučné",Italic:"Kurzíva",Strike:"Přeškrtnuté",Code:"Kód",Line:"Vodorovná čára",Blockquote:"Citace","Unordered list":"Seznam s odrážkami","Ordered list":"Číslovaný seznam",Task:"Úkol",Indent:"Zvětšit odsazení",Outdent:"Zmenšit odsazení","Insert link":"Vložit odkaz","Insert CodeBlock":"Vložit blok kódu","Insert table":"Vložit tabulku","Insert image":"Vložit obrázek",Heading:"Nadpis","Image URL":"URL obrázku","Select image file":"Vybrat obrázek",Description:"Popis",OK:"OK",More:"Více",Cancel:"Zrušit",File:"Soubor",URL:"URL","Link text":"Text odkazu","Add row":"Přidat řádek","Add col":"Přidat sloupec","Remove row":"Odebrat řádek","Remove col":"Odebrat sloupec","Align left":"Zarovnat vlevo","Align center":"Zarovnat na střed","Align right":"Zarovnat vpravo","Remove table":"Odstranit tabulku","Would you like to paste as table?":"Chcete vložit jako tabulku?","Text color":"Barva textu","Auto scroll enabled":"Automatické rolování zapnuto","Auto scroll disabled":"Automatické rolování vypnuto","Cannot paste values ​​other than a table in the cell selection state":"Nelze vkládat jiné hodnoty než tabulka ve stavu výběru buněk","Choose language":"Vybrat jazyk"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["ar","ar_AR"],{Markdown:"لغة ترميز",WYSIWYG:"ما تراه هو ما تحصل عليه",Write:"يكتب",Preview:"عرض مسبق",Headings:"العناوين",Paragraph:"فقرة",Bold:"خط عريض",Italic:"خط مائل",Strike:"إضراب",Code:"رمز",Line:"خط",Blockquote:"فقرة مقتبسة","Unordered list":"قائمة غير مرتبة","Ordered list":"قائمة مرتبة",Task:"مهمة",Indent:"المسافة البادئة",Outdent:"المسافة الخارجة","Insert link":"أدخل الرابط","Insert CodeBlock":"أدخل الكود","Insert table":"أدخل جدول","Insert image":"أدخل صورة",Heading:"عنوان","Image URL":"رابط الصورة","Select image file":"حدد ملف الصورة",Description:"وصف",OK:"موافقة",More:"أكثر",Cancel:"إلغاء",File:"ملف",URL:"رابط","Link text":"نص الرابط","Add row":"ضف سطر","Add col":"ضف عمود","Remove row":"حذف سطر","Remove col":"حذف عمود","Align left":"محاذاة اليسار","Align center":"محاذاة الوسط","Align right":"محاذاة اليمين","Remove table":"حذف الجدول","Would you like to paste as table?":"هل تريد اللصق كجدول","Text color":"لون النص","Auto scroll enabled":"التحريك التلقائي ممكّن","Auto scroll disabled":"التحريك التلقائي معطّل","Cannot paste values ​​other than a table in the cell selection state":"لا يمكن اللصق في الجدول إلا في وجود خلايا مختارة","Choose language":"اختر اللغة"})},function(e,t,n){"use strict";var i=n(3);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.setLanguage(["pl","pl_PL"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Napisz",Preview:"Podgląd",Headings:"Nagłówki",Paragraph:"Akapit",Bold:"Pogrubienie",Italic:"Kursywa",Strike:"Przekreślenie",Code:"Fragment kodu",Line:"Linia",Blockquote:"Cytat","Unordered list":"Lista nieuporządkowana","Ordered list":"Lista uporządkowana",Task:"Zadanie",Indent:"Utwórz wcięcie",Outdent:"Usuń wcięcie","Insert link":"Umieść odnośnik","Insert CodeBlock":"Umieść blok kodu","Insert table":"Umieść tabelę","Insert image":"Umieść obraz",Heading:"Nagłówek","Image URL":"Adres URL obrazu","Select image file":"Wybierz plik obrazu",Description:"Opis",OK:"OK",More:"Więcej",Cancel:"Anuluj",File:"Plik",URL:"URL","Link text":"Tekst odnośnika","Add row":"Dodaj rząd","Add col":"Dodaj kolumnę","Remove row":"Usuń rząd","Remove col":"Usuń kolumnę","Align left":"Wyrównaj do lewej","Align center":"Wyśrodkuj","Align right":"Wyrównaj do prawej","Remove table":"Usuń tabelę","Would you like to paste as table?":"Czy chcesz wkleić tekst jako tabelę?","Text color":"Kolor tekstu","Auto scroll enabled":"Włączono automatyczne przewijanie","Auto scroll disabled":"Wyłączono automatyczne przewijanie","Cannot paste values ​​other than a table in the cell selection state":"Nie można wkleić wartości innej niż tabela w trybie wyboru komórki.","Choose language":"Wybierz język"})}])});